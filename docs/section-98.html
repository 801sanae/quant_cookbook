<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 금융 데이터 수집하기 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기</title>
  <meta name="description" content="Chapter 6 금융 데이터 수집하기 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 금융 데이터 수집하기 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 금융 데이터 수집하기 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기" />
  
  
  

<meta name="author" content="이현열" />


<meta name="date" content="2019-06-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="section-17.html">
<link rel="next" href="section-109.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">퀀트 투자 쿡북</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>여는 글</a></li>
<li class="chapter" data-level="1" data-path="section-1.html"><a href="section-1.html"><i class="fa fa-check"></i><b>1</b> 퀀트 투자의 심장: 데이터와 프로그래밍</a><ul>
<li class="chapter" data-level="1.1" data-path="section-1.html"><a href="section-1.html#section-2"><i class="fa fa-check"></i><b>1.1</b> 데이터 구하기</a></li>
<li class="chapter" data-level="1.2" data-path="section-1.html"><a href="section-1.html#section-3"><i class="fa fa-check"></i><b>1.2</b> 퀀트 투자와 프로그래밍</a></li>
<li class="chapter" data-level="1.3" data-path="section-1.html"><a href="section-1.html#r-"><i class="fa fa-check"></i><b>1.3</b> R 프로그램</a></li>
<li class="chapter" data-level="1.4" data-path="section-1.html"><a href="section-1.html#r--1"><i class="fa fa-check"></i><b>1.4</b> 퀀트 투자에 유용한 R 패키지</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="section-4.html"><a href="section-4.html"><i class="fa fa-check"></i><b>2</b> 크롤링을 위한 기본 지식</a><ul>
<li class="chapter" data-level="2.1" data-path="section-4.html"><a href="section-4.html#r-utf-8-"><i class="fa fa-check"></i><b>2.1</b> 인코딩의 이해와 R에서 UTF-8 설정하기</a><ul>
<li class="chapter" data-level="2.1.1" data-path="section-4.html"><a href="section-4.html#ascii"><i class="fa fa-check"></i><b>2.1.1</b> 인간과 컴퓨터 간 번역의 시작, ASCII</a></li>
<li class="chapter" data-level="2.1.2" data-path="section-4.html"><a href="section-4.html#section-5"><i class="fa fa-check"></i><b>2.1.2</b> 한글 인코딩의 종류</a></li>
<li class="chapter" data-level="2.1.3" data-path="section-4.html"><a href="section-4.html#r-utf-8--1"><i class="fa fa-check"></i><b>2.1.3</b> R에서 UTF-8 설정하기</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="section-4.html"><a href="section-4.html#section-6"><i class="fa fa-check"></i><b>2.2</b> 웹의 동작 방식</a><ul>
<li class="chapter" data-level="2.2.1" data-path="section-4.html"><a href="section-4.html#http"><i class="fa fa-check"></i><b>2.2.1</b> HTTP</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="section-4.html"><a href="section-4.html#html-css-"><i class="fa fa-check"></i><b>2.3</b> HTML과 CSS 이해하기</a><ul>
<li class="chapter" data-level="2.3.1" data-path="section-4.html"><a href="section-4.html#html--"><i class="fa fa-check"></i><b>2.3.1</b> HTML 기본 구조</a></li>
<li class="chapter" data-level="2.3.2" data-path="section-4.html"><a href="section-4.html#section-7"><i class="fa fa-check"></i><b>2.3.2</b> 태그와 속성</a></li>
<li class="chapter" data-level="2.3.3" data-path="section-4.html"><a href="section-4.html#h--p-"><i class="fa fa-check"></i><b>2.3.3</b> h 태그와 p 태그</a></li>
<li class="chapter" data-level="2.3.4" data-path="section-4.html"><a href="section-4.html#ul-ol-"><i class="fa fa-check"></i><b>2.3.4</b> 리스트: ul과 ol 태그</a></li>
<li class="chapter" data-level="2.3.5" data-path="section-4.html"><a href="section-4.html#table-"><i class="fa fa-check"></i><b>2.3.5</b> table 태그</a></li>
<li class="chapter" data-level="2.3.6" data-path="section-4.html"><a href="section-4.html#a-src--"><i class="fa fa-check"></i><b>2.3.6</b> a, src 태그와 속성</a></li>
<li class="chapter" data-level="2.3.7" data-path="section-4.html"><a href="section-4.html#div-"><i class="fa fa-check"></i><b>2.3.7</b> div 태그</a></li>
<li class="chapter" data-level="2.3.8" data-path="section-4.html"><a href="section-4.html#css"><i class="fa fa-check"></i><b>2.3.8</b> CSS</a></li>
<li class="chapter" data-level="2.3.9" data-path="section-4.html"><a href="section-4.html#class-id"><i class="fa fa-check"></i><b>2.3.9</b> class와 id</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="section-4.html"><a href="section-4.html#section-8"><i class="fa fa-check"></i><b>2.4</b> 파이프 오퍼레이터 (%&gt;%)</a></li>
<li class="chapter" data-level="2.5" data-path="section-4.html"><a href="section-4.html#section-9"><i class="fa fa-check"></i><b>2.5</b> 오류에 대한 예외처리</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="api-.html"><a href="api-.html"><i class="fa fa-check"></i><b>3</b> API를 이용한 데이터 수집</a><ul>
<li class="chapter" data-level="3.1" data-path="api-.html"><a href="api-.html#api--quandl--"><i class="fa fa-check"></i><b>3.1</b> API를 이용한 Quandl 데이터 다운로드</a></li>
<li class="chapter" data-level="3.2" data-path="api-.html"><a href="api-.html#getsymbols---api-"><i class="fa fa-check"></i><b>3.2</b> <code>getSymbols()</code> 함수를 이용한 API 다운로드</a><ul>
<li class="chapter" data-level="3.2.1" data-path="api-.html"><a href="api-.html#section-10"><i class="fa fa-check"></i><b>3.2.1</b> 주가 다운로드</a></li>
<li class="chapter" data-level="3.2.2" data-path="api-.html"><a href="api-.html#section-11"><i class="fa fa-check"></i><b>3.2.2</b> 국내 종목 주가 다운로드</a></li>
<li class="chapter" data-level="3.2.3" data-path="api-.html"><a href="api-.html#fred--"><i class="fa fa-check"></i><b>3.2.3</b> FRED 데이터 다운로드</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="section-12.html"><a href="section-12.html"><i class="fa fa-check"></i><b>4</b> 크롤링 이해하기</a><ul>
<li class="chapter" data-level="4.1" data-path="section-12.html"><a href="section-12.html#get-post--"><i class="fa fa-check"></i><b>4.1</b> GET과 POST 방식 이해하기</a><ul>
<li class="chapter" data-level="4.1.1" data-path="section-12.html"><a href="section-12.html#get-"><i class="fa fa-check"></i><b>4.1.1</b> GET 방식</a></li>
<li class="chapter" data-level="4.1.2" data-path="section-12.html"><a href="section-12.html#post-"><i class="fa fa-check"></i><b>4.1.2</b> POST 방식</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="section-12.html"><a href="section-12.html#section-13"><i class="fa fa-check"></i><b>4.2</b> 크롤링 예제</a><ul>
<li class="chapter" data-level="4.2.1" data-path="section-12.html"><a href="section-12.html#section-14"><i class="fa fa-check"></i><b>4.2.1</b> 금융 속보 크롤링</a></li>
<li class="chapter" data-level="4.2.2" data-path="section-12.html"><a href="section-12.html#section-15"><i class="fa fa-check"></i><b>4.2.2</b> 기업공시채널에서 오늘의 공시 불러오기</a></li>
<li class="chapter" data-level="4.2.3" data-path="section-12.html"><a href="section-12.html#section-16"><i class="fa fa-check"></i><b>4.2.3</b> 네이버 금융에서 주식티커 크롤링</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="section-17.html"><a href="section-17.html"><i class="fa fa-check"></i><b>5</b> 금융 데이터 수집하기 (기본)</a><ul>
<li class="chapter" data-level="5.1" data-path="section-17.html"><a href="section-17.html#section-18"><i class="fa fa-check"></i><b>5.1</b> 한국거래소의 산업별 현황 및 개별지표 크롤링</a><ul>
<li class="chapter" data-level="5.1.1" data-path="section-17.html"><a href="section-17.html#section-19"><i class="fa fa-check"></i><b>5.1.1</b> 산업별 현황 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="section-17.html"><a href="section-17.html#vdfqrc92ozimrxw4rohjf6mobheme5bcvoqvbvjh8ujas5wduy4aqfbni3lehpftentx2klqrbuzlzbeshrxa6iieqhxduodnhhssqtkvy9eggf60qdu8rqgsqkcydf5vuulwe1iirsygz2nagbaetqgidxasfr4al5ucww5iavvostefookn7vtqklbjh0tewz9dilfmx9ymvvddl9u21b8ngk2loa9qjejzvqdf7yd3bjye5o9kpfeerfnjf2odgueuavqecr89blomqxoacikbdhwts"><i class="fa fa-check"></i><b>5.2</b> [1] “vDfqRc92OziMrxW4rOHJF6moBHeMe5bCVoQvbVjH8ujAS5Wd/Uy4AQFbNi3leHpfTeNtX2klQrbUZLzBeSHrxa6iiEQhxd+UOdnHHSSQTKVY9/e/GgF60qDU8rQGSqkcYdF5vUuLwE1iIRSygZ2NagBaeTqGIdXAsfR4AL5uCW//W5iAVVostEFOOkN7VtQkLbJH0te/Wz9diLfMX9ymVvDdl9u21b/8n/gk2LO/A9qjeJZvqDf7Yd3bJYe5O9K+PFeeRfNJF2odGUeuaVQeCr89bLoMqx/OA/cIKBdHWTs=”</a></li>
<li class="chapter" data-level="5.3" data-path="section-17.html"><a href="section-17.html#a-tibble-2243-x-7"><i class="fa fa-check"></i><b>5.3</b> # A tibble: 2,243 x 7</a></li>
<li class="chapter" data-level="5.4" data-path="section-17.html"><a href="section-17.html#section-20"><i class="fa fa-check"></i><b>5.4</b> 시장구분 종목코드 종목명 산업분류 <code>현재가(종가)</code> 전일대비 <code>시가총액(원)</code></a></li>
<li class="chapter" data-level="5.5" data-path="section-17.html"><a href="section-17.html#section-21"><i class="fa fa-check"></i><b>5.5</b> <chr> <chr> <chr> <chr> <dbl> <dbl> <dbl></a></li>
<li class="chapter" data-level="5.6" data-path="section-17.html"><a href="section-17.html#section-22"><i class="fa fa-check"></i><b>5.6</b> 1 코스피 030720 동원수산~ 어업 8940 -20 41605016700</a></li>
<li class="chapter" data-level="5.7" data-path="section-17.html"><a href="section-17.html#section-23"><i class="fa fa-check"></i><b>5.7</b> 2 코스피 007160 사조산업~ 어업 54400 800 272000000000</a></li>
<li class="chapter" data-level="5.8" data-path="section-17.html"><a href="section-17.html#section-24"><i class="fa fa-check"></i><b>5.8</b> 3 코스피 006040 동원산업~ 어업 246500 500 829028800000</a></li>
<li class="chapter" data-level="5.9" data-path="section-17.html"><a href="section-17.html#section-25"><i class="fa fa-check"></i><b>5.9</b> 4 코스피 004970 신라교역~ 어업 14350 350 229600000000</a></li>
<li class="chapter" data-level="5.10" data-path="section-17.html"><a href="section-17.html#section-26"><i class="fa fa-check"></i><b>5.10</b> 5 코스피 012320 경동인베스~ 광업 40300 1350 95310426900</a></li>
<li class="chapter" data-level="5.11" data-path="section-17.html"><a href="section-17.html#section-27"><i class="fa fa-check"></i><b>5.11</b> 6 코스피 003580 넥스트사이~ 광업 5200 260 122099322800</a></li>
<li class="chapter" data-level="5.12" data-path="section-17.html"><a href="section-17.html#section-28"><i class="fa fa-check"></i><b>5.12</b> 7 코스피 017810 풀무원 음식료품 11300 200 430427735000</a></li>
<li class="chapter" data-level="5.13" data-path="section-17.html"><a href="section-17.html#section-29"><i class="fa fa-check"></i><b>5.13</b> 8 코스피 280360 롯데제과~ 음식료품 159500 -500 1023466361500</a></li>
<li class="chapter" data-level="5.14" data-path="section-17.html"><a href="section-17.html#section-30"><i class="fa fa-check"></i><b>5.14</b> 9 코스피 271560 오리온 음식료품 83300 1400 3293359795600</a></li>
<li class="chapter" data-level="5.15" data-path="section-17.html"><a href="section-17.html#section-31"><i class="fa fa-check"></i><b>5.15</b> 10 코스피 006090 사조오양~ 음식료품 8220 30 77454914580</a></li>
<li class="chapter" data-level="5.16" data-path="section-17.html"><a href="section-17.html#with-2233-more-rows"><i class="fa fa-check"></i><b>5.16</b> # … with 2,233 more rows</a></li>
<li class="chapter" data-level="5.17" data-path="section-17.html"><a href="section-17.html#false"><i class="fa fa-check"></i><b>5.17</b> [1] FALSE</a><ul>
<li class="chapter" data-level="5.17.1" data-path="section-17.html"><a href="section-17.html#section-32"><i class="fa fa-check"></i><b>5.17.1</b> 개별종목 지표 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="5.18" data-path="section-17.html"><a href="section-17.html#a-tibble-2204-x-13"><i class="fa fa-check"></i><b>5.18</b> # A tibble: 2,204 x 13</a></li>
<li class="chapter" data-level="5.19" data-path="section-17.html"><a href="section-17.html#eps-per-bps-pbr"><i class="fa fa-check"></i><b>5.19</b> 일자 종목코드 종목명 관리여부 종가 EPS PER BPS PBR</a></li>
<li class="chapter" data-level="5.20" data-path="section-17.html"><a href="section-17.html#section-33"><i class="fa fa-check"></i><b>5.20</b> <date> <chr> <chr> <chr> <dbl> <chr> <chr> <chr> <chr></a></li>
<li class="chapter" data-level="5.21" data-path="section-17.html"><a href="section-17.html#section-34"><i class="fa fa-check"></i><b>5.21</b> 1 2019-06-07 060300 레드로버~ - 1190 - - 2,128 0.56</a></li>
<li class="chapter" data-level="5.22" data-path="section-17.html"><a href="section-17.html#section-35"><i class="fa fa-check"></i><b>5.22</b> 2 2019-06-07 290650 엘앤씨바이~ - 22750 830 27.41 7,252 3.14</a></li>
<li class="chapter" data-level="5.23" data-path="section-17.html"><a href="section-17.html#section-36"><i class="fa fa-check"></i><b>5.23</b> 3 2019-06-07 239340 미래에셋제~ - 5200 - - - -</a></li>
<li class="chapter" data-level="5.24" data-path="section-17.html"><a href="section-17.html#section-37"><i class="fa fa-check"></i><b>5.24</b> 4 2019-06-07 086060 진바이오텍~ - 6940 312 22.24 5,570 1.25</a></li>
<li class="chapter" data-level="5.25" data-path="section-17.html"><a href="section-17.html#section-38"><i class="fa fa-check"></i><b>5.25</b> 5 2019-06-07 033430 디에스티~ - 1310 - - 338 3.88</a></li>
<li class="chapter" data-level="5.26" data-path="section-17.html"><a href="section-17.html#section-39"><i class="fa fa-check"></i><b>5.26</b> 6 2019-06-07 038680 에스넷 - 9600 300 32 4,302 2.23</a></li>
<li class="chapter" data-level="5.27" data-path="section-17.html"><a href="section-17.html#section-40"><i class="fa fa-check"></i><b>5.27</b> 7 2019-06-07 214680 디알텍 - 2005 29 69.14 709 2.83</a></li>
<li class="chapter" data-level="5.28" data-path="section-17.html"><a href="section-17.html#section-41"><i class="fa fa-check"></i><b>5.28</b> 8 2019-06-07 242040 나무기술~ - 3345 - - 462 7.24</a></li>
<li class="chapter" data-level="5.29" data-path="section-17.html"><a href="section-17.html#section-42"><i class="fa fa-check"></i><b>5.29</b> 9 2019-06-07 121890 에스디시스~ - 4980 - - 1,912 2.6</a></li>
<li class="chapter" data-level="5.30" data-path="section-17.html"><a href="section-17.html#section-43"><i class="fa fa-check"></i><b>5.30</b> 10 2019-06-07 088800 에이스테크~ - 11500 97 118.~ 2,291 5.02</a></li>
<li class="chapter" data-level="5.31" data-path="section-17.html"><a href="section-17.html#with-2194-more-rows-and-4-more-variables-"><i class="fa fa-check"></i><b>5.31</b> # … with 2,194 more rows, and 4 more variables: 주당배당금 <dbl>,</a></li>
<li class="chapter" data-level="5.32" data-path="section-17.html"><a href="section-17.html#section-44"><i class="fa fa-check"></i><b>5.32</b> # 배당수익률 <dbl>, <code>게시물 일련번호</code> <dbl>, 총카운트 <dbl></a><ul>
<li class="chapter" data-level="5.32.1" data-path="section-17.html"><a href="section-17.html#section-45"><i class="fa fa-check"></i><b>5.32.1</b> 데이터 정리하기</a></li>
</ul></li>
<li class="chapter" data-level="5.33" data-path="section-17.html"><a href="section-17.html#section-46"><i class="fa fa-check"></i><b>5.33</b> [1] “종목코드” “종목명”</a></li>
<li class="chapter" data-level="5.34" data-path="section-17.html"><a href="section-17.html#ankor"><i class="fa fa-check"></i><b>5.34</b> [1] “엘브이엠씨홀딩스” “한국패러랠” “한국ANKOR유전”</a></li>
<li class="chapter" data-level="5.35" data-path="section-17.html"><a href="section-17.html#section-47"><i class="fa fa-check"></i><b>5.35</b> [4] “맵스리얼티1” “맥쿼리인프라” “하나니켈2호”</a></li>
<li class="chapter" data-level="5.36" data-path="section-17.html"><a href="section-17.html#section-48"><i class="fa fa-check"></i><b>5.36</b> [7] “하나니켈1호” “베트남개발1” “신한알파리츠”</a></li>
<li class="chapter" data-level="5.37" data-path="section-17.html"><a href="section-17.html#section-49"><i class="fa fa-check"></i><b>5.37</b> [10] “이리츠코크렙” “모두투어리츠” “하이골드12호”</a></li>
<li class="chapter" data-level="5.38" data-path="section-17.html"><a href="section-17.html#section-50"><i class="fa fa-check"></i><b>5.38</b> [13] “하이골드8호” “바다로19호” “하이골드3호”</a></li>
<li class="chapter" data-level="5.39" data-path="section-17.html"><a href="section-17.html#section-51"><i class="fa fa-check"></i><b>5.39</b> [16] “케이탑리츠” “에이리츠” “동북아13호”</a></li>
<li class="chapter" data-level="5.40" data-path="section-17.html"><a href="section-17.html#jtc"><i class="fa fa-check"></i><b>5.40</b> [19] “동북아12호” “컬러레이” “JTC”</a></li>
<li class="chapter" data-level="5.41" data-path="section-17.html"><a href="section-17.html#section-52"><i class="fa fa-check"></i><b>5.41</b> [22] “뉴프라이드” “윙입푸드” “글로벌에스엠”</a></li>
<li class="chapter" data-level="5.42" data-path="section-17.html"><a href="section-17.html#section-53"><i class="fa fa-check"></i><b>5.42</b> [25] “크리스탈신소재” “씨케이에이치” “차이나그레이트”</a></li>
<li class="chapter" data-level="5.43" data-path="section-17.html"><a href="section-17.html#grt"><i class="fa fa-check"></i><b>5.43</b> [28] “골든센츄리” “오가닉티코스메틱” “GRT”</a></li>
<li class="chapter" data-level="5.44" data-path="section-17.html"><a href="section-17.html#section-54"><i class="fa fa-check"></i><b>5.44</b> [31] “로스웰” “헝셩그룹” “이스트아시아홀딩스”</a></li>
<li class="chapter" data-level="5.45" data-path="section-17.html"><a href="section-17.html#snk-sbi"><i class="fa fa-check"></i><b>5.45</b> [34] “에스앤씨엔진그룹” “SNK” “SBI핀테크솔루션즈”</a></li>
<li class="chapter" data-level="5.46" data-path="section-17.html"><a href="section-17.html#section-55"><i class="fa fa-check"></i><b>5.46</b> [37] “잉글우드랩” “코오롱티슈진” “엑세스바이오”</a></li>
<li class="chapter" data-level="5.47" data-path="section-17.html"><a href="section-17.html#section-56"><i class="fa fa-check"></i><b>5.47</b> 종목코드 종목명 시장구분 산업분류 현재가.종가. 전일대비</a></li>
<li class="chapter" data-level="5.48" data-path="section-17.html"><a href="section-17.html#section-57"><i class="fa fa-check"></i><b>5.48</b> 330 005930 삼성전자 코스피 전기전자 44200 300</a></li>
<li class="chapter" data-level="5.49" data-path="section-17.html"><a href="section-17.html#sk---65400-300"><i class="fa fa-check"></i><b>5.49</b> 45 000660 SK하이닉스 코스피 전기전자 65400 300</a></li>
<li class="chapter" data-level="5.50" data-path="section-17.html"><a href="section-17.html#section-58"><i class="fa fa-check"></i><b>5.50</b> 301 005380 현대차 코스피 운수장비 140000 -1000</a></li>
<li class="chapter" data-level="5.51" data-path="section-17.html"><a href="section-17.html#section-59"><i class="fa fa-check"></i><b>5.51</b> 331 005935 삼성전자우 코스피 전기전자 36250 200</a></li>
<li class="chapter" data-level="5.52" data-path="section-17.html"><a href="section-17.html#section-60"><i class="fa fa-check"></i><b>5.52</b> 1278 068270 셀트리온 코스피 의약품 196500 500</a></li>
<li class="chapter" data-level="5.53" data-path="section-17.html"><a href="section-17.html#lg---330500--1000"><i class="fa fa-check"></i><b>5.53</b> 1082 051910 LG화학 코스피 화학 330500 -1000</a></li>
<li class="chapter" data-level="5.54" data-path="section-17.html"><a href="section-17.html#eps-per-bps-pbr-1"><i class="fa fa-check"></i><b>5.54</b> 시가총액.원. 일자 관리여부 종가 EPS PER BPS PBR</a></li>
<li class="chapter" data-level="5.55" data-path="section-17.html"><a href="section-17.html#e14-2019-06-07---44200-6461-6.84-35342-1.25"><i class="fa fa-check"></i><b>5.55</b> 330 2.638644e+14 2019-06-07 - 44200 6,461 6.84 35,342 1.25</a></li>
<li class="chapter" data-level="5.56" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---65400-22255-2.94-64348-1.02"><i class="fa fa-check"></i><b>5.56</b> 45 4.761135e+13 2019-06-07 - 65400 22,255 2.94 64,348 1.02</a></li>
<li class="chapter" data-level="5.57" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---140000-5632-24.86-245447-0.57"><i class="fa fa-check"></i><b>5.57</b> 301 2.991355e+13 2019-06-07 - 140000 5,632 24.86 245,447 0.57</a></li>
<li class="chapter" data-level="5.58" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---36250--------"><i class="fa fa-check"></i><b>5.58</b> 331 2.982964e+13 2019-06-07 - 36250 - - - -</a></li>
<li class="chapter" data-level="5.59" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---196500-2063-95.25-19766-9.94"><i class="fa fa-check"></i><b>5.59</b> 1278 2.521666e+13 2019-06-07 - 196500 2,063 95.25 19,766 9.94</a></li>
<li class="chapter" data-level="5.60" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---330500-19217-17.2-218227-1.51"><i class="fa fa-check"></i><b>5.60</b> 1082 2.333077e+13 2019-06-07 - 330500 19,217 17.2 218,227 1.51</a></li>
<li class="chapter" data-level="5.61" data-path="section-17.html"><a href="section-17.html#section-61"><i class="fa fa-check"></i><b>5.61</b> 주당배당금 배당수익률 게시물..일련번호 총카운트</a></li>
<li class="chapter" data-level="5.62" data-path="section-17.html"><a href="section-17.html#na"><i class="fa fa-check"></i><b>5.62</b> 330 1416 3.20 1456 NA</a></li>
<li class="chapter" data-level="5.63" data-path="section-17.html"><a href="section-17.html#na-1"><i class="fa fa-check"></i><b>5.63</b> 45 1500 2.29 1408 NA</a></li>
<li class="chapter" data-level="5.64" data-path="section-17.html"><a href="section-17.html#na-2"><i class="fa fa-check"></i><b>5.64</b> 301 4000 2.86 1450 NA</a></li>
<li class="chapter" data-level="5.65" data-path="section-17.html"><a href="section-17.html#na-3"><i class="fa fa-check"></i><b>5.65</b> 331 1417 3.91 2087 NA</a></li>
<li class="chapter" data-level="5.66" data-path="section-17.html"><a href="section-17.html#na-4"><i class="fa fa-check"></i><b>5.66</b> 1278 0 0.00 1595 NA</a></li>
<li class="chapter" data-level="5.67" data-path="section-17.html"><a href="section-17.html#na-5"><i class="fa fa-check"></i><b>5.67</b> 1082 6000 1.82 1536 NA</a></li>
<li class="chapter" data-level="5.68" data-path="section-17.html"><a href="section-17.html#section-62"><i class="fa fa-check"></i><b>5.68</b> [1] “미래에셋제5호스팩” “한화에스비아이스팩” “엔에이치스팩14호”</a></li>
<li class="chapter" data-level="5.69" data-path="section-17.html"><a href="section-17.html#section-63"><i class="fa fa-check"></i><b>5.69</b> [4] “엔에이치스팩10호” “엔에이치스팩12호” “삼성스팩2호”</a></li>
<li class="chapter" data-level="5.70" data-path="section-17.html"><a href="section-17.html#section-64"><i class="fa fa-check"></i><b>5.70</b> [7] “대신밸런스제5호스팩” “케이비제10호스팩” “엔에이치스팩11호”</a></li>
<li class="chapter" data-level="5.71" data-path="section-17.html"><a href="section-17.html#section-65"><i class="fa fa-check"></i><b>5.71</b> [10] “유진스팩4호” “신한제4호스팩” “하나금융11호스팩”</a></li>
<li class="chapter" data-level="5.72" data-path="section-17.html"><a href="section-17.html#db7-sk4"><i class="fa fa-check"></i><b>5.72</b> [13] “케이비17호스팩” “DB금융스팩7호” “SK4호스팩”</a></li>
<li class="chapter" data-level="5.73" data-path="section-17.html"><a href="section-17.html#section-66"><i class="fa fa-check"></i><b>5.73</b> [16] “한국제7호스팩” “대신밸런스제6호스팩” “미래에셋대우스팩1호”</a></li>
<li class="chapter" data-level="5.74" data-path="section-17.html"><a href="section-17.html#ibks5-5"><i class="fa fa-check"></i><b>5.74</b> [19] “대신밸런스제4호스팩” “IBKS제5호스팩” “동부스팩5호”</a></li>
<li class="chapter" data-level="5.75" data-path="section-17.html"><a href="section-17.html#db6-6-10"><i class="fa fa-check"></i><b>5.75</b> [22] “DB금융스팩6호” “하나머스트제6호스팩” “하나금융10호스팩”</a></li>
<li class="chapter" data-level="5.76" data-path="section-17.html"><a href="section-17.html#section-67"><i class="fa fa-check"></i><b>5.76</b> [25] “삼성머스트스팩3호” “유안타제4호스팩” “한국제6호스팩”</a></li>
<li class="chapter" data-level="5.77" data-path="section-17.html"><a href="section-17.html#ibks6-4-"><i class="fa fa-check"></i><b>5.77</b> [28] “IBKS제6호스팩” “신영스팩4호” “한화수성스팩”</a></li>
<li class="chapter" data-level="5.78" data-path="section-17.html"><a href="section-17.html#ibks10-4-9"><i class="fa fa-check"></i><b>5.78</b> [31] “IBKS제10호스팩” “하이제4호스팩” “하나금융9호스팩”</a></li>
<li class="chapter" data-level="5.79" data-path="section-17.html"><a href="section-17.html#section-68"><i class="fa fa-check"></i><b>5.79</b> [34] “유안타제3호스팩” “교보7호스팩” “한국제5호스팩”</a></li>
<li class="chapter" data-level="5.80" data-path="section-17.html"><a href="section-17.html#ibks9-8-ibks7"><i class="fa fa-check"></i><b>5.80</b> [37] “IBKS제9호스팩” “교보8호스팩” “IBKS제7호스팩”</a></li>
<li class="chapter" data-level="5.81" data-path="section-17.html"><a href="section-17.html#sk3"><i class="fa fa-check"></i><b>5.81</b> [40] “신한제3호스팩” “키움제5호스팩” “SK3호스팩”</a></li>
<li class="chapter" data-level="5.82" data-path="section-17.html"><a href="section-17.html#section-69"><i class="fa fa-check"></i><b>5.82</b> [43] “한국제8호스팩” “한화에이스스팩4호” “엔에이치스팩13호”</a></li>
<li class="chapter" data-level="5.83" data-path="section-17.html"><a href="section-17.html#section-70"><i class="fa fa-check"></i><b>5.83</b> [46] “미래에셋대우스팩2호” “한화에이스스팩3호” “케이비제11호스팩”</a></li>
<li class="chapter" data-level="5.84" data-path="section-17.html"><a href="section-17.html#section-71"><i class="fa fa-check"></i><b>5.84</b> [1] “골든브릿지이안5호”</a></li>
<li class="chapter" data-level="5.85" data-path="section-17.html"><a href="section-17.html#section-72"><i class="fa fa-check"></i><b>5.85</b> [1] “삼성전자우” “미래에셋대우” “현대차우”</a></li>
<li class="chapter" data-level="5.86" data-path="section-17.html"><a href="section-17.html#lg-lg-"><i class="fa fa-check"></i><b>5.86</b> [4] “LG생활건강우” “LG화학우” “아모레퍼시픽우”</a></li>
<li class="chapter" data-level="5.87" data-path="section-17.html"><a href="section-17.html#lg-"><i class="fa fa-check"></i><b>5.87</b> [7] “삼성화재우” “LG전자우” “신영증권우”</a></li>
<li class="chapter" data-level="5.88" data-path="section-17.html"><a href="section-17.html#section-73"><i class="fa fa-check"></i><b>5.88</b> [10] “연우” “두산우” “한국금융지주우”</a></li>
<li class="chapter" data-level="5.89" data-path="section-17.html"><a href="section-17.html#s-oil-"><i class="fa fa-check"></i><b>5.89</b> [13] “대신증권우” “S-Oil우” “대림산업우”</a></li>
<li class="chapter" data-level="5.90" data-path="section-17.html"><a href="section-17.html#nh-g-cj-"><i class="fa fa-check"></i><b>5.90</b> [16] “NH투자증권우” “아모레G우” “CJ제일제당 우”</a></li>
<li class="chapter" data-level="5.91" data-path="section-17.html"><a href="section-17.html#lg-sk-sdi"><i class="fa fa-check"></i><b>5.91</b> [19] “LG우” “SK이노베이션우” “삼성SDI우”</a></li>
<li class="chapter" data-level="5.92" data-path="section-17.html"><a href="section-17.html#cj-"><i class="fa fa-check"></i><b>5.92</b> [22] “삼성전기우” “CJ우” “금호석유우”</a></li>
<li class="chapter" data-level="5.93" data-path="section-17.html"><a href="section-17.html#sk-gs-"><i class="fa fa-check"></i><b>5.93</b> [25] “SK우” “GS우” “미래에셋대우우”</a></li>
<li class="chapter" data-level="5.94" data-path="section-17.html"><a href="section-17.html#section-74"><i class="fa fa-check"></i><b>5.94</b> [28] “롯데칠성우” “부국증권우” “코오롱인더우”</a></li>
<li class="chapter" data-level="5.95" data-path="section-17.html"><a href="section-17.html#section-75"><i class="fa fa-check"></i><b>5.95</b> [31] “롯데지주우” “유한양행우” “유화증권우”</a></li>
<li class="chapter" data-level="5.96" data-path="section-17.html"><a href="section-17.html#sk-"><i class="fa fa-check"></i><b>5.96</b> [34] “호텔신라우” “SK케미칼우” “남양유업우”</a></li>
<li class="chapter" data-level="5.97" data-path="section-17.html"><a href="section-17.html#lg-byc"><i class="fa fa-check"></i><b>5.97</b> [37] “한진칼우” “LG하우시스우” “BYC우”</a></li>
<li class="chapter" data-level="5.98" data-path="section-17.html"><a href="section-17.html#section-76"><i class="fa fa-check"></i><b>5.98</b> [40] “유안타증권우” “대한항공우” “세방우”</a></li>
<li class="chapter" data-level="5.99" data-path="section-17.html"><a href="section-17.html#sk-1-"><i class="fa fa-check"></i><b>5.99</b> [43] “SK디스커버리우” “대덕전자1우” “태영건설우”</a></li>
<li class="chapter" data-level="5.100" data-path="section-17.html"><a href="section-17.html#section-77"><i class="fa fa-check"></i><b>5.100</b> [46] “대상우” “금호산업우” “한화우”</a></li>
<li class="chapter" data-level="5.101" data-path="section-17.html"><a href="section-17.html#section-78"><i class="fa fa-check"></i><b>5.101</b> [49] “현대건설우” “한화케미칼우” “삼양홀딩스우”</a></li>
<li class="chapter" data-level="5.102" data-path="section-17.html"><a href="section-17.html#section-79"><i class="fa fa-check"></i><b>5.102</b> [52] “녹십자홀딩스2우” “신풍제약우” “삼양사우”</a></li>
<li class="chapter" data-level="5.103" data-path="section-17.html"><a href="section-17.html#sk--1"><i class="fa fa-check"></i><b>5.103</b> [55] “넥센우” “SK증권우” “남선알미우”</a></li>
<li class="chapter" data-level="5.104" data-path="section-17.html"><a href="section-17.html#npc"><i class="fa fa-check"></i><b>5.104</b> [58] “코오롱우” “계양전기우” “NPC우”</a></li>
<li class="chapter" data-level="5.105" data-path="section-17.html"><a href="section-17.html#sk--2"><i class="fa fa-check"></i><b>5.105</b> [61] “한화투자증권우” “SK네트웍스우” “태양금속우”</a></li>
<li class="chapter" data-level="5.106" data-path="section-17.html"><a href="section-17.html#section-80"><i class="fa fa-check"></i><b>5.106</b> [64] “쌍용양회우” “서울식품우” “성문전자우”</a></li>
<li class="chapter" data-level="5.107" data-path="section-17.html"><a href="section-17.html#section-81"><i class="fa fa-check"></i><b>5.107</b> [67] “대원전선우” “일양약품우” “성신양회우”</a></li>
<li class="chapter" data-level="5.108" data-path="section-17.html"><a href="section-17.html#section-82"><i class="fa fa-check"></i><b>5.108</b> [70] “대한제당우” “유유제약1우” “코리아써우”</a></li>
<li class="chapter" data-level="5.109" data-path="section-17.html"><a href="section-17.html#cj1"><i class="fa fa-check"></i><b>5.109</b> [73] “크라운해태홀딩스우” “동원시스템즈우” “CJ씨푸드1우”</a></li>
<li class="chapter" data-level="5.110" data-path="section-17.html"><a href="section-17.html#section-83"><i class="fa fa-check"></i><b>5.110</b> [76] “현대비앤지스틸우” “삼성중공우” “금강공업우”</a></li>
<li class="chapter" data-level="5.111" data-path="section-17.html"><a href="section-17.html#section-84"><i class="fa fa-check"></i><b>5.111</b> [79] “대호피앤씨우” “크라운제과우” “동부제철우”</a></li>
<li class="chapter" data-level="5.112" data-path="section-17.html"><a href="section-17.html#section-85"><i class="fa fa-check"></i><b>5.112</b> [82] “깨끗한나라우” “노루페인트우” “대상홀딩스우”</a></li>
<li class="chapter" data-level="5.113" data-path="section-17.html"><a href="section-17.html#section-86"><i class="fa fa-check"></i><b>5.113</b> [85] “덕성우” “코오롱글로벌우” “동양우”</a></li>
<li class="chapter" data-level="5.114" data-path="section-17.html"><a href="section-17.html#db1-"><i class="fa fa-check"></i><b>5.114</b> [88] “신원우” “DB하이텍1우” “하이트진로홀딩스우”</a></li>
<li class="chapter" data-level="5.115" data-path="section-17.html"><a href="section-17.html#jw-"><i class="fa fa-check"></i><b>5.115</b> [91] “흥국화재우” “JW중외제약우” “한양증권우”</a></li>
<li class="chapter" data-level="5.116" data-path="section-17.html"><a href="section-17.html#section-87"><i class="fa fa-check"></i><b>5.116</b> [94] “동부건설우” “노루홀딩스우” “소프트센우”</a></li>
<li class="chapter" data-level="5.117" data-path="section-17.html"><a href="section-17.html#b-2b-3b"><i class="fa fa-check"></i><b>5.117</b> [1] “현대차2우B” “미래에셋대우2우B” “한화3우B”</a></li>
<li class="chapter" data-level="5.118" data-path="section-17.html"><a href="section-17.html#b-b-b"><i class="fa fa-check"></i><b>5.118</b> [4] “현대차3우B” “삼성물산우B” “대교우B”</a></li>
<li class="chapter" data-level="5.119" data-path="section-17.html"><a href="section-17.html#b-2b-1b"><i class="fa fa-check"></i><b>5.119</b> [7] “대신증권2우B” “두산2우B” “넥센타이어1우B”</a></li>
<li class="chapter" data-level="5.120" data-path="section-17.html"><a href="section-17.html#b-2b-b"><i class="fa fa-check"></i><b>5.120</b> [10] “하이트진로2우B” “진흥기업2우B” “진흥기업우B”</a></li>
<li class="chapter" data-level="5.121" data-path="section-17.html"><a href="section-17.html#jw2b-2b-2b"><i class="fa fa-check"></i><b>5.121</b> [13] “JW중외제약2우B” “흥국화재2우B” “코리아써키트2우B”</a></li>
<li class="chapter" data-level="5.122" data-path="section-17.html"><a href="section-17.html#b-2b-3b-1"><i class="fa fa-check"></i><b>5.122</b> [16] “유유제약2우B” “동양2우B” “대한제당3우B”</a></li>
<li class="chapter" data-level="5.123" data-path="section-17.html"><a href="section-17.html#b"><i class="fa fa-check"></i><b>5.123</b> [19] “동양3우B”</a></li>
<li class="chapter" data-level="5.124" data-path="section-17.html"><a href="section-17.html#c"><i class="fa fa-check"></i><b>5.124</b> [1] “루트로닉3우C”</a></li>
<li class="chapter" data-level="5.125" data-path="section-17.html"><a href="section-17.html#wics---"><i class="fa fa-check"></i><b>5.125</b> WICS 기준 섹터정보 크롤링</a></li>
<li class="chapter" data-level="5.126" data-path="section-17.html"><a href="section-17.html#info"><i class="fa fa-check"></i><b>5.126</b> $info</a></li>
<li class="chapter" data-level="5.127" data-path="section-17.html"><a href="section-17.html#infotrd_dt"><i class="fa fa-check"></i><b>5.127</b> <span class="math inline">\(info\)</span>TRD_DT</a></li>
<li class="chapter" data-level="5.128" data-path="section-17.html"><a href="section-17.html#date1559833200000"><i class="fa fa-check"></i><b>5.128</b> [1] “/Date(1559833200000)/”</a></li>
<li class="chapter" data-level="5.129" data-path="section-17.html"><a href="section-17.html#section-88"><i class="fa fa-check"></i><b>5.129</b> </a></li>
<li class="chapter" data-level="5.130" data-path="section-17.html"><a href="section-17.html#infomkt_val"><i class="fa fa-check"></i><b>5.130</b> <span class="math inline">\(info\)</span>MKT_VAL</a></li>
<li class="chapter" data-level="5.131" data-path="section-17.html"><a href="section-17.html#section-89"><i class="fa fa-check"></i><b>5.131</b> [1] 19850082</a></li>
<li class="chapter" data-level="5.132" data-path="section-17.html"><a href="section-17.html#section-90"><i class="fa fa-check"></i><b>5.132</b> </a></li>
<li class="chapter" data-level="5.133" data-path="section-17.html"><a href="section-17.html#infotrd_amt"><i class="fa fa-check"></i><b>5.133</b> <span class="math inline">\(info\)</span>TRD_AMT</a></li>
<li class="chapter" data-level="5.134" data-path="section-17.html"><a href="section-17.html#section-91"><i class="fa fa-check"></i><b>5.134</b> [1] 70030</a></li>
<li class="chapter" data-level="5.135" data-path="section-17.html"><a href="section-17.html#section-92"><i class="fa fa-check"></i><b>5.135</b> </a></li>
<li class="chapter" data-level="5.136" data-path="section-17.html"><a href="section-17.html#infocnt"><i class="fa fa-check"></i><b>5.136</b> <span class="math inline">\(info\)</span>CNT</a></li>
<li class="chapter" data-level="5.137" data-path="section-17.html"><a href="section-17.html#section-93"><i class="fa fa-check"></i><b>5.137</b> [1] 23</a></li>
<li class="chapter" data-level="5.138" data-path="section-17.html"><a href="section-17.html#section-94"><i class="fa fa-check"></i><b>5.138</b> </a></li>
<li class="chapter" data-level="5.139" data-path="section-17.html"><a href="section-17.html#section-95"><i class="fa fa-check"></i><b>5.139</b> </a></li>
<li class="chapter" data-level="5.140" data-path="section-17.html"><a href="section-17.html#list"><i class="fa fa-check"></i><b>5.140</b> $list</a></li>
<li class="chapter" data-level="5.141" data-path="section-17.html"><a href="section-17.html#idx_cd-idx_nm_kor-all_mkt_val-cmp_cd-cmp_kor-mkt_val-wgt"><i class="fa fa-check"></i><b>5.141</b> IDX_CD IDX_NM_KOR ALL_MKT_VAL CMP_CD CMP_KOR MKT_VAL WGT</a></li>
<li class="chapter" data-level="5.142" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-096770-sk-9052841-45.61"><i class="fa fa-check"></i><b>5.142</b> 1 G10 WICS 에너지 19850082 096770 SK이노베이션 9052841 45.61</a></li>
<li class="chapter" data-level="5.143" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-010950-s-oil-3403265-17.14"><i class="fa fa-check"></i><b>5.143</b> 2 G10 WICS 에너지 19850082 010950 S-Oil 3403265 17.14</a></li>
<li class="chapter" data-level="5.144" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-267250--2873204-14.47"><i class="fa fa-check"></i><b>5.144</b> 3 G10 WICS 에너지 19850082 267250 현대중공업지주 2873204 14.47</a></li>
<li class="chapter" data-level="5.145" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-078930-gs-2491805-12.55"><i class="fa fa-check"></i><b>5.145</b> 4 G10 WICS 에너지 19850082 078930 GS 2491805 12.55</a></li>
<li class="chapter" data-level="5.146" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-067630--624986-3.15"><i class="fa fa-check"></i><b>5.146</b> 5 G10 WICS 에너지 19850082 067630 에이치엘비생명과학 624986 3.15</a></li>
<li class="chapter" data-level="5.147" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-006120-sk-257059-1.30"><i class="fa fa-check"></i><b>5.147</b> 6 G10 WICS 에너지 19850082 006120 SK디스커버리 257059 1.30</a></li>
<li class="chapter" data-level="5.148" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-002960--198881-1.00"><i class="fa fa-check"></i><b>5.148</b> 7 G10 WICS 에너지 19850082 002960 한국쉘석유 198881 1.00</a></li>
<li class="chapter" data-level="5.149" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-091090--146439-0.74"><i class="fa fa-check"></i><b>5.149</b> 8 G10 WICS 에너지 19850082 091090 세원셀론텍 146439 0.74</a></li>
<li class="chapter" data-level="5.150" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-011930--118388-0.60"><i class="fa fa-check"></i><b>5.150</b> 9 G10 WICS 에너지 19850082 011930 신성이엔지 118388 0.60</a></li>
<li class="chapter" data-level="5.151" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-128820--79162-0.40"><i class="fa fa-check"></i><b>5.151</b> 10 G10 WICS 에너지 19850082 128820 대성산업 79162 0.40</a></li>
<li class="chapter" data-level="5.152" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-043200--75903-0.38"><i class="fa fa-check"></i><b>5.152</b> 11 G10 WICS 에너지 19850082 043200 파루 75903 0.38</a></li>
<li class="chapter" data-level="5.153" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-003650--71918-0.36"><i class="fa fa-check"></i><b>5.153</b> 12 G10 WICS 에너지 19850082 003650 미창석유 71918 0.36</a></li>
<li class="chapter" data-level="5.154" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-014530--62828-0.32"><i class="fa fa-check"></i><b>5.154</b> 13 G10 WICS 에너지 19850082 014530 극동유화 62828 0.32</a></li>
<li class="chapter" data-level="5.155" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-099220-sdn-55967-0.28"><i class="fa fa-check"></i><b>5.155</b> 14 G10 WICS 에너지 19850082 099220 SDN 55967 0.28</a></li>
<li class="chapter" data-level="5.156" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-024060--53460-0.27"><i class="fa fa-check"></i><b>5.156</b> 15 G10 WICS 에너지 19850082 024060 흥구석유 53460 0.27</a></li>
<li class="chapter" data-level="5.157" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-041590--50901-0.26"><i class="fa fa-check"></i><b>5.157</b> 16 G10 WICS 에너지 19850082 041590 에너전트 50901 0.26</a></li>
<li class="chapter" data-level="5.158" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-095910--46873-0.24"><i class="fa fa-check"></i><b>5.158</b> 17 G10 WICS 에너지 19850082 095910 에스에너지 46873 0.24</a></li>
<li class="chapter" data-level="5.159" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-060900--43739-0.22"><i class="fa fa-check"></i><b>5.159</b> 18 G10 WICS 에너지 19850082 060900 퍼시픽바이오 43739 0.22</a></li>
<li class="chapter" data-level="5.160" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-012320--40030-0.20"><i class="fa fa-check"></i><b>5.160</b> 19 G10 WICS 에너지 19850082 012320 경동인베스트 40030 0.20</a></li>
<li class="chapter" data-level="5.161" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-093230--32266-0.16"><i class="fa fa-check"></i><b>5.161</b> 20 G10 WICS 에너지 19850082 093230 이아이디 32266 0.16</a></li>
<li class="chapter" data-level="5.162" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-038620--30094-0.15"><i class="fa fa-check"></i><b>5.162</b> 21 G10 WICS 에너지 19850082 038620 위즈코프 30094 0.15</a></li>
<li class="chapter" data-level="5.163" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-137950--29363-0.15"><i class="fa fa-check"></i><b>5.163</b> 22 G10 WICS 에너지 19850082 137950 제이씨케미칼 29363 0.15</a></li>
<li class="chapter" data-level="5.164" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-000440--10711-0.05"><i class="fa fa-check"></i><b>5.164</b> 23 G10 WICS 에너지 19850082 000440 중앙에너비스 10711 0.05</a></li>
<li class="chapter" data-level="5.165" data-path="section-17.html"><a href="section-17.html#s_wgt-cal_wgt-sec_cd-sec_nm_kor-seq-top60-apt_shr_cnt"><i class="fa fa-check"></i><b>5.165</b> S_WGT CAL_WGT SEC_CD SEC_NM_KOR SEQ TOP60 APT_SHR_CNT</a></li>
<li class="chapter" data-level="5.166" data-path="section-17.html"><a href="section-17.html#g10--1-2-56403994"><i class="fa fa-check"></i><b>5.166</b> 1 45.61 1 G10 에너지 1 2 56403994</a></li>
<li class="chapter" data-level="5.167" data-path="section-17.html"><a href="section-17.html#g10--2-2-41655633"><i class="fa fa-check"></i><b>5.167</b> 2 62.75 1 G10 에너지 2 2 41655633</a></li>
<li class="chapter" data-level="5.168" data-path="section-17.html"><a href="section-17.html#g10--3-2-9283372"><i class="fa fa-check"></i><b>5.168</b> 3 77.23 1 G10 에너지 3 2 9283372</a></li>
<li class="chapter" data-level="5.169" data-path="section-17.html"><a href="section-17.html#g10--4-2-49245150"><i class="fa fa-check"></i><b>5.169</b> 4 89.78 1 G10 에너지 4 2 49245150</a></li>
<li class="chapter" data-level="5.170" data-path="section-17.html"><a href="section-17.html#g10--5-2-39307272"><i class="fa fa-check"></i><b>5.170</b> 5 92.93 1 G10 에너지 5 2 39307272</a></li>
<li class="chapter" data-level="5.171" data-path="section-17.html"><a href="section-17.html#g10--6-2-10470820"><i class="fa fa-check"></i><b>5.171</b> 6 94.22 1 G10 에너지 6 2 10470820</a></li>
<li class="chapter" data-level="5.172" data-path="section-17.html"><a href="section-17.html#g10--7-2-611000"><i class="fa fa-check"></i><b>5.172</b> 7 95.22 1 G10 에너지 7 2 611000</a></li>
<li class="chapter" data-level="5.173" data-path="section-17.html"><a href="section-17.html#g10--8-2-42693554"><i class="fa fa-check"></i><b>5.173</b> 8 95.96 1 G10 에너지 8 2 42693554</a></li>
<li class="chapter" data-level="5.174" data-path="section-17.html"><a href="section-17.html#g10--9-2-100756131"><i class="fa fa-check"></i><b>5.174</b> 9 96.56 1 G10 에너지 9 2 100756131</a></li>
<li class="chapter" data-level="5.175" data-path="section-17.html"><a href="section-17.html#g10--10-2-15832417"><i class="fa fa-check"></i><b>5.175</b> 10 96.96 1 G10 에너지 10 2 15832417</a></li>
<li class="chapter" data-level="5.176" data-path="section-17.html"><a href="section-17.html#g10--11-2-29707590"><i class="fa fa-check"></i><b>5.176</b> 11 97.34 1 G10 에너지 11 2 29707590</a></li>
<li class="chapter" data-level="5.177" data-path="section-17.html"><a href="section-17.html#g10--12-2-922026"><i class="fa fa-check"></i><b>5.177</b> 12 97.70 1 G10 에너지 12 2 922026</a></li>
<li class="chapter" data-level="5.178" data-path="section-17.html"><a href="section-17.html#g10--13-2-18132098"><i class="fa fa-check"></i><b>5.178</b> 13 98.02 1 G10 에너지 13 2 18132098</a></li>
<li class="chapter" data-level="5.179" data-path="section-17.html"><a href="section-17.html#g10--14-2-38598075"><i class="fa fa-check"></i><b>5.179</b> 14 98.30 1 G10 에너지 14 2 38598075</a></li>
<li class="chapter" data-level="5.180" data-path="section-17.html"><a href="section-17.html#g10--15-2-9000000"><i class="fa fa-check"></i><b>5.180</b> 15 98.57 1 G10 에너지 15 2 9000000</a></li>
<li class="chapter" data-level="5.181" data-path="section-17.html"><a href="section-17.html#g10--16-2-31132353"><i class="fa fa-check"></i><b>5.181</b> 16 98.83 1 G10 에너지 16 2 31132353</a></li>
<li class="chapter" data-level="5.182" data-path="section-17.html"><a href="section-17.html#g10--17-2-10290527"><i class="fa fa-check"></i><b>5.182</b> 17 99.06 1 G10 에너지 17 2 10290527</a></li>
<li class="chapter" data-level="5.183" data-path="section-17.html"><a href="section-17.html#g10--18-2-53017111"><i class="fa fa-check"></i><b>5.183</b> 18 99.28 1 G10 에너지 18 2 53017111</a></li>
<li class="chapter" data-level="5.184" data-path="section-17.html"><a href="section-17.html#g10--19-2-993310"><i class="fa fa-check"></i><b>5.184</b> 19 99.48 1 G10 에너지 19 2 993310</a></li>
<li class="chapter" data-level="5.185" data-path="section-17.html"><a href="section-17.html#g10--20-2-140285009"><i class="fa fa-check"></i><b>5.185</b> 20 99.65 1 G10 에너지 20 2 140285009</a></li>
<li class="chapter" data-level="5.186" data-path="section-17.html"><a href="section-17.html#g10--21-2-24075079"><i class="fa fa-check"></i><b>5.186</b> 21 99.80 1 G10 에너지 21 2 24075079</a></li>
<li class="chapter" data-level="5.187" data-path="section-17.html"><a href="section-17.html#g10--22-2-8353752"><i class="fa fa-check"></i><b>5.187</b> 22 99.95 1 G10 에너지 22 2 8353752</a></li>
<li class="chapter" data-level="5.188" data-path="section-17.html"><a href="section-17.html#g10--23-2-1556783"><i class="fa fa-check"></i><b>5.188</b> 23 100.00 1 G10 에너지 23 2 1556783</a></li>
<li class="chapter" data-level="5.189" data-path="section-17.html"><a href="section-17.html#section-96"><i class="fa fa-check"></i><b>5.189</b> </a></li>
<li class="chapter" data-level="5.190" data-path="section-17.html"><a href="section-17.html#sector"><i class="fa fa-check"></i><b>5.190</b> $sector</a></li>
<li class="chapter" data-level="5.191" data-path="section-17.html"><a href="section-17.html#sec_cd-sec_nm_kor-sec_rate-idx_rate"><i class="fa fa-check"></i><b>5.191</b> SEC_CD SEC_NM_KOR SEC_RATE IDX_RATE</a></li>
<li class="chapter" data-level="5.192" data-path="section-17.html"><a href="section-17.html#g25--16.05-0"><i class="fa fa-check"></i><b>5.192</b> 1 G25 경기관련소비재 16.05 0</a></li>
<li class="chapter" data-level="5.193" data-path="section-17.html"><a href="section-17.html#g35--9.27-0"><i class="fa fa-check"></i><b>5.193</b> 2 G35 건강관리 9.27 0</a></li>
<li class="chapter" data-level="5.194" data-path="section-17.html"><a href="section-17.html#g50--2.26-0"><i class="fa fa-check"></i><b>5.194</b> 3 G50 커뮤니케이션서비스 2.26 0</a></li>
<li class="chapter" data-level="5.195" data-path="section-17.html"><a href="section-17.html#g40--10.31-0"><i class="fa fa-check"></i><b>5.195</b> 4 G40 금융 10.31 0</a></li>
<li class="chapter" data-level="5.196" data-path="section-17.html"><a href="section-17.html#g10--2.37-100"><i class="fa fa-check"></i><b>5.196</b> 5 G10 에너지 2.37 100</a></li>
<li class="chapter" data-level="5.197" data-path="section-17.html"><a href="section-17.html#g20--12.68-0"><i class="fa fa-check"></i><b>5.197</b> 6 G20 산업재 12.68 0</a></li>
<li class="chapter" data-level="5.198" data-path="section-17.html"><a href="section-17.html#g55--1.70-0"><i class="fa fa-check"></i><b>5.198</b> 7 G55 유틸리티 1.70 0</a></li>
<li class="chapter" data-level="5.199" data-path="section-17.html"><a href="section-17.html#g30--3.75-0"><i class="fa fa-check"></i><b>5.199</b> 8 G30 필수소비재 3.75 0</a></li>
<li class="chapter" data-level="5.200" data-path="section-17.html"><a href="section-17.html#g15--7.89-0"><i class="fa fa-check"></i><b>5.200</b> 9 G15 소재 7.89 0</a></li>
<li class="chapter" data-level="5.201" data-path="section-17.html"><a href="section-17.html#g45-it-33.73-0"><i class="fa fa-check"></i><b>5.201</b> 10 G45 IT 33.73 0</a></li>
<li class="chapter" data-level="5.202" data-path="section-17.html"><a href="section-17.html#section-97"><i class="fa fa-check"></i><b>5.202</b> </a></li>
<li class="chapter" data-level="5.203" data-path="section-17.html"><a href="section-17.html#size"><i class="fa fa-check"></i><b>5.203</b> $size</a></li>
<li class="chapter" data-level="5.204" data-path="section-17.html"><a href="section-17.html#sec_cd-sec_nm_kor-sec_rate-idx_rate-1"><i class="fa fa-check"></i><b>5.204</b> SEC_CD SEC_NM_KOR SEC_RATE IDX_RATE</a></li>
<li class="chapter" data-level="5.205" data-path="section-17.html"><a href="section-17.html#wmi510-wmi500--69.40-89.78"><i class="fa fa-check"></i><b>5.205</b> 1 WMI510 WMI500 대형주 69.40 89.78</a></li>
<li class="chapter" data-level="5.206" data-path="section-17.html"><a href="section-17.html#wmi520-wmi500--13.56-4.44"><i class="fa fa-check"></i><b>5.206</b> 2 WMI520 WMI500 중형주 13.56 4.44</a></li>
<li class="chapter" data-level="5.207" data-path="section-17.html"><a href="section-17.html#wmi530-wmi500--17.04-5.78"><i class="fa fa-check"></i><b>5.207</b> 3 WMI530 WMI500 소형주 17.04 5.78</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="section-98.html"><a href="section-98.html"><i class="fa fa-check"></i><b>6</b> 금융 데이터 수집하기 (심화)</a><ul>
<li class="chapter" data-level="6.1" data-path="section-98.html"><a href="section-98.html#section-99"><i class="fa fa-check"></i><b>6.1</b> 수정주가 크롤링</a><ul>
<li class="chapter" data-level="6.1.1" data-path="section-98.html"><a href="section-98.html#section-100"><i class="fa fa-check"></i><b>6.1.1</b> 개별 종목 주가 크롤링</a></li>
<li class="chapter" data-level="6.1.2" data-path="section-98.html"><a href="section-98.html#section-101"><i class="fa fa-check"></i><b>6.1.2</b> 전 종목 주가 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="section-98.html"><a href="section-98.html#section-102"><i class="fa fa-check"></i><b>6.2</b> 재무제표 및 가치지표 크롤링</a><ul>
<li class="chapter" data-level="6.2.1" data-path="section-98.html"><a href="section-98.html#section-103"><i class="fa fa-check"></i><b>6.2.1</b> 재무제표 다운로드</a></li>
<li class="chapter" data-level="6.2.2" data-path="section-98.html"><a href="section-98.html#section-104"><i class="fa fa-check"></i><b>6.2.2</b> 가치지표 계산하기</a></li>
<li class="chapter" data-level="6.2.3" data-path="section-98.html"><a href="section-98.html#section-105"><i class="fa fa-check"></i><b>6.2.3</b> 전 종목 재무제표 및 가치지표 다운로드</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="section-98.html"><a href="section-98.html#section-106"><i class="fa fa-check"></i><b>6.3</b> 야후 파이낸스 데이터 구하기</a><ul>
<li class="chapter" data-level="6.3.1" data-path="section-98.html"><a href="section-98.html#section-107"><i class="fa fa-check"></i><b>6.3.1</b> 재무제표 다운로드</a></li>
<li class="chapter" data-level="6.3.2" data-path="section-98.html"><a href="section-98.html#section-108"><i class="fa fa-check"></i><b>6.3.2</b> 가치지표 계산하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="section-109.html"><a href="section-109.html"><i class="fa fa-check"></i><b>7</b> 데이터 정리하기</a><ul>
<li class="chapter" data-level="7.1" data-path="section-109.html"><a href="section-109.html#section-110"><i class="fa fa-check"></i><b>7.1</b> 주가 정리하기</a></li>
<li class="chapter" data-level="7.2" data-path="section-109.html"><a href="section-109.html#section-111"><i class="fa fa-check"></i><b>7.2</b> 재무제표 정리하기</a></li>
<li class="chapter" data-level="7.3" data-path="section-109.html"><a href="section-109.html#section-112"><i class="fa fa-check"></i><b>7.3</b> 가치지표 정리하기</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="section-113.html"><a href="section-113.html"><i class="fa fa-check"></i><b>8</b> 데이터 분석 및 시각화하기</a><ul>
<li class="chapter" data-level="8.1" data-path="section-113.html"><a href="section-113.html#section-114"><i class="fa fa-check"></i><b>8.1</b> 종목정보 데이터 분석</a><ul>
<li class="chapter" data-level="8.1.1" data-path="section-113.html"><a href="section-113.html#join--"><i class="fa fa-check"></i><b>8.1.1</b> <code>*_join</code>: 데이터 합치기</a></li>
<li class="chapter" data-level="8.1.2" data-path="section-113.html"><a href="section-113.html#glimpse---"><i class="fa fa-check"></i><b>8.1.2</b> <code>glimpse()</code>: 데이터 구조 확인하기</a></li>
<li class="chapter" data-level="8.1.3" data-path="section-113.html"><a href="section-113.html#rename---"><i class="fa fa-check"></i><b>8.1.3</b> <code>rename()</code>: 열 이름 바꾸기</a></li>
<li class="chapter" data-level="8.1.4" data-path="section-113.html"><a href="section-113.html#distinct---"><i class="fa fa-check"></i><b>8.1.4</b> distinct(): 고유한 값 확인</a></li>
<li class="chapter" data-level="8.1.5" data-path="section-113.html"><a href="section-113.html#select---"><i class="fa fa-check"></i><b>8.1.5</b> <code>select()</code>: 원하는 열만 선택</a></li>
<li class="chapter" data-level="8.1.6" data-path="section-113.html"><a href="section-113.html#mutate-----"><i class="fa fa-check"></i><b>8.1.6</b> <code>mutate()</code>: 열 생성 및 데이터 변경</a></li>
<li class="chapter" data-level="8.1.7" data-path="section-113.html"><a href="section-113.html#filter----"><i class="fa fa-check"></i><b>8.1.7</b> <code>filter()</code>: 조건을 충족하는 행 선택</a></li>
<li class="chapter" data-level="8.1.8" data-path="section-113.html"><a href="section-113.html#summarize---"><i class="fa fa-check"></i><b>8.1.8</b> <code>summarize()</code>: 요약 통계값 계산</a></li>
<li class="chapter" data-level="8.1.9" data-path="section-113.html"><a href="section-113.html#arrange--"><i class="fa fa-check"></i><b>8.1.9</b> <code>arrange()</code>: 데이터 정렬</a></li>
<li class="chapter" data-level="8.1.10" data-path="section-113.html"><a href="section-113.html#row_number--"><i class="fa fa-check"></i><b>8.1.10</b> <code>row_number()</code>: 순위 계산</a></li>
<li class="chapter" data-level="8.1.11" data-path="section-113.html"><a href="section-113.html#ntile--"><i class="fa fa-check"></i><b>8.1.11</b> <code>ntile()</code>: 분위수 계산</a></li>
<li class="chapter" data-level="8.1.12" data-path="section-113.html"><a href="section-113.html#group_by---"><i class="fa fa-check"></i><b>8.1.12</b> <code>group_by()</code>: 그룹별로 데이터를 묶음</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="section-113.html"><a href="section-113.html#section-115"><i class="fa fa-check"></i><b>8.2</b> 종목정보 시각화</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="section-116.html"><a href="section-116.html"><i class="fa fa-check"></i><b>9</b> 퀀트 투자의 심장: 데이터와 프로그래밍</a></li>
<li class="divider"></li>
<li><a href="http://henryquant.blogspot.com/" target="blank">Henry's Quantopia</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="section-98" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> 금융 데이터 수집하기 (심화)</h1>
<p>지난 장에서는 주식티커를 구하였습니다. 이를 바탕으로 이번 장에서는 퀀트 투자의 핵심 자료인 수정주가, 재무제표 및 가치지표를 크롤링 하는법에 대해 알아보도록 하겠습니다.</p>
<div id="section-99" class="section level2">
<h2><span class="header-section-number">6.1</span> 수정주가 크롤링</h2>
<p>주가 데이터는 투자를 함에 있어 반드시 필요한 데이터이며, 인터넷에서 주가를 수집할 수 있는 방법은 매우 많습니다. 먼저, <a href="api-.html#api---">API를 이용한 데이터 수집</a>에서 살펴본 것과 같이, <code>getSymbols()</code> 함수를 이용하여 데이터를 받을 수 있습니다. 그러나 야후 파이낸스에서 제공하는 데이터의 경우 미국 주가는 이상없이 다운로드가 되지만, 국내 중소형주의 경우 주가가 없는 경우가 있습니다.</p>
<p>또한 단순 주가를 구할수 있는 방법은 많지만, 투자에 필요한 수정주가를 구할 수 있는 방법은 찾기 힘듭니다. 다행히 네이버 금융에서 제공하는 정보를 통해 모든 종목의 수정주가를 매우 손쉽게 구할 수 있습니다.</p>
<div id="section-100" class="section level3">
<h3><span class="header-section-number">6.1.1</span> 개별 종목 주가 크롤링</h3>
<p>먼저 네이버 금융에서 특정종목(예: 삼성전자)의 차트 탭<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>을 선택합니다.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-1"></span>
<img src="images/crawl_practice_price.png" alt="네이버금융 개별종목 차트탭" width="100%" />
<p class="caption">
Figure 6.1: 네이버금융 개별종목 차트탭
</p>
</div>
<p>위와 같이 플래쉬가 차단되어 화면이 나오지 않는 경우, 주소창의 왼쪽 상단에 위치한 자물쇠 버튼을 클릭한 다음, Flash를 허용으로 바꾼 후 새로고침을 누르면 차트가 나오게 됩니다.</p>
<p>해당 차트는 주가 데이터를 받아 그림을 그려주는 형태입니다. 따라서 해당 데이터가 어디에서 오는지 알기 위해 개발자도구 화면을 이용하도록 합니다.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-2"></span>
<img src="images/crawl_practice_price2.png" alt="네이버금융 차트의 통신기록" width="100%" />
<p class="caption">
Figure 6.2: 네이버금융 차트의 통신기록
</p>
</div>
<p>화면을 연 상태에서 일봉 탭을 선택하면 <strong>sise.nhn</strong>, <strong>schedule.nhn</strong>, <strong>notice.nhn</strong> 총 3가지 항목이 생성됩니다. 이 중 sise.nhn 항목의 Request URL이 주가 데이터를 요청하는 주소입니다. 해당 url에 접속해 보도록 하겠습니다.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-3"></span>
<img src="images/crawl_practice_price3.png" alt="주가 데이터 페이지" width="100%" />
<p class="caption">
Figure 6.3: 주가 데이터 페이지
</p>
</div>
<p>각 날짜별로 시가, 고가, 저가, 종가, 거래량이 있으며, 주가의 경우 모두 수정주가 기준입니다. 또한 해당 데이터가 item 태그 내 data 속성에 위치하고 있습니다.</p>
<p>위 주소에서 symbol= 뒤에 위치하는 6자리 티커만 변경하면 해당 종목의 주가 데이터가 위치한 페이지로 이동할 수 있으며, 우리가 원하는 모든 종목들의 주가 데이터를 크롤링 할 수 있습니다. 이러한 티커의 경우 우리는 이미 거래소에서 받은 데이터를 통해 가지고 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)

KOR_ticker =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_ticker.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>)
<span class="kw">print</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>[<span class="dv">1</span>])</code></pre>
<pre><code>## [1] 5930</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span> =<span class="st"> </span><span class="kw">str_pad</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>, <span class="dv">6</span>, <span class="dt">side =</span> <span class="kw">c</span>(<span class="st">&#39;left&#39;</span>), <span class="dt">pad =</span> <span class="st">&#39;0&#39;</span>)</code></pre>
<p>먼저 저장해두었던 csv 파일을 불러오도록 합니다. 종목코드를 살펴보면 005930 이어야 할 삼성전자의 티커가 5930으로 입력되어 있습니다. 이는 파일을 불러오는 과정에서 0으로 시작하는 숫자들이 지워져버렸기 때문입니다. 이를 6자리로 다시 맞춰주기 위해, <code>stringr</code> 패키지의 <code>str_pad()</code> 함수를 사용해 줍니다. 6자리가 되지 않는 문자는, 왼쪽에 0을 추가하여 강제로 6자리로 만들어 주도록 합니다.</p>
<p>다음은 첫번째 종목인 삼성전자의 주가를 크롤링한 후 가공하는 방법입니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(xts)

<span class="kw">ifelse</span>(<span class="kw">dir.exists</span>(<span class="st">&#39;data/KOR_price&#39;</span>), <span class="ot">FALSE</span>, <span class="kw">dir.create</span>(<span class="st">&#39;data/KOR_price&#39;</span>))</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">i =<span class="st"> </span><span class="dv">1</span>
name =<span class="st"> </span>KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>[i]

price =<span class="st"> </span><span class="kw">xts</span>(<span class="ot">NA</span>, <span class="dt">order.by =</span> <span class="kw">Sys.Date</span>())
<span class="kw">print</span>(price)</code></pre>
<pre><code>##            [,1]
## 2019-06-16   NA</code></pre>
<ol style="list-style-type: decimal">
<li>먼저 data 폴더 내에 KOR_price 폴더를 생성해줍니다.</li>
<li>i = 1 을 입력해 줍니다. 향후 for loop 구문을 통해 i 값만 변경하면 모든 종목의 주가를 다운로드 받을 수 있습니다.</li>
<li>name에 해당 티커를 입력해줍니다.</li>
<li><code>xts()</code> 함수를 이용해 빈 시계열 데이터를 생성해주며, 인덱스는 <code>Sys.Date()</code>를 통해 현재 날짜를 입력합니다.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(httr)
<span class="kw">library</span>(rvest)

url =<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fchart.stock.naver.com/sise.nhn?symbol=&#39;</span>,
             name,<span class="st">&#39;&amp;timeframe=day&amp;count=500&amp;requestType=0&#39;</span>)
data =<span class="st"> </span><span class="kw">GET</span>(url)
data_html =<span class="st"> </span><span class="kw">read_html</span>(data, <span class="dt">encoding =</span> <span class="st">&#39;EUC-KR&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&#39;item&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_attr</span>(<span class="st">&#39;data&#39;</span>) 

<span class="kw">print</span>(<span class="kw">head</span>(data_html))</code></pre>
<pre><code>## [1] &quot;20170529|46220|46400|45380|45620|174791&quot;
## [2] &quot;20170530|45520|45660|44480|44640|248672&quot;
## [3] &quot;20170531|44580|45020|44400|44700|373382&quot;
## [4] &quot;20170601|44860|44900|44400|44680|195070&quot;
## [5] &quot;20170602|45060|45960|45000|45960|249775&quot;
## [6] &quot;20170605|46040|46360|45720|45940|151988&quot;</code></pre>
<ol style="list-style-type: decimal">
<li><code>paste0()</code> 함수를 이용해 원하는 종목의 url을 생성해 줍니다. url중 티커에 해당하는 6자리 부분만 위에서 입력한 name으로 설정해주면 됩니다.</li>
<li><code>GET()</code> 함수를 통해 페이지의 데이터를 불러옵니다.</li>
<li><code>read_html()</code> 함수를 통해 html 정보를 읽어옵니다.</li>
<li><code>html_nodes()</code>와 <code>html_attr()</code> 함수를 통해 item 태그 및 data 속성의 데이터를 추출합니다.</li>
</ol>
<p>결과적으로 날짜 및 주가, 거래량 데이터만 추출되어 집니다. 해당 데이터는 ’|’으로 구분되어 있으며, 이를 테이블 형태로 바꿀 필요가 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)

price =<span class="st"> </span><span class="kw">read_delim</span>(data_html, <span class="dt">delim =</span> <span class="st">&#39;|&#39;</span>)
<span class="kw">print</span>(<span class="kw">head</span>(price))</code></pre>
<pre><code>## # A tibble: 6 x 6
##   `20170529` `46220` `46400` `45380` `45620` `174791`
##        &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
## 1   20170530   45520   45660   44480   44640   248672
## 2   20170531   44580   45020   44400   44700   373382
## 3   20170601   44860   44900   44400   44680   195070
## 4   20170602   45060   45960   45000   45960   249775
## 5   20170605   46040   46360   45720   45940   151988
## 6   20170607   46500   46500   45240   45300   274588</code></pre>
<p><code>readr</code> 패키지의 <code>read_delim()</code> 함수를 쓸 경우 구분자로 이루어진 데이터를 테이블로 쉽게 변경할 수 있습니다. 데이터를 확인해보면 테이블 형태로 변경되었으며 각 열은 날짜, 시가, 고가, 저가, 종가, 거래량을 의미합니다. 이 중 우리가 필요한 날짜와 종가를 선택한 후, 데이터 클랜징을 해주도록 합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)

price =<span class="st"> </span>price[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)] 
price =<span class="st"> </span><span class="kw">data.frame</span>(price)
<span class="kw">colnames</span>(price) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;Price&#39;</span>)
price[, <span class="dv">1</span>] =<span class="st"> </span><span class="kw">ymd</span>(price[, <span class="dv">1</span>])

<span class="kw">rownames</span>(price) =<span class="st"> </span>price[, <span class="dv">1</span>]
price[, <span class="dv">1</span>] =<span class="st"> </span><span class="ot">NULL</span>

<span class="kw">print</span>(<span class="kw">tail</span>(price))</code></pre>
<pre><code>##            Price
## 2019-06-07 44200
## 2019-06-10 44800
## 2019-06-11 44850
## 2019-06-12 44600
## 2019-06-13 43750
## 2019-06-14 44000</code></pre>
<ol style="list-style-type: decimal">
<li>날짜에 해당하는 첫번째 열과, 종가에 해당하는 다섯번째 열만을 선택해 저장해 줍니다.</li>
<li>티블 형태의 데이터를 데이터프레임 형태로 변경해 줍니다.</li>
<li>열이름을 Date와 Price로 변경해 줍니다.</li>
<li><code>lubridate</code> 패키지의 <code>ymd()</code> 함수를 이용하여 yyyymmdd 형태를 yyyy-mm-dd로 변경해주며, 데이터 형태 또한 Date 타입으로 변경됩니다.</li>
<li>행이름을 첫번째 열인 날짜로 변경해준 후, 해당 열은 NULL을 통해 삭제해 줍니다.</li>
</ol>
<p>데이터를 확인해보면 우리에게 필요한 형태로 정리가 되었습니다. 마지막으로 해당 데이터를 csv 파일로 저장해주도록 합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(price, <span class="kw">paste0</span>(<span class="st">&#39;data/KOR_price/&#39;</span>, name, <span class="st">&#39;_price.csv&#39;</span>))</code></pre>
<p>data 폴더의 KOR_price 폴더 내에 티커_price.csv 이름으로 저장해주도록 합니다.</p>
</div>
<div id="section-101" class="section level3">
<h3><span class="header-section-number">6.1.2</span> 전 종목 주가 크롤링</h3>
<p>위의 코드에서 for loop 구문을 이용하여 i 값만 변경해주면 모든 종목의 주가를 다운로드 받을 수 있습니다. 전 종목 주가를 다운로드 받는 전체 코드는 다음과 같습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(httr)
<span class="kw">library</span>(rvest)
<span class="kw">library</span>(stringr)
<span class="kw">library</span>(xts)
<span class="kw">library</span>(lubridate)

KOR_ticker =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_ticker.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>)
<span class="kw">print</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>[<span class="dv">1</span>])
KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span> =<span class="st"> </span><span class="kw">str_pad</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>, <span class="dv">6</span>, <span class="dt">side =</span> <span class="kw">c</span>(<span class="st">&#39;left&#39;</span>), <span class="dt">pad =</span> <span class="st">&#39;0&#39;</span>)

<span class="kw">ifelse</span>(<span class="kw">dir.exists</span>(<span class="st">&#39;data/KOR_price&#39;</span>), <span class="ot">FALSE</span>, <span class="kw">dir.create</span>(<span class="st">&#39;data/KOR_price&#39;</span>))

<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span> <span class="op">:</span><span class="st"> </span><span class="kw">nrow</span>(KOR_ticker) ) {
  
  price =<span class="st"> </span><span class="kw">xts</span>(<span class="ot">NA</span>, <span class="dt">order.by =</span> <span class="kw">Sys.Date</span>()) <span class="co"># 빈 시계열 데이터 생성</span>
  name =<span class="st"> </span>KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>[i] <span class="co"># 티커 부분 선택</span>
  
  <span class="co"># 오류 발생 시 이를 무시하고 다음 루프로 진행</span>
  <span class="kw">tryCatch</span>({
    <span class="co"># url 생성</span>
    url =<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://fchart.stock.naver.com/sise.nhn?symbol=&#39;</span>
                 ,name,<span class="st">&#39;&amp;timeframe=day&amp;count=500&amp;requestType=0&#39;</span>)
    
    <span class="co"># 이 후 과정은 위와 동일함</span>
    <span class="co"># 데이터 다운로드</span>
    data =<span class="st"> </span><span class="kw">GET</span>(url)
    data_html =<span class="st"> </span><span class="kw">read_html</span>(data, <span class="dt">encoding =</span> <span class="st">&#39;EUC-KR&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">html_nodes</span>(<span class="st">&quot;item&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">html_attr</span>(<span class="st">&quot;data&quot;</span>) 
    
    <span class="co"># 데이터 나누기</span>
    price =<span class="st"> </span><span class="kw">read_delim</span>(data_html, <span class="dt">delim =</span> <span class="st">&#39;|&#39;</span>)
    
    <span class="co"># 필요한 열만 선택 후 클렌징</span>
    price =<span class="st"> </span>price[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)] 
    price =<span class="st"> </span><span class="kw">data.frame</span>(price)
    <span class="kw">colnames</span>(price) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;Price&#39;</span>)
    price[, <span class="dv">1</span>] =<span class="st"> </span><span class="kw">ymd</span>(price[, <span class="dv">1</span>])
    
    <span class="kw">rownames</span>(price) =<span class="st"> </span>price[, <span class="dv">1</span>]
    price[, <span class="dv">1</span>] =<span class="st"> </span><span class="ot">NULL</span>
    
  }, <span class="dt">error =</span> <span class="cf">function</span>(e) {
    
    <span class="co"># 오류 발생시 해당 종목명을 출력하고 다음 루프로 이동</span>
    <span class="kw">warning</span>(<span class="kw">paste0</span>(<span class="st">&quot;Error in Ticker: &quot;</span>, name))
  })
  
  <span class="co"># 다운로드 받은 파일을 생성한 폴더 내 csv 파일로 저장</span>
  <span class="kw">write.csv</span>(price, <span class="kw">paste0</span>(<span class="st">&#39;data/KOR_price/&#39;</span>, name, <span class="st">&#39;_price.csv&#39;</span>))
  
  <span class="co"># 타임슬립 적용</span>
  <span class="kw">Sys.sleep</span>(<span class="dv">2</span>)
}</code></pre>
<p>위의 코드에서 추가된 점은 다음과 같습니다. 페이지 오류, 통신 오류 등 오류가 발생할 경우 for loop 구문은 멈추어 버리며, 전체 데이터를 처음부터 다시 받는 일은 매우 귀찮은 작업입니다. 따라서 <code>tryCatch()</code> 함수를 이용해 <a href="section-4.html#section-9">오류가 발생 시 해당 티커를 출력한 후 다음 loop로 넘어가게 합니다.</a></p>
<p>또한 오류가 발생했을 시에는 <code>xts()</code> 함수를 통해 만들어 둔 빈 데이터를 저장하게 됩니다.</p>
<p>위의 코드가 모두 돌아가는데는 수시간이 걸리며, 작업이 끝난 후 data/KOR_price 폴더를 확인해보면, 전 종목 주가가 csv 형태로 저장되어 있게 됩니다.</p>
</div>
</div>
<div id="section-102" class="section level2">
<h2><span class="header-section-number">6.2</span> 재무제표 및 가치지표 크롤링</h2>
<p>주가와 더불어 재무제표와 가치지표 역시 투자에 있어 핵심이 되는 데이터입니다. 해당 데이터 역시 구할 수 잇는 여러 사이트가 있지만, 국내의 데이터 제공업체인 FnGuide에서 운영하는 Company Guide 홈페이지<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>에서 손쉽게 구할 수 있습니다.</p>
<div id="section-103" class="section level3">
<h3><span class="header-section-number">6.2.1</span> 재무제표 다운로드</h3>
<p>먼저 개별종목의 재무제표를 탭을 선택하면 <strong>포괄손익계산서, 재무상태표, 현금흐름표</strong> 항목이 보이게 되며, 티커에 해당하는 A005930 뒤의 주소는 불필요한 내용이므로, 이를 제거한 주소로 접속하도록 합니다. A 뒤의 6자리 티커만 변경할 경우, 해당 종목의 재무제표 페이지로 이동하게 됩니다.</p>
<pre><code>http://comp.fnguide.com/SVO2/ASP/SVD_Finance.asp?pGB=1&amp;gicode=A005930</code></pre>
<p>우리가 원하는 재무제표 항목들은 모두 테이블 형태로 제공되고 있으므로, <code>html_table()</code> 함수를 이용하여 손쉽게 추출할 수 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(httr)
<span class="kw">library</span>(rvest)

<span class="kw">ifelse</span>(<span class="kw">dir.exists</span>(<span class="st">&#39;data/KOR_fs&#39;</span>), <span class="ot">FALSE</span>,
       <span class="kw">dir.create</span>(<span class="st">&#39;data/KOR_fs&#39;</span>))

<span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;English&quot;</span>)

url =<span class="st"> &#39;http://comp.fnguide.com/SVO2/ASP/SVD_Finance.asp?pGB=1&amp;gicode=A005930&#39;</span>
data =<span class="st"> </span><span class="kw">GET</span>(url)
data =<span class="st"> </span>data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_table</span>()

<span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;Korean&quot;</span>)

<span class="kw">lapply</span>(data, <span class="cf">function</span>(x) {<span class="kw">head</span>(x, <span class="dv">3</span>)})</code></pre>
<ol style="list-style-type: decimal">
<li>먼저 data 폴더 내에 KOR_fs 폴더를 생성해줍니다.</li>
<li><code>Sys.setlocale()</code> 함수를 통해 로케일 언어를 영어로 설정 해줍니다.</li>
<li>url을 입력한 후, <code>GET()</code> 함수를 통해 페이지 내용을 받아옵니다.</li>
<li><code>read_html()</code> 함수를 통해 html 내용을 읽어오며, <code>html_table()</code> 함수를 통해 테이블 내용만을 추출합니다.</li>
<li>로케일 언어를 다시 한글로 설정 해줍니다.</li>
</ol>
<p>위의 과정을 거치면 data 변수에는 총 리스트 형태로 총 6개의 테이블이 들어오게 되며, 그 내용은 다음과 같습니다.</p>
<table>
<caption><span id="tab:unnamed-chunk-12">Table 6.1: </span>재무제표 테이블 내역</caption>
<thead>
<tr class="header">
<th align="left">순서</th>
<th align="left">내용</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">포괄손익계산서 (연간)</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">포괄손익계산서 (분기)</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">재무상태표 (연간)</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">재무상태표 (분기)</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">현금흐름표 (연간)</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">현금흐름표 (분기)</td>
</tr>
</tbody>
</table>
<p>이 중 연간 기준 재무제표에 해당하는 첫번째, 세번째, 다섯번째 테이블을 선택한 후, 클랜징 작업을 해주도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">data_IS =<span class="st"> </span>data[[<span class="dv">1</span>]]
data_BS =<span class="st"> </span>data[[<span class="dv">3</span>]]
data_CF =<span class="st"> </span>data[[<span class="dv">5</span>]]

<span class="kw">print</span>(<span class="kw">names</span>(data_IS))</code></pre>
<pre><code>## [1] &quot;IFRS(연결)&quot;  &quot;2016/12&quot;     &quot;2017/12&quot;     &quot;2018/12&quot;     &quot;2019/03&quot;    
## [6] &quot;전년동기&quot;    &quot;전년동기(%)&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">data_IS =<span class="st"> </span>data_IS[, <span class="dv">1</span><span class="op">:</span>(<span class="kw">ncol</span>(data_IS)<span class="op">-</span><span class="dv">2</span>)]</code></pre>
<p>포괄손익계산서 테이블(data_IS)에는 전년동기, 전년동기(%) 열이 존재하며, 통일성을 위해 이를 삭제해주었습니다. 이제 테이블을 묶은 후 클랜징을 해주도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">data_fs =<span class="st"> </span><span class="kw">rbind</span>(data_IS, data_BS, data_CF)
data_fs[, <span class="dv">1</span>] =<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&#39;계산에 참여한 계정 펼치기&#39;</span>,
                    <span class="st">&#39;&#39;</span>, data_fs[, <span class="dv">1</span>])
data_fs =<span class="st"> </span>data_fs[<span class="op">!</span><span class="kw">duplicated</span>(data_fs[, <span class="dv">1</span>]), ]

<span class="kw">rownames</span>(data_fs) =<span class="st"> </span><span class="ot">NULL</span>
<span class="kw">rownames</span>(data_fs) =<span class="st"> </span>data_fs[, <span class="dv">1</span>]
data_fs[, <span class="dv">1</span>] =<span class="st"> </span><span class="ot">NULL</span>

data_fs =<span class="st"> </span>data_fs[, <span class="kw">substr</span>(<span class="kw">colnames</span>(data_fs), <span class="dv">6</span>,<span class="dv">7</span>) <span class="op">==</span><span class="st"> &quot;12&quot;</span>]</code></pre>
<ol style="list-style-type: decimal">
<li>먼저 <code>rbind()</code> 함수를 이용하여 세 테이블을 행으로 묶은 뒤 저장합니다.</li>
<li>첫번째 열인 계정명에는 ‘계산에 참여한 계정 펼치기’ 라는 글자가 들어간 항목이 존재합니다. 이는 페이지 내에서 펼치기 역할을 하는 (+) 항목에 해당하며, <code>gsub()</code> 함수를 이용해 해당 글자를 삭제해 줍니다.</li>
<li>중복되는 계정명이 다수 존재하며, 이는 대부분 불필요한 항목입니다. <code>!duplicated()</code> 함수를 사용해 중복되지 않는 계정명만을 선택해 줍니다.</li>
<li>행이름을 초기화 한 후, 첫번째 열의 계정명을 행이름으로 변경합니다. 그 후 첫번째 열은 삭제해주도록 합니다.</li>
<li>간혹 12월 결산법인이 아닌 종목, 혹은 연간 재무제표임에도 불구하고 분기 재무제표가 들어와 있는 경우가 있습니다. 비교의 통일성을 위해 <code>substr()</code> 함수를 이용하여 끝 글자가 12인 열, 즉 12월 결산 데이터만을 선택해 줍니다.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">head</span>(data_fs))</code></pre>
<pre><code>##                    2016/12   2017/12   2018/12
## 매출액           2,018,667 2,395,754 2,437,714
## 매출원가         1,202,777 1,292,907 1,323,944
## 매출총이익         815,890 1,102,847 1,113,770
## 판매비와관리비     523,484   566,397   524,903
## 인건비              59,763    67,972    64,514
## 유무형자산상각비    10,018    13,366    14,477</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(data_fs)</code></pre>
<pre><code>## &#39;data.frame&#39;:    236 obs. of  3 variables:
##  $ 2016/12: chr  &quot;2,018,667&quot; &quot;1,202,777&quot; &quot;815,890&quot; &quot;523,484&quot; ...
##  $ 2017/12: chr  &quot;2,395,754&quot; &quot;1,292,907&quot; &quot;1,102,847&quot; &quot;566,397&quot; ...
##  $ 2018/12: chr  &quot;2,437,714&quot; &quot;1,323,944&quot; &quot;1,113,770&quot; &quot;524,903&quot; ...</code></pre>
<p>데이터를 확인해보면 연간 기준 재무제표가 정리되었습니다. 그러나 데이터에 콤마가 문자형이므로, 이를 숫자형으로 변경해주어야 합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)
<span class="kw">library</span>(stringr)

data_fs =<span class="st"> </span><span class="kw">sapply</span>(data_fs, <span class="cf">function</span>(x) {
  <span class="kw">str_replace_all</span>(x, <span class="st">&#39;,&#39;</span>, <span class="st">&#39;&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">as.numeric</span>()
}) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">data.frame</span>(., <span class="dt">row.names =</span> <span class="kw">rownames</span>(data_fs))

<span class="kw">print</span>(<span class="kw">head</span>(data_fs))</code></pre>
<pre><code>##                  X2016.12 X2017.12 X2018.12
## 매출액            2018667  2395754  2437714
## 매출원가          1202777  1292907  1323944
## 매출총이익         815890  1102847  1113770
## 판매비와관리비     523484   566397   524903
## 인건비              59763    67972    64514
## 유무형자산상각비    10018    13366    14477</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(data_fs)</code></pre>
<pre><code>## &#39;data.frame&#39;:    236 obs. of  3 variables:
##  $ X2016.12: num  2018667 1202777 815890 523484 59763 ...
##  $ X2017.12: num  2395754 1292907 1102847 566397 67972 ...
##  $ X2018.12: num  2437714 1323944 1113770 524903 64514 ...</code></pre>
<ol style="list-style-type: decimal">
<li><code>sapply()</code> 함수를 이용해 각 열에 <code>stringr</code> 패키지의 <code>str_replace_allr()</code> 함수를 적용하여 콤마(,)를 제거한 후, <code>as.numeric()</code> 함수를 통해 숫자형 데이터로 변경합니다.</li>
<li><code>data.frame()</code> 함수를 이용해 데이터프레임 형태로 만들어주며, 행이름은 기존 내용을 그대로 유지해줍니다.</li>
</ol>
<p>정리된 데이터를 출력해보면 문자형이던 데이터가 숫자형으로 변경되었습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(data_fs, <span class="st">&#39;data/KOR_fs/005930_fs.csv&#39;</span>)</code></pre>
<p>data 폴더의 KOR_fs 폴더 내에 티커_fs.csv 이름으로 저장해주도록 합니다.</p>
</div>
<div id="section-104" class="section level3">
<h3><span class="header-section-number">6.2.2</span> 가치지표 계산하기</h3>
<p>위에서 구한 재무제표 데이터를 이용해 가치지표를 계산할 수 있습니다. 흔히 사용되는 가치지표는 <strong>PER, PBR, PCR, PSR</strong> 이며 분자는 주가, 분모는 재무제표 데이터가 사용됩니다.</p>
<table>
<caption><span id="tab:unnamed-chunk-18">Table 6.2: </span>가치지표의 종류</caption>
<thead>
<tr class="header">
<th align="left">순서</th>
<th align="left">분모</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">PER</td>
<td align="left">Earnings (순이익)</td>
</tr>
<tr class="even">
<td align="left">PBR</td>
<td align="left">Book Value (순자산)</td>
</tr>
<tr class="odd">
<td align="left">PCR</td>
<td align="left">Cashflow (영업활동현금흐름)</td>
</tr>
<tr class="even">
<td align="left">PSR</td>
<td align="left">Sales (매출액)</td>
</tr>
</tbody>
</table>
<p>위에서 구한 재무제표 항목에서 분모 부분에 해당하는 데이터만 선택하도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ifelse</span>(<span class="kw">dir.exists</span>(<span class="st">&#39;data/KOR_value&#39;</span>), <span class="ot">FALSE</span>,
       <span class="kw">dir.create</span>(<span class="st">&#39;data/KOR_value&#39;</span>))</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">value_type =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;지배주주순이익&#39;</span>,
               <span class="st">&#39;자본&#39;</span>,
               <span class="st">&#39;영업활동으로인한현금흐름&#39;</span>,
               <span class="st">&#39;매출액&#39;</span>)

value_index =<span class="st"> </span>data_fs[<span class="kw">match</span>(value_type, <span class="kw">rownames</span>(data_fs)),
                      <span class="kw">ncol</span>(data_fs)]
<span class="kw">print</span>(value_index)</code></pre>
<pre><code>## [1]  438909 2477532  670319 2437714</code></pre>
<ol style="list-style-type: decimal">
<li>먼저 data 폴더 내에 KOR_value 폴더를 생성해줍니다.</li>
<li>분모에 해당하는 항목을 저장한 후, <code>match()</code> 함수를 이용하여 해당 항목이 위치하는 지점을 찾아 데이터를 선택해줍니다.<code>ncol()</code> 함수를 이용하여 가장 우측, 즉 최근년도 재무제표 데이터를 선택해줍니다.</li>
</ol>
<p>다음으로 분자 부분에 해당하는 현재 주가를 수집해야 합니다. 이 역시 Company Guide 접속화면에서 구할 수 있으며, 불필요한 부분을 제거한 url은 다음과 같습니다.</p>
<pre><code>http://comp.fnguide.com/SVO2/ASP/SVD_main.asp?pGB=1&amp;gicode=A005930</code></pre>
<p>위의 주소 역시 A 뒤의 6자리 티커만 변경할 경우, 해당 종목의 스냅샷 페이지로 이동하게 됩니다.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-20"></span>
<img src="images/crawl_practice_comp_price.png" alt="Company Guide 스냅샷 화면" width="519" />
<p class="caption">
Figure 6.4: Company Guide 스냅샷 화면
</p>
</div>
<p>주가추이 부분에 우리가 원하는 현재 주가가 있으므로, 해당 데이터를 크롤링 하면 됩니다. 이처럼 크롤링하고자 하는 데이터가 하나 혹은 소수 일때는 html 구조를 모두 분해한 후 데이터를 추출하는 것 보다 Xpath를 이용하는 것이 훨씬 효율적입니다.</p>
<p>Xpath란 XML 중 특정 값의 태그나 속성을 찾기 쉽게 만든 주소라 생각하면 됩니다. 예를 들어 R 프로그램이 저장된 곳을 윈도우 탐색기를 이용하여 이용할 경우 C:\Program Files\R\R-3.4.1 형태의 주소를 보이며, 이는 윈도우의 path 문법입니다. XML 역시 이와 동일한 개념의 XPath가 존재합니다. 웹페이지에서 Xpath를 찾는 법은 다음과 같습니다.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-21"></span>
<img src="images/crawl_practice_comp_price2.png" alt="Company Guide 스냅샷 화면" width="674" />
<p class="caption">
Figure 6.5: Company Guide 스냅샷 화면
</p>
</div>
<p>먼저 크롤링하고자 하는 내용에 마우스를 올린 채 우클릭 → 검사를 누르면, 개발자도구 화면이 열리며 해당 지점의 html 부분이 선택됩니다.그 후 html 화면에서 우클릭 → Copy → Copy Xpath를 선택하면, 해당 지점의 xpath가 복사됩니다.</p>
<pre class="sourceCode html"><code class="sourceCode html">//*[@id=&quot;svdMainChartTxt11&quot;]</code></pre>
<p>위에서 구한 xpath를 이용하여 주가 데이터를 크롤링하도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">url =<span class="st"> &#39;http://comp.fnguide.com/SVO2/ASP/SVD_main.asp?pGB=1&amp;gicode=A005930&#39;</span>
data =<span class="st"> </span><span class="kw">GET</span>(url)

price =<span class="st"> </span><span class="kw">read_html</span>(data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> <span class="st">&#39;//*[@id=&quot;svdMainChartTxt11&quot;]&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_text</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">parse_number</span>()

<span class="kw">print</span>(price)</code></pre>
<pre><code>## [1] 44000</code></pre>
<ol style="list-style-type: decimal">
<li>먼저 url을 입력한 후, <code>GET()</code> 함수를 이용하여 데이터를 불러옵니다.</li>
<li><code>read_html()</code> 함수를 이용해 html 데이터를 불러온 후, <code>html_node()</code> 함수 내에 위에서 구한 xpath를 입력하여, 해당 지점의 데이터를 추출합니다.</li>
<li><code>html_text()</code> 함수를 통해 텍스트 데이터만을 추출하며, <code>parse_number()</code> 함수를 적용합니다. 해당 함수는 문자형 데이터에서 콤마와 같은 불필요한 문자를 제거한 후, 숫자형 데이터로 변경해줍니다.</li>
</ol>
<p>이처럼 xpath를 이용할 경우 태그나 속성을 분해하지 않고도 원하는 지점의 데이터를 크롤링할 수 있습니다. 가치지표를 계산하기 위해서는 발행주식수 역시 필요합니다. 예를 들어 PER를 계산하는 방법은 다음과 같습니다.</p>
<p><span class="math display">\[ PER = Price / EPS  = 주가 / 주당순이익\]</span></p>
<p>주당순이익의 경우 순이익을 전체 주식수로 나눈값이므로, 해당 값의 계산을 위해 전체 주식수 역시 크롤링해야 합니다. 해당 데이터 역시 웹페이지에 존재하므로 위에서 주가를 크롤링한 방법과 동일하게 구할 수 있으며, xpath는 다음과 같습니다.</p>
<pre class="sourceCode html"><code class="sourceCode html">//*[@id=&quot;svdMainGrid1&quot;]/table/tbody/tr[7]/td[1]</code></pre>
<p>이를 이용해 발행주식수 중 보통주를 선택하는 방법은 다음과 같습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">share =<span class="st"> </span><span class="kw">read_html</span>(data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> <span class="st">&#39;//*[@id=&quot;svdMainGrid1&quot;]/table/tbody/tr[7]/td[1]&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_text</span>()

<span class="kw">print</span>(share)</code></pre>
<pre><code>## [1] &quot;5,969,782,550/ 822,886,700&quot;</code></pre>
<p><code>read_html()</code> 함수와 <code>html_node()</code> 함수를 이용해, html 내에서 xpath에 해당하는 데이터를 추출합니다. 그 후, <code>html_text()</code> 함수를 통해 텍스트 부분만 추출하도록 합니다. 해당 과정을 거치면 보통주/우선주의 형태로 발행주식주가 저장되어 있습니다. 이 중 우리가 원하는 데이터는 ‘/’ 앞에 위치한 보통주 발행주식수 입니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">share =<span class="st"> </span>share <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">strsplit</span>(<span class="st">&#39;/&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">unlist</span>() <span class="op">%&gt;%</span>
<span class="st">  </span>.[<span class="dv">1</span>] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">parse_number</span>()

<span class="kw">print</span>(share)</code></pre>
<pre><code>## [1] 5969782550</code></pre>
<ol style="list-style-type: decimal">
<li><code>strsplit()</code> 함수를 통해 ’/’를 기준으로 데이터를 나누어주며, 해당 결과는 리스트 형태로 저장이 됩니다.</li>
<li><code>unlist()</code> 함수를 통해 리스트를 벡터 형태로 변환합니다.</li>
<li><code>.[1]</code>을 통해 보통주 발행주식수인 첫번째 데이터를 선택합니다.</li>
<li><code>parse_number()</code> 함수를 통해 문자형 데이터를 숫자형으로 변환해 줍니다.</li>
</ol>
<p>재무데이터, 현재 주가, 발행주식수를 이용하여 가치지표를 계산해보도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">data_value =<span class="st"> </span>price <span class="op">/</span><span class="st"> </span>(value_index <span class="op">*</span><span class="st"> </span><span class="dv">100000000</span><span class="op">/</span><span class="st"> </span>share)
<span class="kw">names</span>(data_value) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;PER&#39;</span>, <span class="st">&#39;PBR&#39;</span>, <span class="st">&#39;PCR&#39;</span>, <span class="st">&#39;PSR&#39;</span>)
data_value[data_value <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] =<span class="st"> </span><span class="ot">NA</span>

<span class="kw">print</span>(data_value)</code></pre>
<pre><code>##      PER      PBR      PCR      PSR 
## 5.984622 1.060210 3.918588 1.077528</code></pre>
<p>분자에는 현재 주가를 입력하며, 분모에는 재무 데이터를 보통주 발행주식수로 나눈 값을 입력합니다. 단, 주가는 원 단위, 재무 데이터는 억 단위이므로, 둘 간의 단위를 동일하게 맞춰주기 위해 분모에 억을 곱해 줍니다. 또한 가치지표가 음수인 경우는<code>NA</code>로 변경해주도록 합니다.</p>
<p>결과를 확인해보면 4가지 가치지표가 잘 계산되었습니다.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(data_value, <span class="st">&#39;data/KOR_value/005930_value.csv&#39;</span>)</code></pre>
<p>data 폴더의 KOR_value 폴더 내에 티커_value.csv 이름으로 저장해주도록 합니다.</p>
</div>
<div id="section-105" class="section level3">
<h3><span class="header-section-number">6.2.3</span> 전 종목 재무제표 및 가치지표 다운로드</h3>
<p>위의 코드에서 for loop 구문을 이용하여 url 중 6자리 티커에 해당하는 값만 변경해주면 모든 종목의 재무제표를 다운로드 받고, 이를 바탕으로 가치지표를 계산할 수 있습니다. 해당 코드는 다음과 같습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)
<span class="kw">library</span>(httr)
<span class="kw">library</span>(rvest)
<span class="kw">library</span>(stringr)
<span class="kw">library</span>(readr)

KOR_ticker =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_ticker.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>)
KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span> =<span class="st"> </span><span class="kw">str_pad</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>, <span class="dv">6</span>, <span class="dt">side =</span> <span class="kw">c</span>(<span class="st">&#39;left&#39;</span>), <span class="dt">pad =</span> <span class="st">&#39;0&#39;</span>)

<span class="kw">ifelse</span>(<span class="kw">dir.exists</span>(<span class="st">&#39;data/KOR_fs&#39;</span>), <span class="ot">FALSE</span>, <span class="kw">dir.create</span>(<span class="st">&#39;data/KOR_fs&#39;</span>))
<span class="kw">ifelse</span>(<span class="kw">dir.exists</span>(<span class="st">&#39;data/KOR_value&#39;</span>), <span class="ot">FALSE</span>, <span class="kw">dir.create</span>(<span class="st">&#39;data/KOR_value&#39;</span>))

<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span> <span class="op">:</span><span class="st"> </span><span class="kw">nrow</span>(KOR_ticker) ) {
  
  data_fs =<span class="st"> </span><span class="kw">c</span>()
  data_value =<span class="st"> </span><span class="kw">c</span>()
  name =<span class="st"> </span>KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>[i]
  
  <span class="co"># 오류 발생 시 이를 무시하고 다음 루프로 진행</span>
  <span class="kw">tryCatch</span>({
    
    <span class="co"># url 생성</span>
    url =<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;http://comp.fnguide.com/SVO2/ASP/SVD_Finance.asp?pGB=1&amp;gicode=A&quot;</span>,
                 name)
    
    <span class="co"># 이 후 과정은 위와 동일함</span>
    <span class="co"># 데이터 다운로드</span>
    <span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;English&quot;</span>)
    
    <span class="co"># 테이블 추출</span>
    data =<span class="st"> </span><span class="kw">GET</span>(url) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">html_table</span>()
    
    <span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;Korean&quot;</span>)
    
    <span class="co"># 3개 재무제표를 하나로 합치기</span>
    data_IS =<span class="st"> </span>data[[<span class="dv">1</span>]]
    data_BS =<span class="st"> </span>data[[<span class="dv">3</span>]]
    data_CF =<span class="st"> </span>data[[<span class="dv">5</span>]]
    
    data_IS =<span class="st"> </span>data_IS[, <span class="dv">1</span><span class="op">:</span>(<span class="kw">ncol</span>(data_IS)<span class="op">-</span><span class="dv">2</span>)]
    data_fs =<span class="st"> </span><span class="kw">rbind</span>(data_IS, data_BS, data_CF)
    
    <span class="co"># 데이터 클랜징</span>
    data_fs[, <span class="dv">1</span>] =<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&#39;계산에 참여한 계정 펼치기&#39;</span>,
                        <span class="st">&#39;&#39;</span>, data_fs[, <span class="dv">1</span>])
    data_fs =<span class="st"> </span>data_fs[<span class="op">!</span><span class="kw">duplicated</span>(data_fs[, <span class="dv">1</span>]), ]
    
    <span class="kw">rownames</span>(data_fs) =<span class="st"> </span><span class="ot">NULL</span>
    <span class="kw">rownames</span>(data_fs) =<span class="st"> </span>data_fs[, <span class="dv">1</span>]
    data_fs[, <span class="dv">1</span>] =<span class="st"> </span><span class="ot">NULL</span>
    
    <span class="co"># 12월 재무제표만 선택</span>
    data_fs =<span class="st"> </span>data_fs[, <span class="kw">substr</span>(<span class="kw">colnames</span>(data_fs), <span class="dv">6</span>,<span class="dv">7</span>) <span class="op">==</span><span class="st"> &quot;12&quot;</span>]
    
    data_fs =<span class="st"> </span><span class="kw">sapply</span>(data_fs, <span class="cf">function</span>(x) {
      <span class="kw">str_replace_all</span>(x, <span class="st">&#39;,&#39;</span>, <span class="st">&#39;&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">        </span><span class="kw">as.numeric</span>()
    }) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">data.frame</span>(., <span class="dt">row.names =</span> <span class="kw">rownames</span>(data_fs))
    
    
    <span class="co"># 가치지표 분모부분</span>
    value_type =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;지배주주순이익&#39;</span>, 
                   <span class="st">&#39;자본&#39;</span>, 
                   <span class="st">&#39;영업활동으로인한현금흐름&#39;</span>, 
                   <span class="st">&#39;매출액&#39;</span>) 
    
    <span class="co"># 해당 재무데이터만 선택</span>
    value_index =<span class="st"> </span>data_fs[<span class="kw">match</span>(value_type, <span class="kw">rownames</span>(data_fs)),
                          <span class="kw">ncol</span>(data_fs)]
    
    <span class="co"># Snapshot 페이지 불러오기</span>
    url =<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;http://comp.fnguide.com/SVO2/ASP/SVD_Main.asp?pGB=1&amp;gicode=A&quot;</span>,
                 name)
    data =<span class="st"> </span><span class="kw">GET</span>(url)
    
    <span class="co"># 현재 주가 크롤링</span>
    price =<span class="st"> </span><span class="kw">read_html</span>(data) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> <span class="st">&#39;//*[@id=&quot;svdMainChartTxt11&quot;]&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">html_text</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">parse_number</span>()
    
    <span class="co"># 보통주 발행장주식수 크롤링</span>
    share =<span class="st"> </span><span class="kw">read_html</span>(data) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> <span class="st">&#39;//*[@id=&quot;svdMainGrid1&quot;]/table/tbody/tr[7]/td[1]&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">html_text</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">strsplit</span>(<span class="st">&#39;/&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">unlist</span>() <span class="op">%&gt;%</span>
<span class="st">      </span>.[<span class="dv">1</span>] <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">parse_number</span>()
    
    <span class="co"># 가치지표 계산</span>
    data_value =<span class="st"> </span>price <span class="op">/</span><span class="st"> </span>(value_index <span class="op">*</span><span class="st"> </span><span class="dv">100000000</span><span class="op">/</span><span class="st"> </span>share)
    <span class="kw">names</span>(data_value) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;PER&#39;</span>, <span class="st">&#39;PBR&#39;</span>, <span class="st">&#39;PCR&#39;</span>, <span class="st">&#39;PSR&#39;</span>)
    data_value[data_value <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] =<span class="st"> </span><span class="ot">NA</span>
    
  }, <span class="dt">error =</span> <span class="cf">function</span>(e) {
    
    <span class="co"># 오류 발생시 해당 종목명을 출력하고 다음 루프로 이동</span>
    data_fs &lt;&lt;-<span class="st"> </span><span class="ot">NA</span>
    data_value &lt;&lt;-<span class="st"> </span><span class="ot">NA</span>
    <span class="kw">warning</span>(<span class="kw">paste0</span>(<span class="st">&quot;Error in Ticker: &quot;</span>, name))
  })
  
  <span class="co"># 다운로드 받은 파일을 생성한 각각의 폴더 내 csv 파일로 저장</span>
  
  <span class="co"># 재무제표 저장</span>
  <span class="kw">write.csv</span>(data_fs, <span class="kw">paste0</span>(<span class="st">&#39;data/KOR_fs/&#39;</span>, name, <span class="st">&#39;_fs.csv&#39;</span>))
  
  <span class="co"># 가치지표 저장</span>
  <span class="kw">write.csv</span>(data_value, <span class="kw">paste0</span>(<span class="st">&#39;data/KOR_value/&#39;</span>, name, <span class="st">&#39;_value.csv&#39;</span>))
  
  <span class="co"># 2초간 타임슬립 적용</span>
  <span class="kw">Sys.sleep</span>(<span class="dv">2</span>)
}</code></pre>
<p>전종목 주가 데이터를 받는 과정과 동일하게, KOR_ticker.csv 파일을 불러온 후 for loop을 통해 i값이 변함에 따라 티커를 변경해가며 모든 종목의 재무제표 및 가치지표를 다운로드 받습니다. <code>tryCatch()</code> 함수를 이용해 오류가 발생 시 <code>NA</code>로 이루어진 빈 데이터를 저장한 후, 다음 루프로 넘어가게 됩니다.</p>
<p>data/KOR_fs 폴더에는 전 종목의 재무제표 데이터가, data/KOR_value 폴더에는 전 종목의 가치지표 데이터가 csv 형태로 저장되어 있게 됩니다.</p>
</div>
</div>
<div id="section-106" class="section level2">
<h2><span class="header-section-number">6.3</span> 야후 파이낸스 데이터 구하기</h2>
<p>크롤링을 이용하여 데이터를 수집할 경우 주의해야 할 점은, 웹페이지 구조가 변경되는 경우입니다. 웹페이지의 형태가 변경될 경우 이에 맞춰 코드를 다시 짜야합니다. 그러나 최악의 경우는 웹사이트가 폐쇄되는 경우입니다. 실제로 투자자들이 많이 사용하던 구글 파이낸스가 2018년 서비스를 중단함에 따라 이를 이용하던 사이트 및 패키지에서 오류가 발생하기도 했습니다.</p>
<p>이러한 상황에 대비하여 데이터를 구할수 있는 예비 사이트를 알아두어 테스트 코드를 작성해둘 필요가 있으며, 이를 위해 야후 파이낸스에서 데이터 구하는 법을 살펴보도록 하겠습니다. 주가 데이터의 경우 <code>getSymbols()</code> 함수를 통해 야후 파이낸스에서 제공하는 <a href="api-.html#section-10">API를 사용하여 주가를 다운로드 받는 방법</a>을 이미 살펴보았으며, 웹페이지에서 재무제표를 크롤링하는법 및 가치지표를 계산하는 법에 대해 알아보도록 하겠습니다.</p>
<div id="section-107" class="section level3">
<h3><span class="header-section-number">6.3.1</span> 재무제표 다운로드</h3>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-30"></span>
<img src="images/crawl_practice_yahoo.png" alt="야후 파이낸스 재무제표" width="686" />
<p class="caption">
Figure 6.6: 야후 파이낸스 재무제표
</p>
</div>
<p>먼저 야후 파이낸스에 접속하여 삼성전자 티커에 해당하는 <code>005930.KS</code>를 입력합니다. 그 후, 재무제표 데이터에 해당하는 Financials 항목을 선택합니다. 손익계산서(Income Statement), 재무상태표(Balance Sheet), 현금흐름표(Cash Flow) 총 3개 지표가 있으며, 각각의 url은 다음과 같습니다.</p>
<ul>
<li>Income Statement: <a href="https://finance.yahoo.com/quote/005930.KS/financials?p=005930.KS" class="uri">https://finance.yahoo.com/quote/005930.KS/financials?p=005930.KS</a></li>
<li>Balance Sheet: <a href="https://finance.yahoo.com/quote/005930.KS/balance-sheet?p=005930.KS" class="uri">https://finance.yahoo.com/quote/005930.KS/balance-sheet?p=005930.KS</a></li>
<li>Cash Flow: <a href="https://finance.yahoo.com/quote/005930.KS/cash-flow?p=005930.KS" class="uri">https://finance.yahoo.com/quote/005930.KS/cash-flow?p=005930.KS</a></li>
</ul>
<p>각 페이지에서 Xpath를 이용하여 재무제표에 해당하는 테이블 부분만을 선택하여 추출할 수 있으며, 3개 페이지의 해당 Xpath는 모두 아래와 같이 동일합니다.</p>
<pre class="sourceCode html"><code class="sourceCode html">//*[@id=&quot;Col1-1-Financials-Proxy&quot;]/section/div[3]/table</code></pre>
<p>위의 정보를 이용하여 재무제표를 다운로드 받는 과정은 다음과 같습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(httr)
<span class="kw">library</span>(rvest)

url_IS =<span class="st"> &#39;https://finance.yahoo.com/quote/005930.KS/financials?p=005930.KS&#39;</span>
url_BS =<span class="st"> &#39;https://finance.yahoo.com/quote/005930.KS/balance-sheet?p=005930.KS&#39;</span>
url_CF =<span class="st"> &#39;https://finance.yahoo.com/quote/005930.KS/cash-flow?p=005930.KS&#39;</span>

yahoo_finance_xpath =<span class="st"> &#39;//*[@id=&quot;Col1-1-Financials-Proxy&quot;]/section/div[3]/table&#39;</span>

data_IS =<span class="st"> </span><span class="kw">GET</span>(url_IS) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> yahoo_finance_xpath) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_table</span>()

data_BS =<span class="st"> </span><span class="kw">GET</span>(url_BS) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> yahoo_finance_xpath) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_table</span>()

data_CF =<span class="st"> </span><span class="kw">GET</span>(url_CF) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> yahoo_finance_xpath) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_table</span>()

data_fs =<span class="st"> </span><span class="kw">rbind</span>(data_IS, data_BS, data_CF)

<span class="kw">print</span>(<span class="kw">head</span>(data_fs))</code></pre>
<pre><code>##                     X1                 X2                 X3
## 1              Revenue         12/31/2018         12/31/2017
## 2        Total Revenue    243,771,415,000    239,575,376,000
## 3      Cost of Revenue    132,394,411,000    129,290,661,000
## 4         Gross Profit    111,377,004,000    110,284,715,000
## 5   Operating Expenses Operating Expenses Operating Expenses
## 6 Research Development     18,354,080,000     16,355,612,000
##                   X4                 X5
## 1         12/31/2016         12/31/2015
## 2    201,866,745,000    200,653,482,000
## 3    120,277,715,000    123,482,118,000
## 4     81,589,030,000     77,171,364,000
## 5 Operating Expenses Operating Expenses
## 6     14,111,381,000     13,705,695,000</code></pre>
<ol style="list-style-type: decimal">
<li>위에서 구한 url을 저장해줍니다.</li>
<li><code>GET()</code> 함수를 통해 페이지 정보를 받아온 후, <code>read_html()</code> 함수를 통해 html 정보를 받아옵니다.</li>
<li><code>html_node()</code> 함수 내에서 위에서 구한 xpath를 이용해 테이블 부분의 html을 선택한 후, <code>html_table()</code>을 통해 테이블 형태만 추출합니다.</li>
<li>3개 페이지에 위의 내용을 동일하게 적용한 후, <code>rbind()</code>를 이용해 행으로 묶어줍니다.</li>
</ol>
<p>다운로드 받은 데이터를 클랜징 작업을 해주도록 하며, 그 과정은 앞선 예시와 거의 비슷합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)

data_fs =<span class="st"> </span>data_fs[<span class="op">!</span><span class="kw">duplicated</span>(data_fs[, <span class="dv">1</span>]), ]
<span class="kw">rownames</span>(data_fs) =<span class="st"> </span><span class="ot">NULL</span>
<span class="kw">rownames</span>(data_fs) =<span class="st"> </span>data_fs[, <span class="dv">1</span>]

<span class="kw">colnames</span>(data_fs) =<span class="st"> </span>data_fs[<span class="dv">1</span>, ]
data_fs =<span class="st"> </span>data_fs[<span class="op">-</span><span class="dv">1</span>, ]

data_fs =<span class="st"> </span>data_fs[, <span class="kw">substr</span>(<span class="kw">colnames</span>(data_fs), <span class="dv">1</span>,<span class="dv">2</span>) <span class="op">==</span><span class="st"> &quot;12&quot;</span>]

data_fs =<span class="st"> </span><span class="kw">sapply</span>(data_fs, <span class="cf">function</span>(x) {
  <span class="kw">str_replace_all</span>(x, <span class="st">&#39;,&#39;</span>, <span class="st">&#39;&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">as.numeric</span>()
  }) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">data.frame</span>(., <span class="dt">row.names =</span> <span class="kw">rownames</span>(data_fs))

<span class="kw">print</span>(<span class="kw">head</span>(data_fs))</code></pre>
<pre><code>##                                     X12.31.2018  X12.31.2017  X12.31.2016
## Total Revenue                      243771415000 239575376000 201866745000
## Cost of Revenue                    132394411000 129290661000 120277715000
## Gross Profit                       111377004000 110284715000  81589030000
## Operating Expenses                           NA           NA           NA
## Research Development                18354080000  16355612000  14111381000
## Selling General and Administrative  32688565000  38947445000  37235161000
##                                     X12.31.2015
## Total Revenue                      200653482000
## Cost of Revenue                    123482118000
## Gross Profit                        77171364000
## Operating Expenses                           NA
## Research Development                13705695000
## Selling General and Administrative  36081636000</code></pre>
<p>1.<code>!duplicated()</code> 함수를 사용해 중복되지 않는 계정명만을 선택해 줍니다.
4. 행이름을 초기화 한 후, 첫번째 열의 계정명을 행이름으로 변경합니다. 그 후 첫번째 열은 삭제해주도록 합니다.
3. 열이름으로 첫번째 행으로 변경한 후, 해당 행은 삭제해주도록 합니다.
4. <code>substr()</code> 함수를 이용하여 처음 두 글자가 ’12’인 열, 즉 12월 결산 데이터만을 선택해 줍니다.
5. <code>sapply()</code> 함수를 이용해 각 열에 <code>stringr</code> 패키지의 <code>str_replace_allr()</code> 함수를 적용하여 콤마(,)를 제거한 후, <code>as.numeric()</code> 함수를 통해 숫자형 데이터로 변경합니다.
6. <code>data.frame()</code> 함수를 이용해 데이터프레임 형태로 만들어주며, 행이름은 기존 내용을 그대로 유지해줍니다.</p>
</div>
<div id="section-108" class="section level3">
<h3><span class="header-section-number">6.3.2</span> 가치지표 계산하기</h3>
<p>가치지표를 계산하는 과정도 앞선 예시와 거의 비슷합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">value_type =
<span class="st">  </span><span class="kw">c</span>(<span class="st">&#39;Net Income Applicable To Common Shares&#39;</span>, <span class="co"># Earnings</span>
    <span class="st">&#39;Total Stockholder Equity&#39;</span>, <span class="co"># Book Value</span>
    <span class="st">&#39;Total Cash Flow From Operating Activities&#39;</span>, <span class="co"># Cash Flow</span>
    <span class="st">&#39;Total Revenue&#39;</span>) <span class="co"># Sales</span>

value_index =<span class="st"> </span>data_fs[<span class="kw">match</span>(value_type, <span class="kw">rownames</span>(data_fs)), <span class="dv">1</span>]

<span class="kw">print</span>(value_index)</code></pre>
<pre><code>## [1]  43890877000 240068993000  67031863000 243771415000</code></pre>
<p>먼저 분모에 해당하는 항목을 저장한 후, <code>match()</code> 함수를 이용하여 해당 항목이 위치하는 지점을 찾아 데이터를 선택해줍니다.기존 예제와 다른점은, 야후 파이낸스의 경우 최근년도 데이터가 가장 좌측에 위치하므로, 첫번째 열을 선택해 줍니다.</p>
<p>다음으로 현재 주가 및 상장주식수를 구해야 합니다. 해당 데이터는 Statistics 항목에서 구할 수 있습니다. 먼저 현재 주가를 크롤링 하는 방법입니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">url =<span class="st"> &#39;https://finance.yahoo.com/quote/005930.KS/key-statistics?p=005930.KS&#39;</span>
data =<span class="st"> </span><span class="kw">GET</span>(url)

price =<span class="st"> </span><span class="kw">read_html</span>(data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> <span class="st">&#39;//*[@id=&quot;quote-header-info&quot;]/div[3]/div/div/span[1]&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_text</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">str_replace_all</span>(<span class="st">&#39;,&#39;</span>, <span class="st">&#39;&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as.numeric</span>()

<span class="kw">print</span>(price)</code></pre>
<pre><code>## [1] 44000</code></pre>
<ol style="list-style-type: decimal">
<li>해당 페이지 url을 저장 후, <code>GET()</code> 함수를 통해 페이지 정보를 받습니다.</li>
<li><code>read_html()</code> 함수를 이용해 데이터를 받고, <code>html_node()</code> 함수와 Xpath를 이용해 현재 주가에 해당하는 html을 구합니다. 주가의 경우 페이지 상단에서 확인할 수 있습니다.</li>
<li><code>html_text()</code> 함수를 이용해 텍스트 데이터만을 추출한 후, <code>str_replace_all()</code> 함수를 통해 콤마 부분을 삭제해 줍니다. 그리고 <code>as.numeric()</code>을 통해 숫자형 데이터로 변경해 줍니다.</li>
</ol>
<p>이처럼 주가의 경우 상대적으로 쉽게 데이터를 구할 수 있습니다. 다음은 상장주식수 데이터를 크롤링하는 방법입니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">share_yahoo =<span class="st"> </span><span class="kw">read_html</span>(data) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="dt">xpath =</span> <span class="st">&#39;//*[@id=&quot;Col1-0-KeyStatistics-Proxy&quot;]/section/div[2]/div[2]/div/div[2]/table/tbody/tr[3]/td[2]&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_text</span>() 

<span class="kw">print</span>(share_yahoo)</code></pre>
<pre><code>## [1] &quot;5.97B&quot;</code></pre>
<p>상장주식수의 경우 <strong>Shares Outstanding</strong> 부분에서 찾을 수 있습니다. 해당 지점의 Xpath를 이용해 데이터를 찾으면 5.97B가 추출됩니다. 이 중 숫자 뒤 알파벳 부분은 단위에 해당하는 부분이며, 각 문자 별 단위는 다음과 같습니다.</p>
<table>
<caption><span id="tab:unnamed-chunk-37">Table 6.3: </span>발행주식수 단위</caption>
<thead>
<tr class="header">
<th align="left">알파벳</th>
<th align="left">단위</th>
<th align="left">숫자</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">M</td>
<td align="left">백만 (Million)</td>
<td align="left">1,000,000</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="left">십억 (Billion)</td>
<td align="left">1,000,000,000</td>
</tr>
<tr class="odd">
<td align="left">T</td>
<td align="left">일조 (Triliion)</td>
<td align="left">1,000,000,000,000</td>
</tr>
</tbody>
</table>
<p>따라서 알파벳을 해당하는 숫자로 변경한 뒤, 이를 앞의 숫자에 곱해주어야 제대로된 상장주식수가 계산됩니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)

share_unit =<span class="st"> </span><span class="kw">str_match</span>(share_yahoo, <span class="st">&#39;[a-zA-Z]&#39;</span>)
<span class="kw">print</span>(share_unit)</code></pre>
<pre><code>##      [,1]
## [1,] &quot;B&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">share_multiplier =<span class="st"> </span><span class="cf">switch</span>(share_unit, 
       <span class="st">&#39;M&#39;</span> =<span class="st"> </span>{ <span class="dv">1000000</span> },
       <span class="st">&#39;B&#39;</span> =<span class="st"> </span>{ <span class="dv">1000000000</span> },
       <span class="st">&#39;T&#39;</span> =<span class="st"> </span>{ <span class="dv">1000000000000</span> }
)
<span class="kw">print</span>(share_multiplier)</code></pre>
<pre><code>## [1] 1e+09</code></pre>
<p>먼저 <code>str_match()</code> 함수 내에서 정규표현식<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>을 사용하여 알파벳을 추출한 후, 이를 share_unit에 저장합니다. 그 후, <code>switch</code> 구문을 이용하여 해당 알파벳에 해당하는 숫자를 share_multiplier에 저장해줍니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">share_yahoo =<span class="st"> </span>share_yahoo <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">str_match</span>(<span class="st">&#39;[0-9.0-9]*&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>()
share_yahoo =<span class="st"> </span>share_yahoo <span class="op">*</span><span class="st"> </span>share_multiplier

<span class="kw">print</span>(share_yahoo)</code></pre>
<pre><code>## [1] 5.97e+09</code></pre>
<p>숫자 부분과 위에서 구한 단위 부분을 곱하여 최종 발행주식수를 구하도록 하겠습니다. 먼저 <code>str_match()</code> 함수 내에 정규표현식을 이용하여 숫자에 해당하는 부분만 추출한 후, <code>as.numeric()</code>을 통해 숫자 형태로 변경합니다. 그 후 단위에 해당하는 숫자를 곱해 최종값을 구하도록 합니다.</p>
<p>위에서 구한 재무데이터, 현재주가, 발행주식수를 이용하여 가치지표를 계산하도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">data_value_yahoo =<span class="st"> </span>price <span class="op">/</span><span class="st"> </span>(value_index <span class="op">*</span><span class="st"> </span><span class="dv">1000</span><span class="op">/</span><span class="st"> </span>share_yahoo)
<span class="kw">names</span>(data_value_yahoo) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;PER&#39;</span>, <span class="st">&#39;PBR&#39;</span>, <span class="st">&#39;PCR&#39;</span>, <span class="st">&#39;PSR&#39;</span>)

data_value_yahoo[data_value_yahoo <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] =<span class="st"> </span><span class="ot">NA</span>
<span class="kw">print</span>(data_value_yahoo)</code></pre>
<pre><code>##      PER      PBR      PCR      PSR 
## 5.984843 1.094185 3.918733 1.077567</code></pre>
<p>분자에는 주가를, 분모에는 재무 데이터를 보통주 발행주식수로 나눈 값을 입력합니다. 야후 파이낸스의 재무 데이터는 천원 단위이므로, 둘 간의 단위를 동일하게 맞춰주기 위해 분모에 천을 곱해 줍니다. 또한 가치지표가 음수인 경우는<code>NA</code>로 변경해주도록 합니다.</p>
<p>결과를 확인해보면 4가지 가치지표가 잘 계산되었습니다. Company Guide에서 구한 값과는 재무데이터의 차이로 인해 미세한 차이가 있지만, 이는 무시해도 될 정도입니다.</p>
<table>
<caption><span id="tab:unnamed-chunk-41">Table 6.4: </span>두 사이트의 가치지표 비교</caption>
<thead>
<tr class="header">
<th></th>
<th align="right">PER</th>
<th align="right">PBR</th>
<th align="right">PCR</th>
<th align="right">PSR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Company Guide</td>
<td align="right">5.98</td>
<td align="right">1.06</td>
<td align="right">3.92</td>
<td align="right">1.08</td>
</tr>
<tr class="even">
<td>야후 파이낸스</td>
<td align="right">5.98</td>
<td align="right">1.09</td>
<td align="right">3.92</td>
<td align="right">1.08</td>
</tr>
</tbody>
</table>
<p>해당 방법 또한 url의 티커 부분만 변경하면 전 종목의 재무제표와 가치지표 데이터를 다운로드 받을 수 있습니다. 그러나 주의해야 할점은 코스피 종목은 끝이 .KS, 코스닥 종목은 끝이 .KQ가 되어야 합니다. 자세한 코드는 생략하도록 하겠습니다.</p>
<p><span class="citation">(Xie <a href="#ref-xie2015">2015</a>)</span></p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-xie2015">
<p>Xie, Yihui. 2015. <em>Dynamic Documents with R and Knitr</em>. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. <a href="http://yihui.name/knitr/">http://yihui.name/knitr/</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="https://finance.naver.com/item/fchart.nhn?code=005930" class="uri">https://finance.naver.com/item/fchart.nhn?code=005930</a><a href="section-98.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p><a href="http://comp.fnguide.com/" class="uri">http://comp.fnguide.com/</a><a href="section-98.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>분모에 사용되는 재무데이터의 구체적인 항목과 발행주식수를 계산하는 방법의 차이로 인해 여러 업체에서 제공하는 가치지표와 다소 차이가 발생할 수 있습니다.<a href="section-98.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>특정한 규칙을 가진 문자열의 집합을 표현하는데 사용하는 형식 언어이며, 이는 본 책의 범위를 넘어가므로 설명은 생략하도록 합니다.<a href="section-98.html#fnref4" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="section-17.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="section-109.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
