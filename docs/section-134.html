<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 퀀트 전략을 이용한 종목선정 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기</title>
  <meta name="description" content="Chapter 10 퀀트 전략을 이용한 종목선정 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 퀀트 전략을 이용한 종목선정 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 퀀트 전략을 이용한 종목선정 (심화) | 퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기" />
  
  
  

<meta name="author" content="이현열" />


<meta name="date" content="2019-06-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="section-120.html">
<link rel="next" href="section-143.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-7.0.1/css/motion.css" rel="stylesheet" />
<link href="libs/highcharts-7.0.1/css/htmlwdgtgrid.css" rel="stylesheet" />
<script src="libs/highcharts-7.0.1/highcharts.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-3d.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-more.js"></script>
<script src="libs/highcharts-7.0.1/modules/stock.js"></script>
<script src="libs/highcharts-7.0.1/modules/map.js"></script>
<script src="libs/highcharts-7.0.1/modules/annotations.js"></script>
<script src="libs/highcharts-7.0.1/modules/boost.js"></script>
<script src="libs/highcharts-7.0.1/modules/data.js"></script>
<script src="libs/highcharts-7.0.1/modules/drag-panes.js"></script>
<script src="libs/highcharts-7.0.1/modules/drilldown.js"></script>
<script src="libs/highcharts-7.0.1/modules/item-series.js"></script>
<script src="libs/highcharts-7.0.1/modules/offline-exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-7.0.1/modules/exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/export-data.js"></script>
<script src="libs/highcharts-7.0.1/modules/funnel.js"></script>
<script src="libs/highcharts-7.0.1/modules/heatmap.js"></script>
<script src="libs/highcharts-7.0.1/modules/treemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/sankey.js"></script>
<script src="libs/highcharts-7.0.1/modules/solid-gauge.js"></script>
<script src="libs/highcharts-7.0.1/modules/streamgraph.js"></script>
<script src="libs/highcharts-7.0.1/modules/sunburst.js"></script>
<script src="libs/highcharts-7.0.1/modules/vector.js"></script>
<script src="libs/highcharts-7.0.1/modules/wordcloud.js"></script>
<script src="libs/highcharts-7.0.1/modules/xrange.js"></script>
<script src="libs/highcharts-7.0.1/modules/tilemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/venn.js"></script>
<script src="libs/highcharts-7.0.1/modules/gantt.js"></script>
<script src="libs/highcharts-7.0.1/modules/timeline.js"></script>
<script src="libs/highcharts-7.0.1/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-7.0.1/plugins/grouped-categories.js"></script>
<script src="libs/highcharts-7.0.1/plugins/motion.js"></script>
<script src="libs/highcharts-7.0.1/plugins/multicolor_series.js"></script>
<script src="libs/highcharts-7.0.1/custom/reset.js"></script>
<script src="libs/highcharts-7.0.1/custom/symbols-extra.js"></script>
<script src="libs/highcharts-7.0.1/custom/text-symbols.js"></script>
<script src="libs/highchart-binding-0.7.0/highchart.js"></script>
<script src="libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.46.1/plotly-latest.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">퀀트 투자 쿡북</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>여는 글</a></li>
<li class="chapter" data-level="1" data-path="section-1.html"><a href="section-1.html"><i class="fa fa-check"></i><b>1</b> 퀀트 투자의 심장: 데이터와 프로그래밍</a><ul>
<li class="chapter" data-level="1.1" data-path="section-1.html"><a href="section-1.html#section-2"><i class="fa fa-check"></i><b>1.1</b> 데이터 구하기</a></li>
<li class="chapter" data-level="1.2" data-path="section-1.html"><a href="section-1.html#section-3"><i class="fa fa-check"></i><b>1.2</b> 퀀트 투자와 프로그래밍</a></li>
<li class="chapter" data-level="1.3" data-path="section-1.html"><a href="section-1.html#r-"><i class="fa fa-check"></i><b>1.3</b> R 프로그램</a></li>
<li class="chapter" data-level="1.4" data-path="section-1.html"><a href="section-1.html#r--1"><i class="fa fa-check"></i><b>1.4</b> 퀀트 투자에 유용한 R 패키지</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="section-4.html"><a href="section-4.html"><i class="fa fa-check"></i><b>2</b> 크롤링을 위한 기본 지식</a><ul>
<li class="chapter" data-level="2.1" data-path="section-4.html"><a href="section-4.html#r-utf-8-"><i class="fa fa-check"></i><b>2.1</b> 인코딩의 이해와 R에서 UTF-8 설정하기</a><ul>
<li class="chapter" data-level="2.1.1" data-path="section-4.html"><a href="section-4.html#ascii"><i class="fa fa-check"></i><b>2.1.1</b> 인간과 컴퓨터 간 번역의 시작, ASCII</a></li>
<li class="chapter" data-level="2.1.2" data-path="section-4.html"><a href="section-4.html#section-5"><i class="fa fa-check"></i><b>2.1.2</b> 한글 인코딩의 종류</a></li>
<li class="chapter" data-level="2.1.3" data-path="section-4.html"><a href="section-4.html#r-utf-8--1"><i class="fa fa-check"></i><b>2.1.3</b> R에서 UTF-8 설정하기</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="section-4.html"><a href="section-4.html#section-6"><i class="fa fa-check"></i><b>2.2</b> 웹의 동작 방식</a><ul>
<li class="chapter" data-level="2.2.1" data-path="section-4.html"><a href="section-4.html#http"><i class="fa fa-check"></i><b>2.2.1</b> HTTP</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="section-4.html"><a href="section-4.html#html-css-"><i class="fa fa-check"></i><b>2.3</b> HTML과 CSS 이해하기</a><ul>
<li class="chapter" data-level="2.3.1" data-path="section-4.html"><a href="section-4.html#html--"><i class="fa fa-check"></i><b>2.3.1</b> HTML 기본 구조</a></li>
<li class="chapter" data-level="2.3.2" data-path="section-4.html"><a href="section-4.html#section-7"><i class="fa fa-check"></i><b>2.3.2</b> 태그와 속성</a></li>
<li class="chapter" data-level="2.3.3" data-path="section-4.html"><a href="section-4.html#h--p-"><i class="fa fa-check"></i><b>2.3.3</b> h 태그와 p 태그</a></li>
<li class="chapter" data-level="2.3.4" data-path="section-4.html"><a href="section-4.html#ul-ol-"><i class="fa fa-check"></i><b>2.3.4</b> 리스트: ul과 ol 태그</a></li>
<li class="chapter" data-level="2.3.5" data-path="section-4.html"><a href="section-4.html#table-"><i class="fa fa-check"></i><b>2.3.5</b> table 태그</a></li>
<li class="chapter" data-level="2.3.6" data-path="section-4.html"><a href="section-4.html#a-src--"><i class="fa fa-check"></i><b>2.3.6</b> a, src 태그와 속성</a></li>
<li class="chapter" data-level="2.3.7" data-path="section-4.html"><a href="section-4.html#div-"><i class="fa fa-check"></i><b>2.3.7</b> div 태그</a></li>
<li class="chapter" data-level="2.3.8" data-path="section-4.html"><a href="section-4.html#css"><i class="fa fa-check"></i><b>2.3.8</b> CSS</a></li>
<li class="chapter" data-level="2.3.9" data-path="section-4.html"><a href="section-4.html#class-id"><i class="fa fa-check"></i><b>2.3.9</b> class와 id</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="section-4.html"><a href="section-4.html#section-8"><i class="fa fa-check"></i><b>2.4</b> 파이프 오퍼레이터 (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="2.5" data-path="section-4.html"><a href="section-4.html#section-9"><i class="fa fa-check"></i><b>2.5</b> 오류에 대한 예외처리</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="api-.html"><a href="api-.html"><i class="fa fa-check"></i><b>3</b> API를 이용한 데이터 수집</a><ul>
<li class="chapter" data-level="3.1" data-path="api-.html"><a href="api-.html#api--quandl--"><i class="fa fa-check"></i><b>3.1</b> API를 이용한 Quandl 데이터 다운로드</a></li>
<li class="chapter" data-level="3.2" data-path="api-.html"><a href="api-.html#getsymbols---api-"><i class="fa fa-check"></i><b>3.2</b> <code>getSymbols()</code> 함수를 이용한 API 다운로드</a><ul>
<li class="chapter" data-level="3.2.1" data-path="api-.html"><a href="api-.html#section-10"><i class="fa fa-check"></i><b>3.2.1</b> 주가 다운로드</a></li>
<li class="chapter" data-level="3.2.2" data-path="api-.html"><a href="api-.html#section-11"><i class="fa fa-check"></i><b>3.2.2</b> 국내 종목 주가 다운로드</a></li>
<li class="chapter" data-level="3.2.3" data-path="api-.html"><a href="api-.html#fred--"><i class="fa fa-check"></i><b>3.2.3</b> FRED 데이터 다운로드</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="section-12.html"><a href="section-12.html"><i class="fa fa-check"></i><b>4</b> 크롤링 이해하기</a><ul>
<li class="chapter" data-level="4.1" data-path="section-12.html"><a href="section-12.html#get-post--"><i class="fa fa-check"></i><b>4.1</b> GET과 POST 방식 이해하기</a><ul>
<li class="chapter" data-level="4.1.1" data-path="section-12.html"><a href="section-12.html#get-"><i class="fa fa-check"></i><b>4.1.1</b> GET 방식</a></li>
<li class="chapter" data-level="4.1.2" data-path="section-12.html"><a href="section-12.html#post-"><i class="fa fa-check"></i><b>4.1.2</b> POST 방식</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="section-12.html"><a href="section-12.html#section-13"><i class="fa fa-check"></i><b>4.2</b> 크롤링 예제</a><ul>
<li class="chapter" data-level="4.2.1" data-path="section-12.html"><a href="section-12.html#section-14"><i class="fa fa-check"></i><b>4.2.1</b> 금융 속보 크롤링</a></li>
<li class="chapter" data-level="4.2.2" data-path="section-12.html"><a href="section-12.html#section-15"><i class="fa fa-check"></i><b>4.2.2</b> 기업공시채널에서 오늘의 공시 불러오기</a></li>
<li class="chapter" data-level="4.2.3" data-path="section-12.html"><a href="section-12.html#section-16"><i class="fa fa-check"></i><b>4.2.3</b> 네이버 금융에서 주식티커 크롤링</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="section-17.html"><a href="section-17.html"><i class="fa fa-check"></i><b>5</b> 금융 데이터 수집하기 (기본)</a><ul>
<li class="chapter" data-level="5.1" data-path="section-17.html"><a href="section-17.html#section-18"><i class="fa fa-check"></i><b>5.1</b> 한국거래소의 산업별 현황 및 개별지표 크롤링</a><ul>
<li class="chapter" data-level="5.1.1" data-path="section-17.html"><a href="section-17.html#section-19"><i class="fa fa-check"></i><b>5.1.1</b> 산업별 현황 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="section-17.html"><a href="section-17.html#onufrwfkurwr1qeggpehg1guatgdrw97t6hcpzxmimcrw56umz6ofqiq7bipnxojmjzhzrsrq3vkaogmvjjdjflgmxjfyrf2f7jrbk5iah9nggpvzsj5o0d2oos3im2yuwce9gwkgc5ep1nvn7kzgfdumjyizxamomncohg0iang3vxo3gginkgiy4uecdvl9gzplle1ij6ge0plliqcnxjdn4fd8apfgovjmt4shg61nwnfz4rsd1rjn6uqcxjzkzroqhe5hhoa5rowyvt1bfle66z8"><i class="fa fa-check"></i><b>5.2</b> [1] “onU/FrwFkurWr1qEGgPEhg1+Guatgdrw97t+6hCpZxMImcRW5+6UMz6OFQiq7bip/nxOjMJZHzRsRq3VkaoGM/VjjdJflgMXjfYrF2F7JRbK5IAh9NggpvZSj5+O/0D2oOs3Im2yuwce9gWkGC5ep1NvN7K/zg+fdUMJYIzxAmoMNcOHg0IAnG3/vX+o3gGiN+KGiY4+uecdVl9gZPllE1IJ6ge0P/lliQcnxJdN4FD8apfGOVjmT4shG61nwNfZ4rsd1rJN6UQcxJzKzROQHe5hHoa5rOwyvt1bFLE66z8=”</a></li>
<li class="chapter" data-level="5.3" data-path="section-17.html"><a href="section-17.html#a-tibble-2243-x-7"><i class="fa fa-check"></i><b>5.3</b> # A tibble: 2,243 x 7</a></li>
<li class="chapter" data-level="5.4" data-path="section-17.html"><a href="section-17.html#section-20"><i class="fa fa-check"></i><b>5.4</b> 시장구분 종목코드 종목명 산업분류 <code>현재가(종가)</code> 전일대비 <code>시가총액(원)</code></a></li>
<li class="chapter" data-level="5.5" data-path="section-17.html"><a href="section-17.html#section-21"><i class="fa fa-check"></i><b>5.5</b> <chr> <chr> <chr> <chr> <dbl> <dbl> <dbl></a></li>
<li class="chapter" data-level="5.6" data-path="section-17.html"><a href="section-17.html#section-22"><i class="fa fa-check"></i><b>5.6</b> 1 코스피 030720 동원수산~ 어업 8940 -20 41605016700</a></li>
<li class="chapter" data-level="5.7" data-path="section-17.html"><a href="section-17.html#section-23"><i class="fa fa-check"></i><b>5.7</b> 2 코스피 007160 사조산업~ 어업 54400 800 272000000000</a></li>
<li class="chapter" data-level="5.8" data-path="section-17.html"><a href="section-17.html#section-24"><i class="fa fa-check"></i><b>5.8</b> 3 코스피 006040 동원산업~ 어업 246500 500 829028800000</a></li>
<li class="chapter" data-level="5.9" data-path="section-17.html"><a href="section-17.html#section-25"><i class="fa fa-check"></i><b>5.9</b> 4 코스피 004970 신라교역~ 어업 14350 350 229600000000</a></li>
<li class="chapter" data-level="5.10" data-path="section-17.html"><a href="section-17.html#section-26"><i class="fa fa-check"></i><b>5.10</b> 5 코스피 012320 경동인베스~ 광업 40300 1350 95310426900</a></li>
<li class="chapter" data-level="5.11" data-path="section-17.html"><a href="section-17.html#section-27"><i class="fa fa-check"></i><b>5.11</b> 6 코스피 003580 넥스트사이~ 광업 5200 260 122099322800</a></li>
<li class="chapter" data-level="5.12" data-path="section-17.html"><a href="section-17.html#section-28"><i class="fa fa-check"></i><b>5.12</b> 7 코스피 017810 풀무원 음식료품 11300 200 430427735000</a></li>
<li class="chapter" data-level="5.13" data-path="section-17.html"><a href="section-17.html#section-29"><i class="fa fa-check"></i><b>5.13</b> 8 코스피 280360 롯데제과~ 음식료품 159500 -500 1023466361500</a></li>
<li class="chapter" data-level="5.14" data-path="section-17.html"><a href="section-17.html#section-30"><i class="fa fa-check"></i><b>5.14</b> 9 코스피 271560 오리온 음식료품 83300 1400 3293359795600</a></li>
<li class="chapter" data-level="5.15" data-path="section-17.html"><a href="section-17.html#section-31"><i class="fa fa-check"></i><b>5.15</b> 10 코스피 006090 사조오양~ 음식료품 8220 30 77454914580</a></li>
<li class="chapter" data-level="5.16" data-path="section-17.html"><a href="section-17.html#with-2233-more-rows"><i class="fa fa-check"></i><b>5.16</b> # … with 2,233 more rows</a></li>
<li class="chapter" data-level="5.17" data-path="section-17.html"><a href="section-17.html#false"><i class="fa fa-check"></i><b>5.17</b> [1] FALSE</a><ul>
<li class="chapter" data-level="5.17.1" data-path="section-17.html"><a href="section-17.html#section-32"><i class="fa fa-check"></i><b>5.17.1</b> 개별종목 지표 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="5.18" data-path="section-17.html"><a href="section-17.html#a-tibble-2204-x-13"><i class="fa fa-check"></i><b>5.18</b> # A tibble: 2,204 x 13</a></li>
<li class="chapter" data-level="5.19" data-path="section-17.html"><a href="section-17.html#eps-per-bps-pbr"><i class="fa fa-check"></i><b>5.19</b> 일자 종목코드 종목명 관리여부 종가 EPS PER BPS PBR</a></li>
<li class="chapter" data-level="5.20" data-path="section-17.html"><a href="section-17.html#section-33"><i class="fa fa-check"></i><b>5.20</b> <date> <chr> <chr> <chr> <dbl> <chr> <chr> <chr> <chr></a></li>
<li class="chapter" data-level="5.21" data-path="section-17.html"><a href="section-17.html#section-34"><i class="fa fa-check"></i><b>5.21</b> 1 2019-06-07 060300 레드로버~ - 1190 - - 2,128 0.56</a></li>
<li class="chapter" data-level="5.22" data-path="section-17.html"><a href="section-17.html#section-35"><i class="fa fa-check"></i><b>5.22</b> 2 2019-06-07 290650 엘앤씨바이~ - 22750 830 27.41 7,252 3.14</a></li>
<li class="chapter" data-level="5.23" data-path="section-17.html"><a href="section-17.html#section-36"><i class="fa fa-check"></i><b>5.23</b> 3 2019-06-07 239340 미래에셋제~ - 5200 - - - -</a></li>
<li class="chapter" data-level="5.24" data-path="section-17.html"><a href="section-17.html#section-37"><i class="fa fa-check"></i><b>5.24</b> 4 2019-06-07 033430 디에스티~ - 1310 - - 338 3.88</a></li>
<li class="chapter" data-level="5.25" data-path="section-17.html"><a href="section-17.html#section-38"><i class="fa fa-check"></i><b>5.25</b> 5 2019-06-07 038680 에스넷 - 9600 300 32 4,302 2.23</a></li>
<li class="chapter" data-level="5.26" data-path="section-17.html"><a href="section-17.html#section-39"><i class="fa fa-check"></i><b>5.26</b> 6 2019-06-07 214680 디알텍 - 2005 29 69.14 709 2.83</a></li>
<li class="chapter" data-level="5.27" data-path="section-17.html"><a href="section-17.html#section-40"><i class="fa fa-check"></i><b>5.27</b> 7 2019-06-07 242040 나무기술~ - 3345 - - 462 7.24</a></li>
<li class="chapter" data-level="5.28" data-path="section-17.html"><a href="section-17.html#section-41"><i class="fa fa-check"></i><b>5.28</b> 8 2019-06-07 088800 에이스테크~ - 11500 97 118.~ 2,291 5.02</a></li>
<li class="chapter" data-level="5.29" data-path="section-17.html"><a href="section-17.html#section-42"><i class="fa fa-check"></i><b>5.29</b> 9 2019-06-07 121890 에스디시스~ - 4980 - - 1,912 2.6</a></li>
<li class="chapter" data-level="5.30" data-path="section-17.html"><a href="section-17.html#section-43"><i class="fa fa-check"></i><b>5.30</b> 10 2019-06-07 032500 케이엠더블~ - 41200 - - 2,292 17.98</a></li>
<li class="chapter" data-level="5.31" data-path="section-17.html"><a href="section-17.html#with-2194-more-rows-and-4-more-variables-"><i class="fa fa-check"></i><b>5.31</b> # … with 2,194 more rows, and 4 more variables: 주당배당금 <dbl>,</a></li>
<li class="chapter" data-level="5.32" data-path="section-17.html"><a href="section-17.html#section-44"><i class="fa fa-check"></i><b>5.32</b> # 배당수익률 <dbl>, <code>게시물 일련번호</code> <dbl>, 총카운트 <dbl></a><ul>
<li class="chapter" data-level="5.32.1" data-path="section-17.html"><a href="section-17.html#section-45"><i class="fa fa-check"></i><b>5.32.1</b> 데이터 정리하기</a></li>
</ul></li>
<li class="chapter" data-level="5.33" data-path="section-17.html"><a href="section-17.html#section-46"><i class="fa fa-check"></i><b>5.33</b> [1] “종목코드” “종목명”</a></li>
<li class="chapter" data-level="5.34" data-path="section-17.html"><a href="section-17.html#ankor"><i class="fa fa-check"></i><b>5.34</b> [1] “엘브이엠씨홀딩스” “한국패러랠” “한국ANKOR유전”</a></li>
<li class="chapter" data-level="5.35" data-path="section-17.html"><a href="section-17.html#section-47"><i class="fa fa-check"></i><b>5.35</b> [4] “맵스리얼티1” “맥쿼리인프라” “하나니켈2호”</a></li>
<li class="chapter" data-level="5.36" data-path="section-17.html"><a href="section-17.html#section-48"><i class="fa fa-check"></i><b>5.36</b> [7] “하나니켈1호” “베트남개발1” “신한알파리츠”</a></li>
<li class="chapter" data-level="5.37" data-path="section-17.html"><a href="section-17.html#section-49"><i class="fa fa-check"></i><b>5.37</b> [10] “이리츠코크렙” “모두투어리츠” “하이골드12호”</a></li>
<li class="chapter" data-level="5.38" data-path="section-17.html"><a href="section-17.html#section-50"><i class="fa fa-check"></i><b>5.38</b> [13] “하이골드8호” “바다로19호” “하이골드3호”</a></li>
<li class="chapter" data-level="5.39" data-path="section-17.html"><a href="section-17.html#section-51"><i class="fa fa-check"></i><b>5.39</b> [16] “케이탑리츠” “에이리츠” “동북아13호”</a></li>
<li class="chapter" data-level="5.40" data-path="section-17.html"><a href="section-17.html#jtc"><i class="fa fa-check"></i><b>5.40</b> [19] “동북아12호” “컬러레이” “JTC”</a></li>
<li class="chapter" data-level="5.41" data-path="section-17.html"><a href="section-17.html#section-52"><i class="fa fa-check"></i><b>5.41</b> [22] “뉴프라이드” “윙입푸드” “글로벌에스엠”</a></li>
<li class="chapter" data-level="5.42" data-path="section-17.html"><a href="section-17.html#section-53"><i class="fa fa-check"></i><b>5.42</b> [25] “크리스탈신소재” “씨케이에이치” “차이나그레이트”</a></li>
<li class="chapter" data-level="5.43" data-path="section-17.html"><a href="section-17.html#grt"><i class="fa fa-check"></i><b>5.43</b> [28] “골든센츄리” “오가닉티코스메틱” “GRT”</a></li>
<li class="chapter" data-level="5.44" data-path="section-17.html"><a href="section-17.html#section-54"><i class="fa fa-check"></i><b>5.44</b> [31] “로스웰” “헝셩그룹” “이스트아시아홀딩스”</a></li>
<li class="chapter" data-level="5.45" data-path="section-17.html"><a href="section-17.html#snk-sbi"><i class="fa fa-check"></i><b>5.45</b> [34] “에스앤씨엔진그룹” “SNK” “SBI핀테크솔루션즈”</a></li>
<li class="chapter" data-level="5.46" data-path="section-17.html"><a href="section-17.html#section-55"><i class="fa fa-check"></i><b>5.46</b> [37] “잉글우드랩” “코오롱티슈진” “엑세스바이오”</a></li>
<li class="chapter" data-level="5.47" data-path="section-17.html"><a href="section-17.html#section-56"><i class="fa fa-check"></i><b>5.47</b> 종목코드 종목명 시장구분 산업분류 현재가.종가. 전일대비</a></li>
<li class="chapter" data-level="5.48" data-path="section-17.html"><a href="section-17.html#section-57"><i class="fa fa-check"></i><b>5.48</b> 330 005930 삼성전자 코스피 전기전자 44200 300</a></li>
<li class="chapter" data-level="5.49" data-path="section-17.html"><a href="section-17.html#sk---65400-300"><i class="fa fa-check"></i><b>5.49</b> 45 000660 SK하이닉스 코스피 전기전자 65400 300</a></li>
<li class="chapter" data-level="5.50" data-path="section-17.html"><a href="section-17.html#section-58"><i class="fa fa-check"></i><b>5.50</b> 301 005380 현대차 코스피 운수장비 140000 -1000</a></li>
<li class="chapter" data-level="5.51" data-path="section-17.html"><a href="section-17.html#section-59"><i class="fa fa-check"></i><b>5.51</b> 331 005935 삼성전자우 코스피 전기전자 36250 200</a></li>
<li class="chapter" data-level="5.52" data-path="section-17.html"><a href="section-17.html#section-60"><i class="fa fa-check"></i><b>5.52</b> 1278 068270 셀트리온 코스피 의약품 196500 500</a></li>
<li class="chapter" data-level="5.53" data-path="section-17.html"><a href="section-17.html#lg---330500--1000"><i class="fa fa-check"></i><b>5.53</b> 1082 051910 LG화학 코스피 화학 330500 -1000</a></li>
<li class="chapter" data-level="5.54" data-path="section-17.html"><a href="section-17.html#eps-per-bps-pbr-1"><i class="fa fa-check"></i><b>5.54</b> 시가총액.원. 일자 관리여부 종가 EPS PER BPS PBR</a></li>
<li class="chapter" data-level="5.55" data-path="section-17.html"><a href="section-17.html#e14-2019-06-07---44200-6461-6.84-35342-1.25"><i class="fa fa-check"></i><b>5.55</b> 330 2.638644e+14 2019-06-07 - 44200 6,461 6.84 35,342 1.25</a></li>
<li class="chapter" data-level="5.56" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---65400-22255-2.94-64348-1.02"><i class="fa fa-check"></i><b>5.56</b> 45 4.761135e+13 2019-06-07 - 65400 22,255 2.94 64,348 1.02</a></li>
<li class="chapter" data-level="5.57" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---140000-5632-24.86-245447-0.57"><i class="fa fa-check"></i><b>5.57</b> 301 2.991355e+13 2019-06-07 - 140000 5,632 24.86 245,447 0.57</a></li>
<li class="chapter" data-level="5.58" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---36250--------"><i class="fa fa-check"></i><b>5.58</b> 331 2.982964e+13 2019-06-07 - 36250 - - - -</a></li>
<li class="chapter" data-level="5.59" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---196500-2063-95.25-19766-9.94"><i class="fa fa-check"></i><b>5.59</b> 1278 2.521666e+13 2019-06-07 - 196500 2,063 95.25 19,766 9.94</a></li>
<li class="chapter" data-level="5.60" data-path="section-17.html"><a href="section-17.html#e13-2019-06-07---330500-19217-17.2-218227-1.51"><i class="fa fa-check"></i><b>5.60</b> 1082 2.333077e+13 2019-06-07 - 330500 19,217 17.2 218,227 1.51</a></li>
<li class="chapter" data-level="5.61" data-path="section-17.html"><a href="section-17.html#section-61"><i class="fa fa-check"></i><b>5.61</b> 주당배당금 배당수익률 게시물..일련번호 총카운트</a></li>
<li class="chapter" data-level="5.62" data-path="section-17.html"><a href="section-17.html#na"><i class="fa fa-check"></i><b>5.62</b> 330 1416 3.20 1458 NA</a></li>
<li class="chapter" data-level="5.63" data-path="section-17.html"><a href="section-17.html#na-1"><i class="fa fa-check"></i><b>5.63</b> 45 1500 2.29 1410 NA</a></li>
<li class="chapter" data-level="5.64" data-path="section-17.html"><a href="section-17.html#na-2"><i class="fa fa-check"></i><b>5.64</b> 301 4000 2.86 1452 NA</a></li>
<li class="chapter" data-level="5.65" data-path="section-17.html"><a href="section-17.html#na-3"><i class="fa fa-check"></i><b>5.65</b> 331 1417 3.91 2095 NA</a></li>
<li class="chapter" data-level="5.66" data-path="section-17.html"><a href="section-17.html#na-4"><i class="fa fa-check"></i><b>5.66</b> 1278 0 0.00 1597 NA</a></li>
<li class="chapter" data-level="5.67" data-path="section-17.html"><a href="section-17.html#na-5"><i class="fa fa-check"></i><b>5.67</b> 1082 6000 1.82 1538 NA</a></li>
<li class="chapter" data-level="5.68" data-path="section-17.html"><a href="section-17.html#section-62"><i class="fa fa-check"></i><b>5.68</b> [1] “미래에셋제5호스팩” “한화에스비아이스팩” “엔에이치스팩14호”</a></li>
<li class="chapter" data-level="5.69" data-path="section-17.html"><a href="section-17.html#section-63"><i class="fa fa-check"></i><b>5.69</b> [4] “엔에이치스팩10호” “엔에이치스팩12호” “삼성스팩2호”</a></li>
<li class="chapter" data-level="5.70" data-path="section-17.html"><a href="section-17.html#section-64"><i class="fa fa-check"></i><b>5.70</b> [7] “대신밸런스제5호스팩” “케이비제10호스팩” “엔에이치스팩11호”</a></li>
<li class="chapter" data-level="5.71" data-path="section-17.html"><a href="section-17.html#section-65"><i class="fa fa-check"></i><b>5.71</b> [10] “유진스팩4호” “신한제4호스팩” “하나금융11호스팩”</a></li>
<li class="chapter" data-level="5.72" data-path="section-17.html"><a href="section-17.html#db7-sk4"><i class="fa fa-check"></i><b>5.72</b> [13] “케이비17호스팩” “DB금융스팩7호” “SK4호스팩”</a></li>
<li class="chapter" data-level="5.73" data-path="section-17.html"><a href="section-17.html#section-66"><i class="fa fa-check"></i><b>5.73</b> [16] “한국제7호스팩” “대신밸런스제6호스팩” “미래에셋대우스팩1호”</a></li>
<li class="chapter" data-level="5.74" data-path="section-17.html"><a href="section-17.html#ibks5-5"><i class="fa fa-check"></i><b>5.74</b> [19] “대신밸런스제4호스팩” “IBKS제5호스팩” “동부스팩5호”</a></li>
<li class="chapter" data-level="5.75" data-path="section-17.html"><a href="section-17.html#db6-6-10"><i class="fa fa-check"></i><b>5.75</b> [22] “DB금융스팩6호” “하나머스트제6호스팩” “하나금융10호스팩”</a></li>
<li class="chapter" data-level="5.76" data-path="section-17.html"><a href="section-17.html#section-67"><i class="fa fa-check"></i><b>5.76</b> [25] “삼성머스트스팩3호” “유안타제4호스팩” “한국제6호스팩”</a></li>
<li class="chapter" data-level="5.77" data-path="section-17.html"><a href="section-17.html#ibks6-4-"><i class="fa fa-check"></i><b>5.77</b> [28] “IBKS제6호스팩” “신영스팩4호” “한화수성스팩”</a></li>
<li class="chapter" data-level="5.78" data-path="section-17.html"><a href="section-17.html#ibks10-4-9"><i class="fa fa-check"></i><b>5.78</b> [31] “IBKS제10호스팩” “하이제4호스팩” “하나금융9호스팩”</a></li>
<li class="chapter" data-level="5.79" data-path="section-17.html"><a href="section-17.html#section-68"><i class="fa fa-check"></i><b>5.79</b> [34] “유안타제3호스팩” “교보7호스팩” “한국제5호스팩”</a></li>
<li class="chapter" data-level="5.80" data-path="section-17.html"><a href="section-17.html#ibks9-8-ibks7"><i class="fa fa-check"></i><b>5.80</b> [37] “IBKS제9호스팩” “교보8호스팩” “IBKS제7호스팩”</a></li>
<li class="chapter" data-level="5.81" data-path="section-17.html"><a href="section-17.html#sk3"><i class="fa fa-check"></i><b>5.81</b> [40] “신한제3호스팩” “키움제5호스팩” “SK3호스팩”</a></li>
<li class="chapter" data-level="5.82" data-path="section-17.html"><a href="section-17.html#section-69"><i class="fa fa-check"></i><b>5.82</b> [43] “한국제8호스팩” “한화에이스스팩4호” “엔에이치스팩13호”</a></li>
<li class="chapter" data-level="5.83" data-path="section-17.html"><a href="section-17.html#section-70"><i class="fa fa-check"></i><b>5.83</b> [46] “미래에셋대우스팩2호” “한화에이스스팩3호” “케이비제11호스팩”</a></li>
<li class="chapter" data-level="5.84" data-path="section-17.html"><a href="section-17.html#section-71"><i class="fa fa-check"></i><b>5.84</b> [1] “골든브릿지이안5호”</a></li>
<li class="chapter" data-level="5.85" data-path="section-17.html"><a href="section-17.html#section-72"><i class="fa fa-check"></i><b>5.85</b> [1] “삼성전자우” “미래에셋대우” “현대차우”</a></li>
<li class="chapter" data-level="5.86" data-path="section-17.html"><a href="section-17.html#lg-lg-"><i class="fa fa-check"></i><b>5.86</b> [4] “LG생활건강우” “LG화학우” “아모레퍼시픽우”</a></li>
<li class="chapter" data-level="5.87" data-path="section-17.html"><a href="section-17.html#lg-"><i class="fa fa-check"></i><b>5.87</b> [7] “삼성화재우” “LG전자우” “신영증권우”</a></li>
<li class="chapter" data-level="5.88" data-path="section-17.html"><a href="section-17.html#section-73"><i class="fa fa-check"></i><b>5.88</b> [10] “연우” “두산우” “한국금융지주우”</a></li>
<li class="chapter" data-level="5.89" data-path="section-17.html"><a href="section-17.html#s-oil-"><i class="fa fa-check"></i><b>5.89</b> [13] “대신증권우” “S-Oil우” “대림산업우”</a></li>
<li class="chapter" data-level="5.90" data-path="section-17.html"><a href="section-17.html#nh-g-cj-"><i class="fa fa-check"></i><b>5.90</b> [16] “NH투자증권우” “아모레G우” “CJ제일제당 우”</a></li>
<li class="chapter" data-level="5.91" data-path="section-17.html"><a href="section-17.html#lg-sk-sdi"><i class="fa fa-check"></i><b>5.91</b> [19] “LG우” “SK이노베이션우” “삼성SDI우”</a></li>
<li class="chapter" data-level="5.92" data-path="section-17.html"><a href="section-17.html#cj-"><i class="fa fa-check"></i><b>5.92</b> [22] “삼성전기우” “CJ우” “금호석유우”</a></li>
<li class="chapter" data-level="5.93" data-path="section-17.html"><a href="section-17.html#sk-gs-"><i class="fa fa-check"></i><b>5.93</b> [25] “SK우” “GS우” “미래에셋대우우”</a></li>
<li class="chapter" data-level="5.94" data-path="section-17.html"><a href="section-17.html#section-74"><i class="fa fa-check"></i><b>5.94</b> [28] “롯데칠성우” “부국증권우” “코오롱인더우”</a></li>
<li class="chapter" data-level="5.95" data-path="section-17.html"><a href="section-17.html#section-75"><i class="fa fa-check"></i><b>5.95</b> [31] “롯데지주우” “유한양행우” “유화증권우”</a></li>
<li class="chapter" data-level="5.96" data-path="section-17.html"><a href="section-17.html#sk-"><i class="fa fa-check"></i><b>5.96</b> [34] “호텔신라우” “SK케미칼우” “남양유업우”</a></li>
<li class="chapter" data-level="5.97" data-path="section-17.html"><a href="section-17.html#lg-byc"><i class="fa fa-check"></i><b>5.97</b> [37] “한진칼우” “LG하우시스우” “BYC우”</a></li>
<li class="chapter" data-level="5.98" data-path="section-17.html"><a href="section-17.html#section-76"><i class="fa fa-check"></i><b>5.98</b> [40] “유안타증권우” “대한항공우” “세방우”</a></li>
<li class="chapter" data-level="5.99" data-path="section-17.html"><a href="section-17.html#sk-1-"><i class="fa fa-check"></i><b>5.99</b> [43] “SK디스커버리우” “대덕전자1우” “태영건설우”</a></li>
<li class="chapter" data-level="5.100" data-path="section-17.html"><a href="section-17.html#section-77"><i class="fa fa-check"></i><b>5.100</b> [46] “대상우” “금호산업우” “한화우”</a></li>
<li class="chapter" data-level="5.101" data-path="section-17.html"><a href="section-17.html#section-78"><i class="fa fa-check"></i><b>5.101</b> [49] “현대건설우” “한화케미칼우” “삼양홀딩스우”</a></li>
<li class="chapter" data-level="5.102" data-path="section-17.html"><a href="section-17.html#section-79"><i class="fa fa-check"></i><b>5.102</b> [52] “녹십자홀딩스2우” “신풍제약우” “삼양사우”</a></li>
<li class="chapter" data-level="5.103" data-path="section-17.html"><a href="section-17.html#sk--1"><i class="fa fa-check"></i><b>5.103</b> [55] “넥센우” “SK증권우” “남선알미우”</a></li>
<li class="chapter" data-level="5.104" data-path="section-17.html"><a href="section-17.html#npc"><i class="fa fa-check"></i><b>5.104</b> [58] “코오롱우” “계양전기우” “NPC우”</a></li>
<li class="chapter" data-level="5.105" data-path="section-17.html"><a href="section-17.html#sk--2"><i class="fa fa-check"></i><b>5.105</b> [61] “한화투자증권우” “SK네트웍스우” “태양금속우”</a></li>
<li class="chapter" data-level="5.106" data-path="section-17.html"><a href="section-17.html#section-80"><i class="fa fa-check"></i><b>5.106</b> [64] “쌍용양회우” “서울식품우” “성문전자우”</a></li>
<li class="chapter" data-level="5.107" data-path="section-17.html"><a href="section-17.html#section-81"><i class="fa fa-check"></i><b>5.107</b> [67] “대원전선우” “일양약품우” “성신양회우”</a></li>
<li class="chapter" data-level="5.108" data-path="section-17.html"><a href="section-17.html#section-82"><i class="fa fa-check"></i><b>5.108</b> [70] “대한제당우” “유유제약1우” “코리아써우”</a></li>
<li class="chapter" data-level="5.109" data-path="section-17.html"><a href="section-17.html#cj1"><i class="fa fa-check"></i><b>5.109</b> [73] “크라운해태홀딩스우” “동원시스템즈우” “CJ씨푸드1우”</a></li>
<li class="chapter" data-level="5.110" data-path="section-17.html"><a href="section-17.html#section-83"><i class="fa fa-check"></i><b>5.110</b> [76] “현대비앤지스틸우” “삼성중공우” “금강공업우”</a></li>
<li class="chapter" data-level="5.111" data-path="section-17.html"><a href="section-17.html#section-84"><i class="fa fa-check"></i><b>5.111</b> [79] “대호피앤씨우” “크라운제과우” “동부제철우”</a></li>
<li class="chapter" data-level="5.112" data-path="section-17.html"><a href="section-17.html#section-85"><i class="fa fa-check"></i><b>5.112</b> [82] “깨끗한나라우” “노루페인트우” “대상홀딩스우”</a></li>
<li class="chapter" data-level="5.113" data-path="section-17.html"><a href="section-17.html#section-86"><i class="fa fa-check"></i><b>5.113</b> [85] “덕성우” “코오롱글로벌우” “동양우”</a></li>
<li class="chapter" data-level="5.114" data-path="section-17.html"><a href="section-17.html#db1-"><i class="fa fa-check"></i><b>5.114</b> [88] “신원우” “DB하이텍1우” “하이트진로홀딩스우”</a></li>
<li class="chapter" data-level="5.115" data-path="section-17.html"><a href="section-17.html#jw-"><i class="fa fa-check"></i><b>5.115</b> [91] “흥국화재우” “JW중외제약우” “한양증권우”</a></li>
<li class="chapter" data-level="5.116" data-path="section-17.html"><a href="section-17.html#section-87"><i class="fa fa-check"></i><b>5.116</b> [94] “동부건설우” “노루홀딩스우” “소프트센우”</a></li>
<li class="chapter" data-level="5.117" data-path="section-17.html"><a href="section-17.html#b-2b-3b"><i class="fa fa-check"></i><b>5.117</b> [1] “현대차2우B” “미래에셋대우2우B” “한화3우B”</a></li>
<li class="chapter" data-level="5.118" data-path="section-17.html"><a href="section-17.html#b-b-b"><i class="fa fa-check"></i><b>5.118</b> [4] “현대차3우B” “삼성물산우B” “대교우B”</a></li>
<li class="chapter" data-level="5.119" data-path="section-17.html"><a href="section-17.html#b-2b-1b"><i class="fa fa-check"></i><b>5.119</b> [7] “대신증권2우B” “두산2우B” “넥센타이어1우B”</a></li>
<li class="chapter" data-level="5.120" data-path="section-17.html"><a href="section-17.html#b-2b-b"><i class="fa fa-check"></i><b>5.120</b> [10] “하이트진로2우B” “진흥기업2우B” “진흥기업우B”</a></li>
<li class="chapter" data-level="5.121" data-path="section-17.html"><a href="section-17.html#jw2b-2b-2b"><i class="fa fa-check"></i><b>5.121</b> [13] “JW중외제약2우B” “흥국화재2우B” “코리아써키트2우B”</a></li>
<li class="chapter" data-level="5.122" data-path="section-17.html"><a href="section-17.html#b-2b-3b-1"><i class="fa fa-check"></i><b>5.122</b> [16] “유유제약2우B” “동양2우B” “대한제당3우B”</a></li>
<li class="chapter" data-level="5.123" data-path="section-17.html"><a href="section-17.html#b"><i class="fa fa-check"></i><b>5.123</b> [19] “동양3우B”</a></li>
<li class="chapter" data-level="5.124" data-path="section-17.html"><a href="section-17.html#c"><i class="fa fa-check"></i><b>5.124</b> [1] “루트로닉3우C”</a></li>
<li class="chapter" data-level="5.125" data-path="section-17.html"><a href="section-17.html#wics---"><i class="fa fa-check"></i><b>5.125</b> WICS 기준 섹터정보 크롤링</a></li>
<li class="chapter" data-level="5.126" data-path="section-17.html"><a href="section-17.html#info"><i class="fa fa-check"></i><b>5.126</b> $info</a></li>
<li class="chapter" data-level="5.127" data-path="section-17.html"><a href="section-17.html#infotrd_dt"><i class="fa fa-check"></i><b>5.127</b> <span class="math inline">\(info\)</span>TRD_DT</a></li>
<li class="chapter" data-level="5.128" data-path="section-17.html"><a href="section-17.html#date1559833200000"><i class="fa fa-check"></i><b>5.128</b> [1] “/Date(1559833200000)/”</a></li>
<li class="chapter" data-level="5.129" data-path="section-17.html"><a href="section-17.html#section-88"><i class="fa fa-check"></i><b>5.129</b> </a></li>
<li class="chapter" data-level="5.130" data-path="section-17.html"><a href="section-17.html#infomkt_val"><i class="fa fa-check"></i><b>5.130</b> <span class="math inline">\(info\)</span>MKT_VAL</a></li>
<li class="chapter" data-level="5.131" data-path="section-17.html"><a href="section-17.html#section-89"><i class="fa fa-check"></i><b>5.131</b> [1] 19850082</a></li>
<li class="chapter" data-level="5.132" data-path="section-17.html"><a href="section-17.html#section-90"><i class="fa fa-check"></i><b>5.132</b> </a></li>
<li class="chapter" data-level="5.133" data-path="section-17.html"><a href="section-17.html#infotrd_amt"><i class="fa fa-check"></i><b>5.133</b> <span class="math inline">\(info\)</span>TRD_AMT</a></li>
<li class="chapter" data-level="5.134" data-path="section-17.html"><a href="section-17.html#section-91"><i class="fa fa-check"></i><b>5.134</b> [1] 70030</a></li>
<li class="chapter" data-level="5.135" data-path="section-17.html"><a href="section-17.html#section-92"><i class="fa fa-check"></i><b>5.135</b> </a></li>
<li class="chapter" data-level="5.136" data-path="section-17.html"><a href="section-17.html#infocnt"><i class="fa fa-check"></i><b>5.136</b> <span class="math inline">\(info\)</span>CNT</a></li>
<li class="chapter" data-level="5.137" data-path="section-17.html"><a href="section-17.html#section-93"><i class="fa fa-check"></i><b>5.137</b> [1] 23</a></li>
<li class="chapter" data-level="5.138" data-path="section-17.html"><a href="section-17.html#section-94"><i class="fa fa-check"></i><b>5.138</b> </a></li>
<li class="chapter" data-level="5.139" data-path="section-17.html"><a href="section-17.html#section-95"><i class="fa fa-check"></i><b>5.139</b> </a></li>
<li class="chapter" data-level="5.140" data-path="section-17.html"><a href="section-17.html#list"><i class="fa fa-check"></i><b>5.140</b> $list</a></li>
<li class="chapter" data-level="5.141" data-path="section-17.html"><a href="section-17.html#idx_cd-idx_nm_kor-all_mkt_val-cmp_cd-cmp_kor-mkt_val-wgt"><i class="fa fa-check"></i><b>5.141</b> IDX_CD IDX_NM_KOR ALL_MKT_VAL CMP_CD CMP_KOR MKT_VAL WGT</a></li>
<li class="chapter" data-level="5.142" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-096770-sk-9052841-45.61"><i class="fa fa-check"></i><b>5.142</b> 1 G10 WICS 에너지 19850082 096770 SK이노베이션 9052841 45.61</a></li>
<li class="chapter" data-level="5.143" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-010950-s-oil-3403265-17.14"><i class="fa fa-check"></i><b>5.143</b> 2 G10 WICS 에너지 19850082 010950 S-Oil 3403265 17.14</a></li>
<li class="chapter" data-level="5.144" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-267250--2873204-14.47"><i class="fa fa-check"></i><b>5.144</b> 3 G10 WICS 에너지 19850082 267250 현대중공업지주 2873204 14.47</a></li>
<li class="chapter" data-level="5.145" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-078930-gs-2491805-12.55"><i class="fa fa-check"></i><b>5.145</b> 4 G10 WICS 에너지 19850082 078930 GS 2491805 12.55</a></li>
<li class="chapter" data-level="5.146" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-067630--624986-3.15"><i class="fa fa-check"></i><b>5.146</b> 5 G10 WICS 에너지 19850082 067630 에이치엘비생명과학 624986 3.15</a></li>
<li class="chapter" data-level="5.147" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-006120-sk-257059-1.30"><i class="fa fa-check"></i><b>5.147</b> 6 G10 WICS 에너지 19850082 006120 SK디스커버리 257059 1.30</a></li>
<li class="chapter" data-level="5.148" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-002960--198881-1.00"><i class="fa fa-check"></i><b>5.148</b> 7 G10 WICS 에너지 19850082 002960 한국쉘석유 198881 1.00</a></li>
<li class="chapter" data-level="5.149" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-091090--146439-0.74"><i class="fa fa-check"></i><b>5.149</b> 8 G10 WICS 에너지 19850082 091090 세원셀론텍 146439 0.74</a></li>
<li class="chapter" data-level="5.150" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-011930--118388-0.60"><i class="fa fa-check"></i><b>5.150</b> 9 G10 WICS 에너지 19850082 011930 신성이엔지 118388 0.60</a></li>
<li class="chapter" data-level="5.151" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-128820--79162-0.40"><i class="fa fa-check"></i><b>5.151</b> 10 G10 WICS 에너지 19850082 128820 대성산업 79162 0.40</a></li>
<li class="chapter" data-level="5.152" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-043200--75903-0.38"><i class="fa fa-check"></i><b>5.152</b> 11 G10 WICS 에너지 19850082 043200 파루 75903 0.38</a></li>
<li class="chapter" data-level="5.153" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-003650--71918-0.36"><i class="fa fa-check"></i><b>5.153</b> 12 G10 WICS 에너지 19850082 003650 미창석유 71918 0.36</a></li>
<li class="chapter" data-level="5.154" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-014530--62828-0.32"><i class="fa fa-check"></i><b>5.154</b> 13 G10 WICS 에너지 19850082 014530 극동유화 62828 0.32</a></li>
<li class="chapter" data-level="5.155" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-099220-sdn-55967-0.28"><i class="fa fa-check"></i><b>5.155</b> 14 G10 WICS 에너지 19850082 099220 SDN 55967 0.28</a></li>
<li class="chapter" data-level="5.156" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-024060--53460-0.27"><i class="fa fa-check"></i><b>5.156</b> 15 G10 WICS 에너지 19850082 024060 흥구석유 53460 0.27</a></li>
<li class="chapter" data-level="5.157" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-041590--50901-0.26"><i class="fa fa-check"></i><b>5.157</b> 16 G10 WICS 에너지 19850082 041590 에너전트 50901 0.26</a></li>
<li class="chapter" data-level="5.158" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-095910--46873-0.24"><i class="fa fa-check"></i><b>5.158</b> 17 G10 WICS 에너지 19850082 095910 에스에너지 46873 0.24</a></li>
<li class="chapter" data-level="5.159" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-060900--43739-0.22"><i class="fa fa-check"></i><b>5.159</b> 18 G10 WICS 에너지 19850082 060900 퍼시픽바이오 43739 0.22</a></li>
<li class="chapter" data-level="5.160" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-012320--40030-0.20"><i class="fa fa-check"></i><b>5.160</b> 19 G10 WICS 에너지 19850082 012320 경동인베스트 40030 0.20</a></li>
<li class="chapter" data-level="5.161" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-093230--32266-0.16"><i class="fa fa-check"></i><b>5.161</b> 20 G10 WICS 에너지 19850082 093230 이아이디 32266 0.16</a></li>
<li class="chapter" data-level="5.162" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-038620--30094-0.15"><i class="fa fa-check"></i><b>5.162</b> 21 G10 WICS 에너지 19850082 038620 위즈코프 30094 0.15</a></li>
<li class="chapter" data-level="5.163" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-137950--29363-0.15"><i class="fa fa-check"></i><b>5.163</b> 22 G10 WICS 에너지 19850082 137950 제이씨케미칼 29363 0.15</a></li>
<li class="chapter" data-level="5.164" data-path="section-17.html"><a href="section-17.html#g10-wics--19850082-000440--10711-0.05"><i class="fa fa-check"></i><b>5.164</b> 23 G10 WICS 에너지 19850082 000440 중앙에너비스 10711 0.05</a></li>
<li class="chapter" data-level="5.165" data-path="section-17.html"><a href="section-17.html#s_wgt-cal_wgt-sec_cd-sec_nm_kor-seq-top60-apt_shr_cnt"><i class="fa fa-check"></i><b>5.165</b> S_WGT CAL_WGT SEC_CD SEC_NM_KOR SEQ TOP60 APT_SHR_CNT</a></li>
<li class="chapter" data-level="5.166" data-path="section-17.html"><a href="section-17.html#g10--1-2-56403994"><i class="fa fa-check"></i><b>5.166</b> 1 45.61 1 G10 에너지 1 2 56403994</a></li>
<li class="chapter" data-level="5.167" data-path="section-17.html"><a href="section-17.html#g10--2-2-41655633"><i class="fa fa-check"></i><b>5.167</b> 2 62.75 1 G10 에너지 2 2 41655633</a></li>
<li class="chapter" data-level="5.168" data-path="section-17.html"><a href="section-17.html#g10--3-2-9283372"><i class="fa fa-check"></i><b>5.168</b> 3 77.23 1 G10 에너지 3 2 9283372</a></li>
<li class="chapter" data-level="5.169" data-path="section-17.html"><a href="section-17.html#g10--4-2-49245150"><i class="fa fa-check"></i><b>5.169</b> 4 89.78 1 G10 에너지 4 2 49245150</a></li>
<li class="chapter" data-level="5.170" data-path="section-17.html"><a href="section-17.html#g10--5-2-39307272"><i class="fa fa-check"></i><b>5.170</b> 5 92.93 1 G10 에너지 5 2 39307272</a></li>
<li class="chapter" data-level="5.171" data-path="section-17.html"><a href="section-17.html#g10--6-2-10470820"><i class="fa fa-check"></i><b>5.171</b> 6 94.22 1 G10 에너지 6 2 10470820</a></li>
<li class="chapter" data-level="5.172" data-path="section-17.html"><a href="section-17.html#g10--7-2-611000"><i class="fa fa-check"></i><b>5.172</b> 7 95.22 1 G10 에너지 7 2 611000</a></li>
<li class="chapter" data-level="5.173" data-path="section-17.html"><a href="section-17.html#g10--8-2-42693554"><i class="fa fa-check"></i><b>5.173</b> 8 95.96 1 G10 에너지 8 2 42693554</a></li>
<li class="chapter" data-level="5.174" data-path="section-17.html"><a href="section-17.html#g10--9-2-100756131"><i class="fa fa-check"></i><b>5.174</b> 9 96.56 1 G10 에너지 9 2 100756131</a></li>
<li class="chapter" data-level="5.175" data-path="section-17.html"><a href="section-17.html#g10--10-2-15832417"><i class="fa fa-check"></i><b>5.175</b> 10 96.96 1 G10 에너지 10 2 15832417</a></li>
<li class="chapter" data-level="5.176" data-path="section-17.html"><a href="section-17.html#g10--11-2-29707590"><i class="fa fa-check"></i><b>5.176</b> 11 97.34 1 G10 에너지 11 2 29707590</a></li>
<li class="chapter" data-level="5.177" data-path="section-17.html"><a href="section-17.html#g10--12-2-922026"><i class="fa fa-check"></i><b>5.177</b> 12 97.70 1 G10 에너지 12 2 922026</a></li>
<li class="chapter" data-level="5.178" data-path="section-17.html"><a href="section-17.html#g10--13-2-18132098"><i class="fa fa-check"></i><b>5.178</b> 13 98.02 1 G10 에너지 13 2 18132098</a></li>
<li class="chapter" data-level="5.179" data-path="section-17.html"><a href="section-17.html#g10--14-2-38598075"><i class="fa fa-check"></i><b>5.179</b> 14 98.30 1 G10 에너지 14 2 38598075</a></li>
<li class="chapter" data-level="5.180" data-path="section-17.html"><a href="section-17.html#g10--15-2-9000000"><i class="fa fa-check"></i><b>5.180</b> 15 98.57 1 G10 에너지 15 2 9000000</a></li>
<li class="chapter" data-level="5.181" data-path="section-17.html"><a href="section-17.html#g10--16-2-31132353"><i class="fa fa-check"></i><b>5.181</b> 16 98.83 1 G10 에너지 16 2 31132353</a></li>
<li class="chapter" data-level="5.182" data-path="section-17.html"><a href="section-17.html#g10--17-2-10290527"><i class="fa fa-check"></i><b>5.182</b> 17 99.06 1 G10 에너지 17 2 10290527</a></li>
<li class="chapter" data-level="5.183" data-path="section-17.html"><a href="section-17.html#g10--18-2-53017111"><i class="fa fa-check"></i><b>5.183</b> 18 99.28 1 G10 에너지 18 2 53017111</a></li>
<li class="chapter" data-level="5.184" data-path="section-17.html"><a href="section-17.html#g10--19-2-993310"><i class="fa fa-check"></i><b>5.184</b> 19 99.48 1 G10 에너지 19 2 993310</a></li>
<li class="chapter" data-level="5.185" data-path="section-17.html"><a href="section-17.html#g10--20-2-140285009"><i class="fa fa-check"></i><b>5.185</b> 20 99.65 1 G10 에너지 20 2 140285009</a></li>
<li class="chapter" data-level="5.186" data-path="section-17.html"><a href="section-17.html#g10--21-2-24075079"><i class="fa fa-check"></i><b>5.186</b> 21 99.80 1 G10 에너지 21 2 24075079</a></li>
<li class="chapter" data-level="5.187" data-path="section-17.html"><a href="section-17.html#g10--22-2-8353752"><i class="fa fa-check"></i><b>5.187</b> 22 99.95 1 G10 에너지 22 2 8353752</a></li>
<li class="chapter" data-level="5.188" data-path="section-17.html"><a href="section-17.html#g10--23-2-1556783"><i class="fa fa-check"></i><b>5.188</b> 23 100.00 1 G10 에너지 23 2 1556783</a></li>
<li class="chapter" data-level="5.189" data-path="section-17.html"><a href="section-17.html#section-96"><i class="fa fa-check"></i><b>5.189</b> </a></li>
<li class="chapter" data-level="5.190" data-path="section-17.html"><a href="section-17.html#sector"><i class="fa fa-check"></i><b>5.190</b> $sector</a></li>
<li class="chapter" data-level="5.191" data-path="section-17.html"><a href="section-17.html#sec_cd-sec_nm_kor-sec_rate-idx_rate"><i class="fa fa-check"></i><b>5.191</b> SEC_CD SEC_NM_KOR SEC_RATE IDX_RATE</a></li>
<li class="chapter" data-level="5.192" data-path="section-17.html"><a href="section-17.html#g25--16.05-0"><i class="fa fa-check"></i><b>5.192</b> 1 G25 경기관련소비재 16.05 0</a></li>
<li class="chapter" data-level="5.193" data-path="section-17.html"><a href="section-17.html#g35--9.27-0"><i class="fa fa-check"></i><b>5.193</b> 2 G35 건강관리 9.27 0</a></li>
<li class="chapter" data-level="5.194" data-path="section-17.html"><a href="section-17.html#g50--2.26-0"><i class="fa fa-check"></i><b>5.194</b> 3 G50 커뮤니케이션서비스 2.26 0</a></li>
<li class="chapter" data-level="5.195" data-path="section-17.html"><a href="section-17.html#g40--10.31-0"><i class="fa fa-check"></i><b>5.195</b> 4 G40 금융 10.31 0</a></li>
<li class="chapter" data-level="5.196" data-path="section-17.html"><a href="section-17.html#g10--2.37-100"><i class="fa fa-check"></i><b>5.196</b> 5 G10 에너지 2.37 100</a></li>
<li class="chapter" data-level="5.197" data-path="section-17.html"><a href="section-17.html#g20--12.68-0"><i class="fa fa-check"></i><b>5.197</b> 6 G20 산업재 12.68 0</a></li>
<li class="chapter" data-level="5.198" data-path="section-17.html"><a href="section-17.html#g55--1.70-0"><i class="fa fa-check"></i><b>5.198</b> 7 G55 유틸리티 1.70 0</a></li>
<li class="chapter" data-level="5.199" data-path="section-17.html"><a href="section-17.html#g30--3.75-0"><i class="fa fa-check"></i><b>5.199</b> 8 G30 필수소비재 3.75 0</a></li>
<li class="chapter" data-level="5.200" data-path="section-17.html"><a href="section-17.html#g15--7.89-0"><i class="fa fa-check"></i><b>5.200</b> 9 G15 소재 7.89 0</a></li>
<li class="chapter" data-level="5.201" data-path="section-17.html"><a href="section-17.html#g45-it-33.73-0"><i class="fa fa-check"></i><b>5.201</b> 10 G45 IT 33.73 0</a></li>
<li class="chapter" data-level="5.202" data-path="section-17.html"><a href="section-17.html#section-97"><i class="fa fa-check"></i><b>5.202</b> </a></li>
<li class="chapter" data-level="5.203" data-path="section-17.html"><a href="section-17.html#size"><i class="fa fa-check"></i><b>5.203</b> $size</a></li>
<li class="chapter" data-level="5.204" data-path="section-17.html"><a href="section-17.html#sec_cd-sec_nm_kor-sec_rate-idx_rate-1"><i class="fa fa-check"></i><b>5.204</b> SEC_CD SEC_NM_KOR SEC_RATE IDX_RATE</a></li>
<li class="chapter" data-level="5.205" data-path="section-17.html"><a href="section-17.html#wmi510-wmi500--69.40-89.78"><i class="fa fa-check"></i><b>5.205</b> 1 WMI510 WMI500 대형주 69.40 89.78</a></li>
<li class="chapter" data-level="5.206" data-path="section-17.html"><a href="section-17.html#wmi520-wmi500--13.56-4.44"><i class="fa fa-check"></i><b>5.206</b> 2 WMI520 WMI500 중형주 13.56 4.44</a></li>
<li class="chapter" data-level="5.207" data-path="section-17.html"><a href="section-17.html#wmi530-wmi500--17.04-5.78"><i class="fa fa-check"></i><b>5.207</b> 3 WMI530 WMI500 소형주 17.04 5.78</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="section-98.html"><a href="section-98.html"><i class="fa fa-check"></i><b>6</b> 금융 데이터 수집하기 (심화)</a><ul>
<li class="chapter" data-level="6.1" data-path="section-98.html"><a href="section-98.html#section-99"><i class="fa fa-check"></i><b>6.1</b> 수정주가 크롤링</a><ul>
<li class="chapter" data-level="6.1.1" data-path="section-98.html"><a href="section-98.html#section-100"><i class="fa fa-check"></i><b>6.1.1</b> 개별 종목 주가 크롤링</a></li>
<li class="chapter" data-level="6.1.2" data-path="section-98.html"><a href="section-98.html#section-101"><i class="fa fa-check"></i><b>6.1.2</b> 전 종목 주가 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="section-98.html"><a href="section-98.html#section-102"><i class="fa fa-check"></i><b>6.2</b> 재무제표 및 가치지표 크롤링</a><ul>
<li class="chapter" data-level="6.2.1" data-path="section-98.html"><a href="section-98.html#section-103"><i class="fa fa-check"></i><b>6.2.1</b> 재무제표 다운로드</a></li>
<li class="chapter" data-level="6.2.2" data-path="section-98.html"><a href="section-98.html#section-104"><i class="fa fa-check"></i><b>6.2.2</b> 가치지표 계산하기</a></li>
<li class="chapter" data-level="6.2.3" data-path="section-98.html"><a href="section-98.html#section-105"><i class="fa fa-check"></i><b>6.2.3</b> 전 종목 재무제표 및 가치지표 다운로드</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="section-98.html"><a href="section-98.html#section-106"><i class="fa fa-check"></i><b>6.3</b> 야후 파이낸스 데이터 구하기</a><ul>
<li class="chapter" data-level="6.3.1" data-path="section-98.html"><a href="section-98.html#section-107"><i class="fa fa-check"></i><b>6.3.1</b> 재무제표 다운로드</a></li>
<li class="chapter" data-level="6.3.2" data-path="section-98.html"><a href="section-98.html#section-108"><i class="fa fa-check"></i><b>6.3.2</b> 가치지표 계산하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="section-109.html"><a href="section-109.html"><i class="fa fa-check"></i><b>7</b> 데이터 정리하기</a><ul>
<li class="chapter" data-level="7.1" data-path="section-109.html"><a href="section-109.html#section-110"><i class="fa fa-check"></i><b>7.1</b> 주가 정리하기</a></li>
<li class="chapter" data-level="7.2" data-path="section-109.html"><a href="section-109.html#section-111"><i class="fa fa-check"></i><b>7.2</b> 재무제표 정리하기</a></li>
<li class="chapter" data-level="7.3" data-path="section-109.html"><a href="section-109.html#section-112"><i class="fa fa-check"></i><b>7.3</b> 가치지표 정리하기</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="section-113.html"><a href="section-113.html"><i class="fa fa-check"></i><b>8</b> 데이터 분석 및 시각화하기</a><ul>
<li class="chapter" data-level="8.1" data-path="section-113.html"><a href="section-113.html#section-114"><i class="fa fa-check"></i><b>8.1</b> 종목정보 데이터 분석</a><ul>
<li class="chapter" data-level="8.1.1" data-path="section-113.html"><a href="section-113.html#join--"><i class="fa fa-check"></i><b>8.1.1</b> <code>*_join</code>: 데이터 합치기</a></li>
<li class="chapter" data-level="8.1.2" data-path="section-113.html"><a href="section-113.html#glimpse---"><i class="fa fa-check"></i><b>8.1.2</b> <code>glimpse()</code>: 데이터 구조 확인하기</a></li>
<li class="chapter" data-level="8.1.3" data-path="section-113.html"><a href="section-113.html#rename---"><i class="fa fa-check"></i><b>8.1.3</b> <code>rename()</code>: 열 이름 바꾸기</a></li>
<li class="chapter" data-level="8.1.4" data-path="section-113.html"><a href="section-113.html#distinct---"><i class="fa fa-check"></i><b>8.1.4</b> distinct(): 고유한 값 확인</a></li>
<li class="chapter" data-level="8.1.5" data-path="section-113.html"><a href="section-113.html#select---"><i class="fa fa-check"></i><b>8.1.5</b> <code>select()</code>: 원하는 열만 선택</a></li>
<li class="chapter" data-level="8.1.6" data-path="section-113.html"><a href="section-113.html#mutate-----"><i class="fa fa-check"></i><b>8.1.6</b> <code>mutate()</code>: 열 생성 및 데이터 변경</a></li>
<li class="chapter" data-level="8.1.7" data-path="section-113.html"><a href="section-113.html#filter----"><i class="fa fa-check"></i><b>8.1.7</b> <code>filter()</code>: 조건을 충족하는 행 선택</a></li>
<li class="chapter" data-level="8.1.8" data-path="section-113.html"><a href="section-113.html#summarize---"><i class="fa fa-check"></i><b>8.1.8</b> <code>summarize()</code>: 요약 통계값 계산</a></li>
<li class="chapter" data-level="8.1.9" data-path="section-113.html"><a href="section-113.html#arrange--"><i class="fa fa-check"></i><b>8.1.9</b> <code>arrange()</code>: 데이터 정렬</a></li>
<li class="chapter" data-level="8.1.10" data-path="section-113.html"><a href="section-113.html#row_number--"><i class="fa fa-check"></i><b>8.1.10</b> <code>row_number()</code>: 순위 계산</a></li>
<li class="chapter" data-level="8.1.11" data-path="section-113.html"><a href="section-113.html#ntile--"><i class="fa fa-check"></i><b>8.1.11</b> <code>ntile()</code>: 분위수 계산</a></li>
<li class="chapter" data-level="8.1.12" data-path="section-113.html"><a href="section-113.html#group_by---"><i class="fa fa-check"></i><b>8.1.12</b> <code>group_by()</code>: 그룹별로 데이터를 묶음</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="section-113.html"><a href="section-113.html#section-115"><i class="fa fa-check"></i><b>8.2</b> 종목정보 시각화</a></li>
<li class="chapter" data-level="8.3" data-path="section-113.html"><a href="section-113.html#section-116"><i class="fa fa-check"></i><b>8.3</b> 주가 및 수익률 시각화</a><ul>
<li class="chapter" data-level="8.3.1" data-path="section-113.html"><a href="section-113.html#section-117"><i class="fa fa-check"></i><b>8.3.1</b> 주가 그래프 나타내기</a></li>
<li class="chapter" data-level="8.3.2" data-path="section-113.html"><a href="section-113.html#section-118"><i class="fa fa-check"></i><b>8.3.2</b> 인터랙티브 그래프 나타내기</a></li>
<li class="chapter" data-level="8.3.3" data-path="section-113.html"><a href="section-113.html#section-119"><i class="fa fa-check"></i><b>8.3.3</b> 연도별 수익률 나타내기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="section-120.html"><a href="section-120.html"><i class="fa fa-check"></i><b>9</b> 퀀트 전략을 이용한 종목선정 (기본)</a><ul>
<li class="chapter" data-level="9.1" data-path="section-120.html"><a href="section-120.html#section-121"><i class="fa fa-check"></i><b>9.1</b> 베타 이해하기</a><ul>
<li class="chapter" data-level="9.1.1" data-path="section-120.html"><a href="section-120.html#section-122"><i class="fa fa-check"></i><b>9.1.1</b> 베타 계산하기</a></li>
<li class="chapter" data-level="9.1.2" data-path="section-120.html"><a href="section-120.html#section-123"><i class="fa fa-check"></i><b>9.1.2</b> 베타 시각화</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="section-120.html"><a href="section-120.html#section-124"><i class="fa fa-check"></i><b>9.2</b> 저변동성 전략</a><ul>
<li class="chapter" data-level="9.2.1" data-path="section-120.html"><a href="section-120.html#section-125"><i class="fa fa-check"></i><b>9.2.1</b> 저변동성 포트폴리오 구하기: 일간 기준</a></li>
<li class="chapter" data-level="9.2.2" data-path="section-120.html"><a href="section-120.html#section-126"><i class="fa fa-check"></i><b>9.2.2</b> 저변동성 포트폴리오 구하기: 주간 기준</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="section-120.html"><a href="section-120.html#section-127"><i class="fa fa-check"></i><b>9.3</b> 모멘텀 전략</a><ul>
<li class="chapter" data-level="9.3.1" data-path="section-120.html"><a href="section-120.html#section-128"><i class="fa fa-check"></i><b>9.3.1</b> 모멘텀 포트폴리오 구하기: 12개월 모멘텀</a></li>
<li class="chapter" data-level="9.3.2" data-path="section-120.html"><a href="section-120.html#section-129"><i class="fa fa-check"></i><b>9.3.2</b> 모멘텀 포트폴리오 구하기: 위험조정 수익률</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="section-120.html"><a href="section-120.html#section-130"><i class="fa fa-check"></i><b>9.4</b> 밸류 전략</a><ul>
<li class="chapter" data-level="9.4.1" data-path="section-120.html"><a href="section-120.html#pbr"><i class="fa fa-check"></i><b>9.4.1</b> 밸류 포트폴리오 구하기: 저 PBR</a></li>
<li class="chapter" data-level="9.4.2" data-path="section-120.html"><a href="section-120.html#section-131"><i class="fa fa-check"></i><b>9.4.2</b> 각 지표를 결합하기</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="section-120.html"><a href="section-120.html#section-132"><i class="fa fa-check"></i><b>9.5</b> 퀄리티 전략</a><ul>
<li class="chapter" data-level="9.5.1" data-path="section-120.html"><a href="section-120.html#f-score"><i class="fa fa-check"></i><b>9.5.1</b> F-Score</a></li>
<li class="chapter" data-level="9.5.2" data-path="section-120.html"><a href="section-120.html#section-133"><i class="fa fa-check"></i><b>9.5.2</b> 각 지표를 결합하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="section-134.html"><a href="section-134.html"><i class="fa fa-check"></i><b>10</b> 퀀트 전략을 이용한 종목선정 (심화)</a><ul>
<li class="chapter" data-level="10.1" data-path="section-134.html"><a href="section-134.html#section-135"><i class="fa fa-check"></i><b>10.1</b> 섹터 중립 포트폴리오</a></li>
<li class="chapter" data-level="10.2" data-path="section-134.html"><a href="section-134.html#section-136"><i class="fa fa-check"></i><b>10.2</b> 마법공식</a><ul>
<li class="chapter" data-level="10.2.1" data-path="section-134.html"><a href="section-134.html#section-137"><i class="fa fa-check"></i><b>10.2.1</b> 퀄리티와 밸류 간의 관계</a></li>
<li class="chapter" data-level="10.2.2" data-path="section-134.html"><a href="section-134.html#section-138"><i class="fa fa-check"></i><b>10.2.2</b> 마법공식 이해하기</a></li>
<li class="chapter" data-level="10.2.3" data-path="section-134.html"><a href="section-134.html#section-139"><i class="fa fa-check"></i><b>10.2.3</b> 마법공식 구성하기</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="section-134.html"><a href="section-134.html#section-140"><i class="fa fa-check"></i><b>10.3</b> 이상치 데이터 제거 및 팩터의 결합</a><ul>
<li class="chapter" data-level="10.3.1" data-path="section-134.html"><a href="section-134.html#trim---"><i class="fa fa-check"></i><b>10.3.1</b> 트림(Trim): 이상치 데이터 삭제</a></li>
<li class="chapter" data-level="10.3.2" data-path="section-134.html"><a href="section-134.html#winsorizing---"><i class="fa fa-check"></i><b>10.3.2</b> 윈저라이징(Winsorizing): 이상치 데이터 대체</a></li>
<li class="chapter" data-level="10.3.3" data-path="section-134.html"><a href="section-134.html#section-141"><i class="fa fa-check"></i><b>10.3.3</b> 팩터의 결합 방법</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="section-134.html"><a href="section-134.html#section-142"><i class="fa fa-check"></i><b>10.4</b> 멀티팩터 포트폴리오</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="section-143.html"><a href="section-143.html"><i class="fa fa-check"></i><b>11</b> 포트폴리오 구성</a><ul>
<li class="chapter" data-level="11.1" data-path="section-143.html"><a href="section-143.html#section-144"><i class="fa fa-check"></i><b>11.1</b> 최소분산 포트폴리오</a><ul>
<li class="chapter" data-level="11.1.1" data-path="section-143.html"><a href="section-143.html#slsqp---"><i class="fa fa-check"></i><b>11.1.1</b> <code>slsqp()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.1.2" data-path="section-143.html"><a href="section-143.html#solve.qp---"><i class="fa fa-check"></i><b>11.1.2</b> <code>solve.QP()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.1.3" data-path="section-143.html"><a href="section-143.html#optimalportfolio---"><i class="fa fa-check"></i><b>11.1.3</b> <code>optimalPortfolio()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.1.4" data-path="section-143.html"><a href="section-143.html#section-145"><i class="fa fa-check"></i><b>11.1.4</b> 결과값들의 비교</a></li>
<li class="chapter" data-level="11.1.5" data-path="section-143.html"><a href="section-143.html#section-146"><i class="fa fa-check"></i><b>11.1.5</b> 최소 및 최대 투자비중 제약조건</a></li>
<li class="chapter" data-level="11.1.6" data-path="section-143.html"><a href="section-143.html#section-147"><i class="fa fa-check"></i><b>11.1.6</b> 각 자산 별 제약조건의 추가</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="section-143.html"><a href="section-143.html#section-148"><i class="fa fa-check"></i><b>11.2</b> 최대분산효과 포트폴리오</a><ul>
<li class="chapter" data-level="11.2.1" data-path="section-143.html"><a href="section-143.html#solve.qp----1"><i class="fa fa-check"></i><b>11.2.1</b> <code>solve.QP()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.2.2" data-path="section-143.html"><a href="section-143.html#optimalportfolio----1"><i class="fa fa-check"></i><b>11.2.2</b> <code>optimalPortfolio()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.2.3" data-path="section-143.html"><a href="section-143.html#section-149"><i class="fa fa-check"></i><b>11.2.3</b> 최소 및 최대 투자비중 제약조건</a></li>
<li class="chapter" data-level="11.2.4" data-path="section-143.html"><a href="section-143.html#section-150"><i class="fa fa-check"></i><b>11.2.4</b> 각 자산 별 제약조건의 추가</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="section-143.html"><a href="section-143.html#section-151"><i class="fa fa-check"></i><b>11.3</b> 위험균형 포트폴리오</a><ul>
<li class="chapter" data-level="11.3.1" data-path="section-143.html"><a href="section-143.html#section-152"><i class="fa fa-check"></i><b>11.3.1</b> 전통적 자산배분, 주식 60%와 채권 40%</a></li>
<li class="chapter" data-level="11.3.2" data-path="section-143.html"><a href="section-143.html#rp---"><i class="fa fa-check"></i><b>11.3.2</b> <code>rp()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.3.3" data-path="section-143.html"><a href="section-143.html#section-153"><i class="fa fa-check"></i><b>11.3.3</b> 위험예산 포트폴리오</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://henryquant.blogspot.com/" target="blank">Henry's Quantopia</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">퀀트 투자 쿡북: R을 이용한 투자 포트폴리오 만들기</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="section-134" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> 퀀트 전략을 이용한 종목선정 (심화)</h1>
<p>지난 장에서는 팩터를 이용한 투자 전략의 기본이 되는 로우볼, 모멘텀, 밸류, 퀄리티 전략에 대해 알아보았습니다. 물론 이러한 단일 팩터를 이용한 투자도 장기적으로 우수한 성과를 보이지만, 여러 팩터를 결합하거나 좀더 정밀하게 전략을 만든다면 더욱 우수한 성과를 거둘 수 있습니다.</p>
<p>이번 장에서는 섹터별 효과를 없앤 후 포트폴리오를 구성하는 방법, 이상치 데이터 제거 및 팩터 결합 방법, 그리고 멀티팩터 구성방법에 대해 알아보겠습니다.</p>
<div id="section-135" class="section level2">
<h2><span class="header-section-number">10.1</span> 섹터 중립 포트폴리오</h2>
<p>팩터 전략의 단점 중 하나는 선택된 종목들이 특정 섹터로 쏠리는 경우가 있다는 점입니다. 특히 과거 수익률을 토대로 종목을 선정하는 모멘텀 전략의 경우, 특정 섹터가 좋을때 동일한 섹터의 모든 종목이 함께 움직이는 경향이 있어 이러한 쏠림이 심할 수 있습니다.</p>
<p>먼저 지난 장에서 배운 12개월 모멘텀을 이용한 포트폴리오 구성 방법을 다시 살펴보도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)
<span class="kw">library</span>(xts)
<span class="kw">library</span>(PerformanceAnalytics)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)

KOR_price =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_price.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.xts</span>()
KOR_ticker =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_ticker.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) 
KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span> =<span class="st"> </span><span class="kw">str_pad</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>, <span class="dv">6</span>, <span class="st">&#39;left&#39;</span>, <span class="dv">0</span>)

ret =<span class="st"> </span><span class="kw">Return.calculate</span>(KOR_price) <span class="op">%&gt;%</span><span class="st"> </span>xts<span class="op">::</span><span class="kw">last</span>(<span class="dv">252</span>) 
ret_12m =<span class="st"> </span>ret <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sapply</span>(., <span class="cf">function</span>(x) {
  <span class="kw">prod</span>(<span class="dv">1</span><span class="op">+</span>x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
  })

invest_mom =<span class="st"> </span><span class="kw">rank</span>(<span class="op">-</span>ret_12m) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">30</span></code></pre>
<p>기존의 코드와 동일하게, 주식 가격 및 티커 데이터를 불러온 후, 최근 12개월 수익률을 구해 상위 30 종목을 선택합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">KOR_sector =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_sector.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
KOR_sector<span class="op">$</span><span class="st">&#39;CMP_CD&#39;</span> =<span class="st"> </span><span class="kw">str_pad</span>(KOR_sector<span class="op">$</span><span class="st">&#39;CMP_CD&#39;</span>, <span class="dv">6</span>, <span class="st">&#39;left&#39;</span>, <span class="dv">0</span>)
data_market =<span class="st"> </span><span class="kw">left_join</span>(KOR_ticker, KOR_sector,
                         <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;종목코드&#39;</span> =<span class="st"> &#39;CMP_CD&#39;</span>, <span class="st">&#39;종목명&#39;</span> =<span class="st"> &#39;CMP_KOR&#39;</span>))</code></pre>
<p>해당 종목들의 섹터 정보를 추가로 살펴보기 위해, 섹터 데이터를 불러온 후, <code>left_join()</code> 함수를 이용해 티커와 결합하여 data_market에 저장해줍니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">data_market[invest_mom, ] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>, <span class="st">`</span><span class="dt">n</span><span class="st">`</span>), <span class="dt">y =</span> <span class="st">`</span><span class="dt">n</span><span class="st">`</span>, <span class="dt">label =</span> n)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">color =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">size =</span> <span class="dv">4</span>, <span class="dt">hjust =</span> <span class="fl">-0.3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="ot">NULL</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="ot">NULL</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.1</span>, <span class="dv">0</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_classic</span>()</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-3-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p><code>group_by()</code> 함수를 이용하여 12개월 기준 모멘텀 포트폴리오 종목들의 섹터 별 종목수를 계산해준 후, <code>ggplot()</code> 함수를 이용하여 이를 그림으로 나타내줍니다. 그림에서 알 수 있듯이, 특정 섹터에 대부분의 종목이 몰려있습니다.</p>
<p>따라서 여러 종목으로 포트폴리오를 구성하였지만, 분해해보면 특정 섹터에 쏠림이 심하다는 것을 알 수 있습니다. 이러한 섹터 쏠림 현상을 제거한 <strong>섹터 중립 포트폴리오</strong>를 구성해 보도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">sector_neutral =<span class="st"> </span>data_market <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="st">`</span><span class="dt">종목코드</span><span class="st">`</span>, <span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">ret</span><span class="st">`</span> =<span class="st"> </span>ret_12m) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">scale_per_sector =</span> <span class="kw">scale</span>(<span class="st">`</span><span class="dt">ret</span><span class="st">`</span>),
         <span class="dt">scale_per_sector =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>), <span class="ot">NA</span>, scale_per_sector))</code></pre>
<ol style="list-style-type: decimal">
<li>먼저 종목코드와 섹터정보, 그리고 12개월 수익률 정보를 불러옵니다.</li>
<li><code>group_by()</code> 함수를 통해 섹터별 그룹을 만들어 줍니다.</li>
<li><code>scale()</code> 함수를 이용해 정규화를 해줍니다. 정규화의 경우 <span class="math inline">\(\frac{x- \mu}{\sigma}\)</span>로 계산됩니다.</li>
<li>섹터 정보가 없는 정보는 삭제해주도록 합니다.</li>
</ol>
<p>위의 정규화 과정을 살펴보면, 전체 종목에서 12개월 수익률을 비교하는 것이 아닌 각 섹터별로 수익률의 강도를 비교하게 됩니다. 따라서 특정 종목의 과거 수익률이 전체 종목과 비교해서 높았어도 해당 섹터 내에서의 순위가 낮다면, 정규화된 값은 낮게됩니다.</p>
<p>따라서 섹터 별 정규화 과정을 거친 값으로 비교 분석을 한다면, 섹터 효과가 어느정도 제거된 포트폴리오를 구성할 수 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">invest_mom_neutral =<span class="st"> </span><span class="kw">rank</span>(<span class="op">-</span>sector_neutral<span class="op">$</span>scale_per_sector) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">30</span>

data_market[invest_mom_neutral, ] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(<span class="st">`</span><span class="dt">SEC_NM_KOR</span><span class="st">`</span>, <span class="st">`</span><span class="dt">n</span><span class="st">`</span>), <span class="dt">y =</span> <span class="st">`</span><span class="dt">n</span><span class="st">`</span>, <span class="dt">label =</span> n)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">color =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">size =</span> <span class="dv">4</span>, <span class="dt">hjust =</span> <span class="fl">-0.3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="ot">NULL</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="ot">NULL</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.1</span>, <span class="dv">0</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_classic</span>()</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-5-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>정규화된 값의 랭킹이 높은 상위 30 종목을 선택하며, 내림차순을 위해 마이너스를 붙여줍니다. 해당 포트폴리오의 섹터 별 구성종목을 확인해보면, 단순하게 포트폴리오를 구성한 것 대비, 여러 섹터에 종목이 분산되어 있음이 확인됩니다.</p>
<p>이처럼 <code>group_by()</code> 함수를 통해 손쉽게 그룹별 중립화를 할 수 있으며, 글로벌 투자를 하는 경우에는 지역, 국가, 섹터 별로도 중립화된 포트폴리오를 구성하기도 합니다.</p>
</div>
<div id="section-136" class="section level2">
<h2><span class="header-section-number">10.2</span> 마법공식</h2>
<p>하나의 팩터만을 보고 투자하는 것 보다, 둘 혹은 그 이상의 팩터를 결합하여 투자하는 것이 훨씬 좋은 포트폴리오를 구성할 수 있으며, 이러한 방법을 멀티 팩터라 합니다. 그중에서도 밸류와 퀄리티의 조합은 전통적으로 많이 사용되어진 방법이며, 그 중 대표적인 예가 조엘 그린블라트의 마법공식입니다.</p>
<p>이번 장에서는 퀄리티와 밸류 간의 관계, 그리고 마법공식의 정의와 구성방법에 대해 알아보도록 하겠습니다.</p>
<div id="section-137" class="section level3">
<h3><span class="header-section-number">10.2.1</span> 퀄리티와 밸류 간의 관계</h3>
<p>투자의 정석 중 하나는 <strong>좋은 기업을 싸게 사는 것</strong>입니다. 이를 팩터의 관점에서 이해하면 퀄리티 팩터와 밸류 팩터로 이해할 수도 있습니다.</p>
<p>여러 논문에 따르면 흔히 밸류와 퀄리티 팩터는 반대의 관계에 있습니다. 먼저 가치주들은 위험이 크기 때문에 시장에서 소외를 받아 저평가가 이루어지는 것이며, 이러한 위험에 대한 댓가로 밸류 팩터의 수익률이 높게됩니다. 반대로 사람들은 우량주에 기꺼이 프리미엄을 지불하려 하기 때문에 퀄리티 팩터의 수익률이 높기도 합니다. 이는 마치 동전의 양면과 같지만, 장기적으로 가치주와 우량주 모두 우수한 성과를 기록합니다.</p>
<p>먼저 퀄리티의 지표인 매출총이익과 밸류 지표인 PBR을 통해 둘간의 관계를 확인해보도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)
<span class="kw">library</span>(dplyr)

KOR_value =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_value.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
KOR_fs =<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&#39;data/KOR_fs.Rds&#39;</span>)
KOR_ticker =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_ticker.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) 

data_pbr =<span class="st"> </span>KOR_value[<span class="st">&#39;PBR&#39;</span>]
data_gpa =<span class="st"> </span>(KOR_fs<span class="op">$</span><span class="st">&#39;매출총이익&#39;</span> <span class="op">/</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;자산&#39;</span>)[<span class="kw">ncol</span>(KOR_fs<span class="op">$</span><span class="st">&#39;매출총이익&#39;</span>)] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">setNames</span>(<span class="st">&#39;GPA&#39;</span>)

<span class="kw">cbind</span>(data_pbr, <span class="op">-</span>data_gpa) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">cor</span>(<span class="dt">method =</span> <span class="st">&#39;spearman&#39;</span>, <span class="dt">use =</span> <span class="st">&#39;complete.obs&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">4</span>)</code></pre>
<pre><code>##         PBR     GPA
## PBR  1.0000 -0.2096
## GPA -0.2096  1.0000</code></pre>
<p>데이터를 불러온 후, PBR과 GPA(매출총이익 / 자산)를 구해주도록 합니다. 그 후 랭킹의 상관관계인 스피어만 상관관계를 구해보면, 서로 간 반대 관계가 있음이 확인됩니다. PBR의 경우 오름차순, GPA의 경우 내림차순 이므로 GPA 앞에 마이너스를 붙여주었습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cbind</span>(data_pbr, data_gpa) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">quantile_pbr =</span> <span class="kw">ntile</span>(data_pbr, <span class="dv">5</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(quantile_pbr)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(quantile_pbr) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_gpa =</span> <span class="kw">mean</span>(GPA, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> quantile_pbr, <span class="dt">y =</span> mean_gpa)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&#39;PBR&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&#39;GPA&#39;</span>)</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-7-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>이번에는 PBR의 분위수 별 GPA 평균값을 구하도록 하겠습니다.</p>
<ol style="list-style-type: decimal">
<li><code>ntile()</code> 함수를 이용해 PBR을 5분위수로 나누어 줍니다.</li>
<li>PBR이 없는 종목은 제외합니다.</li>
<li><code>group_by()</code>를 통해 PBR의 분위수별 그룹을 묶어 줍니다.</li>
<li>각 PBR 그룹 별 GPA의 평균값을 구해줍니다.</li>
<li><code>ggplot()</code>을 이용해 시각화를 해줍니다.</li>
</ol>
<p>그림에서 알수 있듯이 PBR이 낮을수록 GPA도 낮으며, 즉 가치주일수록 우량성은 떨어집니다. 반면에 PBR이 높을수록 GPA도 늪으며, 이는 주식의 가격이 비쌀수록 우량성도 높다는 것을 의미합니다.</p>
<p>이를 이용해 밸류 팩터와 퀄리티 팩터간의 관계를 나타내면 다음과 같습니다.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-8"></span>
<img src="images/tableqv.png" alt="밸류 팩터와 퀄리티 팩터간의 관계" width="50%" />
<p class="caption">
Figure 10.1: 밸류 팩터와 퀄리티 팩터간의 관계
</p>
</div>
<p>주가가 쌀수록 기업의 우량성은 떨어지며(①번), 반대로 기업의 우량성이 좋으면 주식은 비싼 경향(③번)이 있습니다. 물론 우량성도 떨어지고 비싸기만한 주식(②번)을 사려는 사람들 아마 없을 겁니다. 결과적으로 우리가 원하는 최고의 주식은 우량성이 있으면서도 가격은 싼 주식(④번)일 것입니다.</p>
</div>
<div id="section-138" class="section level3">
<h3><span class="header-section-number">10.2.2</span> 마법공식 이해하기</h3>
<p>마법공식이란 고담 캐피탈의 설립자이자 전설적인 투자자 조엘 그린블라트에 의해 알려진 투자방법입니다. 그는 본인의 책 <strong>주식 시장을 이기는 작은 책</strong>에서 투자를 하는데 있어 중요한 두가지 지표와, 이를 혼합할 경우 뛰어난 성과를 기록할 수 있다고 하였습니다.</p>
<p>첫번째 지표는 이율(Earnings Yield)로써 기업의 수익을 기업의 가치로 나는 값입니다. 이는 PER의 역수와 비슷하며, 밸류 지표 중 하나입니다.</p>
<p>두번째 지표는 투자 자본 수익률(Return on Capital)로써 기업의 수익을 투자한 자본으로 나눈 값입니다. 이는 ROE와도 비슷하며, 퀄리티 지표 중 하나입니다.</p>
<p>마법공식은 이 두가지 지표의 랭킹을 각각 구한 후, 랭킹의 합 기준 상위 30 개 종목을 1년간 보유한 후 매도하는 전략입니다.</p>
<p>해당 전략은 국내 투자자들에게도 많이 사랑받는 전략입니다. 그러나 두 지표를 계산하기 위한 데이터를 수집하는데 어려움이 있어 많은 투자자들이 이율 대신 PER를, 투하 자본 수익률 대신 ROE를 사용합니다. 그러나 우리가 수집한 데이터를 통해 충분히 원래의 마법공식을 구현할 수 있습니다.</p>
<table>
<caption><span id="tab:unnamed-chunk-9">Table 10.1: </span>마법공식의 구성 요소</caption>
<thead>
<tr class="header">
<th align="left">팩터</th>
<th align="left">Value</th>
<th align="left">Quality</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">지표</td>
<td align="left">이율 (Earnings Yield)</td>
<td align="left">투하 자본 수익률 (Return On Capital)</td>
</tr>
<tr class="even">
<td align="left">계산</td>
<td align="left"><span class="math inline">\(\frac{이자\,및\,법인세\,차감전이익}{기업\,가치}\)</span></td>
<td align="left"><span class="math inline">\(\frac{이자\,및\,법인세\,차감전이익}{투하자본}\)</span></td>
</tr>
</tbody>
</table>
</div>
<div id="section-139" class="section level3">
<h3><span class="header-section-number">10.2.3</span> 마법공식 구성하기</h3>
<p>재무제표 항목을 통해 이율과 투하 자본 수익률을 계산하고, 이를 통해 마법공식 포트폴리오를 구성하도록 하겠습니다.</p>
<p>먼저, 밸류지표에 해당하는 이익수익률을 계산해보도록 하겟습니다. 이익수익률은 이자 및 법인세 차감전이익(EBIT)를 기업 가치(시가총액 + 순차입금)으로 나눈 값입니다. 이를 분해하면 다음과 같습니다.</p>
<p><span class="math display">\[\begin{equation} 

이익수익률 = \frac{이자\,및\,법인세\,차감전이익}{기업\,가치} \\
= \frac{이자\,및\,법인세\,차감전이익}{시가총액 + 순차입금} \\
= \frac{당기순이익 + 법인세 + 이자비용}{시가총액 + 총부채 - 여유자금} \\
= \frac{당기순이익 + 법인세 + 이자비용}{시가총액 + 총부채 - (현금 - max(0, 유동부채 - 유동자산 + 현금))}

\end{equation}\]</span></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)
<span class="kw">library</span>(dplyr)

KOR_value =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_value.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
KOR_fs =<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&#39;data/KOR_fs.Rds&#39;</span>)
KOR_ticker =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_ticker.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) 
KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span> =<span class="st"> </span><span class="kw">str_pad</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>, <span class="dv">6</span>, <span class="st">&#39;left&#39;</span>, <span class="dv">0</span>)

num_col =<span class="st"> </span><span class="kw">ncol</span>(KOR_fs[[<span class="dv">1</span>]])

<span class="co"># 분자</span>
magic_ebit =<span class="st"> </span>(KOR_fs<span class="op">$</span><span class="st">&#39;지배주주순이익&#39;</span> <span class="op">+</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;법인세비용&#39;</span> <span class="op">+</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;이자비용&#39;</span>)[num_col]

<span class="co"># 분모</span>
magic_cap =<span class="st"> </span>KOR_value<span class="op">$</span>PER <span class="op">*</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;지배주주순이익&#39;</span>[num_col]
magic_debt =<span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;부채&#39;</span>[num_col]
magic_excess_cash_<span class="dv">1</span> =<span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;유동부채&#39;</span> <span class="op">-</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;유동자산&#39;</span> <span class="op">+</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;현금및현금성자산&#39;</span>
magic_excess_cash_<span class="dv">1</span>[magic_excess_cash_<span class="dv">1</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] =<span class="st"> </span><span class="dv">0</span>
magic_excess_cash_<span class="dv">2</span> =<span class="st"> </span>(KOR_fs<span class="op">$</span><span class="st">&#39;현금및현금성자산&#39;</span> <span class="op">-</span><span class="st"> </span>magic_excess_cash_<span class="dv">1</span>)[num_col]

magic_ev =<span class="st"> </span>magic_cap <span class="op">+</span><span class="st"> </span>magic_debt <span class="op">-</span><span class="st"> </span>magic_excess_cash_<span class="dv">2</span>

<span class="co"># 이익수익률</span>
magic_ey =<span class="st"> </span>magic_ebit <span class="op">/</span><span class="st"> </span>magic_ev</code></pre>
<p>먼저 가치지표, 재무제표, 티커 데이터를 불러온 후, 재무제표 열 갯수를 구해주도록 합니다. 그 후 분자와 분모 항목에 해당하는 부분을 하나씩 계산해 줍니다.</p>
<p>먼저 분자 부분인 <strong>이자 및 법인세 차감전이익</strong>은 <strong>지배주주 순이익</strong>에 <strong>법인세비용</strong>과 <strong>이자비용</strong>을 더해줍니다. 그 후, 최근년도 데이터를 선택해 줍니다.</p>
<p>분모 부분은 시가총액, 총부채, 여유자금 총 세가지로 구성되어 있습니다.</p>
<ol style="list-style-type: decimal">
<li>우리가 가지고 있는 밸류 데이터와 재무제표 데이터를 통해 시가총액을 역산할 수 있습니다. PER 값에 Earnings를 곱해주면 시가총액이 계산되게 됩니다. 이를 통해 계산된 시가총액을 HTS나 금융 사이트의 값과 비교하면 거의 비슷함이 확인됩니다.</li>
</ol>
<p><span class="math display">\[\begin{equation} 
\begin{split}

PER \times Earnings &amp; = \frac{Price}{Earnings/Shares} \times Earnings \\
&amp; = \frac{Price \times Shares}{Earnings} \times Earnings \\
&amp; = Price \times Earnings = Market\,Cap

\end{split}
\end{equation}\]</span></p>
<ol start="2" style="list-style-type: decimal">
<li>총 부채는 부채 항목을 사용하면 됩니다.</li>
<li>여유자금은 두 단계에 걸쳐 계산하도록 합니다. 먼저 <strong>유동부채 - 유동자산 + 현금</strong> 값을 구해준 후, 0보다 작은 값은 모두 0으로 바꾸어주도록 합니다. 이 값을 현금 및 현금성자산 항목에서 차감하여 최종적인 여유자금을 구하도록 합니다.</li>
</ol>
<p>분자와 분모 부분을 나누어주면 이익수익률을 계산할 수 있습니다.</p>
<p>다음으로 퀄리티 지표에 해당하는 투하 자본 수익률을 계산하도록 하겠습니다. 해당 값은 이자 및 법인세 차감전이익(EBIT)를 투하자본(IC)으로 나누어 계산되며, 이를 분해하면 다음과 같습니다.</p>
<p><span class="math display">\[\begin{equation} 

투하 자본 수익률 = \frac{이자\,및\,법인세\,차감전이익}{투하자본} \\
= \frac{당기순이익 + 법인세 + 이자비용}{(유동자산 - 유동부채) + (비유동자산 - 감가상각비)}

\end{equation}\]</span></p>
<pre class="sourceCode r"><code class="sourceCode r">magic_ic =<span class="st"> </span>((KOR_fs<span class="op">$</span><span class="st">&#39;유동자산&#39;</span> <span class="op">-</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;유동부채&#39;</span>) <span class="op">+</span>
<span class="st">              </span>(KOR_fs<span class="op">$</span><span class="st">&#39;비유동자산&#39;</span> <span class="op">-</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;감가상각비&#39;</span>))[num_col]
magic_roc =<span class="st"> </span>magic_ebit <span class="op">/</span><span class="st"> </span>magic_ic</code></pre>
<p>투하 자본 수익률은 비교적 쉽게 계산할 수 있습니다. 분모에 해당하는 투하 자본의 경우 재무제표 항목을 그대로 사용하면 되며, 분자인 이자 및 법인세 차감전이익은 위에서 이미 구해둔 값을 그대로 사용하면 됩니다.</p>
<p>이제 두 지표를 활용하여 마법공식 포트폴리오를 구성하도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">invest_magic =<span class="st"> </span><span class="kw">rank</span>(<span class="kw">rank</span>(<span class="op">-</span>magic_ey) <span class="op">+</span><span class="st"> </span><span class="kw">rank</span>(<span class="op">-</span>magic_roc)) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">30</span>

KOR_ticker[invest_magic, ] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="st">`</span><span class="dt">종목코드</span><span class="st">`</span>, <span class="st">`</span><span class="dt">종목명</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">이익수익률</span><span class="st">`</span> =<span class="st"> </span>magic_ey[invest_magic, ],
         <span class="st">`</span><span class="dt">투하자본수익률</span><span class="st">`</span> =<span class="st"> </span>magic_roc[invest_magic, ])</code></pre>
<pre><code>##    종목코드         종목명 이익수익률 투하자본수익률
## 1    005930       삼성전자  0.1894849      0.2504221
## 2    000660     SK하이닉스  0.3441471      0.4793078
## 3    004800           효성  0.5663100      1.8507795
## 4    010780   아이에스동서  0.1851429      0.2913760
## 5    008060       대덕전자  0.2526047      0.2936349
## 6    012630            HDC  0.4907727      0.3623118
## 7    001820     삼화콘덴서  0.1298620      0.6383476
## 8    090460       비에이치  0.1307829      0.5129063
## 9    003300     한일홀딩스  0.3919292      0.2164415
## 10   086390     유니테스트  0.3067661      0.4580397
## 11   045100     한양이엔지  0.2697852      0.3235486
## 12   003030   세아제강지주  0.3028029      0.2302996
## 13   004960       한신공영  0.1831483      0.3066055
## 14   036190   금화피에스시  0.2395210      0.2316258
## 15   035620 바른손이앤에이  0.5380096      0.9668008
## 16   029460         케이씨  0.9663764      0.5832074
## 17   121800         비덴트  0.4687894      0.3265007
## 18   040910       아이씨디  0.1741219      0.2611465
## 19   036200         유니셈  0.1658174      0.2693798
## 20   126700 하이비젼시스템  0.2130603      0.2265886
## 21   006580       대양제지  0.1892245      0.2778542
## 22   083930         아바코  0.1656007      0.2599010
## 23   001570           금양  0.1461728      0.3548387
## 24   042040   케이피엠테크  0.2948247      0.2938830
## 25   036010     아비코전자  0.5160426      0.2416226
## 26   010280   쌍용정보통신  0.2960666      0.3963415
## 27   290740         액트로  0.1736520      0.3194444
## 28   127710     아시아경제  0.3627433      0.2408985
## 29   094970       제이엠티  0.2402346      0.2700186
## 30   194510     파티게임즈  0.2170685      0.5069124</code></pre>
<p>이익수익률과 투하 자본 수익률의 랭킹을 각각 구해주며, 내림차순으로 값을 구하기 위해 마이너스를 붙여줍니다. 그 후 두 값의 합의 랭킹 기준 상위 30 종목을 선택합니다. 그 후 종목코드와 종목명, 각 지표를 확인해주도록 합니다.</p>
</div>
</div>
<div id="section-140" class="section level2">
<h2><span class="header-section-number">10.3</span> 이상치 데이터 제거 및 팩터의 결합</h2>
<p>모든 데이터 분석에서 중요한 문제 중 하나가 이상치(극단치, Outlier) 데이터를 어떻게 처리할 것인가 입니다. 과거 12개월 수익률이 10배인 주식이 과연 모멘텀 관점에서 좋기만 한 주식인가, ROE가 100% 넘는 주식이 과연 퀄리티 관점에서 좋기만 한 주식인가 고민이 되기 마련입니다.</p>
<p>따라서 이러한 이상치를 제외하고 분석할지, 포함해서 분석할지를 판단해야 하며, 만일 포함한다면 그대로 사용할 것인지 보정하여 사용할 것인지도 판단해야 합니다.</p>
<p>우리가 가지고 있는 데이터에서 이러한 이상치 데이터를 탐색해보도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
<span class="kw">library</span>(ggplot2)

KOR_value =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_value.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
KOR_value <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> PBR)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.1</span>)</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-13-1.png" width="50%" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(KOR_value<span class="op">$</span>PBR, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>## [1] 137.6451</code></pre>
<p>국내 종목들의 PBR을 통해 히스토그램을 그려보면 오른쪽으로 꼬리가 매우 긴 분포를 보이고 있습니다. 이는 PBR이 무려 137.65인 이상치 데이터가 존재하기 때문입니다. 이처럼 모든 팩터 지표에는 극단치 데이터가 존재하기 마련이며, 이를 처리하는 방법에 대해 알아보도록 하겠습니다.</p>
<div id="trim---" class="section level3">
<h3><span class="header-section-number">10.3.1</span> 트림(Trim): 이상치 데이터 삭제</h3>
<p>트림은 이상치 데이터를 삭제하는 방법입니다. 위의 예제에서 이상치에 해당하는 상하위 1% 데이터를 삭제해주도록 하겠습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)

value_trim =<span class="st"> </span>KOR_value <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(PBR) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">PBR =</span> <span class="kw">ifelse</span>(<span class="kw">percent_rank</span>(PBR) <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.99</span>, <span class="ot">NA</span>, PBR),
         <span class="dt">PBR =</span> <span class="kw">ifelse</span>(<span class="kw">percent_rank</span>(PBR) <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.01</span>, <span class="ot">NA</span>, PBR))

value_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> PBR)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.1</span>)</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-14-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p><code>percent_rank()</code> 함수를 통해 백분위를 구한 후 상하위 1%에 해당하는 데이터들은 NA로 변경하였습니다. 결과적으로 지나치게 PBR이 낮은 종목과 높은 종목은 제거가 되어 x축의 스케일이 많이 줄어든 모습입니다.</p>
<p>평균이나 분산과 같이 통계값을 구하는 과정에서는 이상치 데이터를 제거하는 것이 바람직 할 수 있습니다. 그러나 팩터를 이용해 포트폴리오를 구하는 과정에서 해당 방법은 잘 사용되지 않습니다. 데이터의 손실이 발생하게 되며, 제거된 종목 중 정말로 좋은 종목이 존재할 수도 있기 때문입니다.</p>
</div>
<div id="winsorizing---" class="section level3">
<h3><span class="header-section-number">10.3.2</span> 윈저라이징(Winsorizing): 이상치 데이터 대체</h3>
<p>포트폴리오 구성에서는 일반적으로 이상치 데이터를 다른 데이터로 대체하는 윈저라이징 방법이 사용됩니다. 예를 들어, 상위 99%를 초과하는 데이터는 99% 값으로 대체하며, 하위 1% 미만의 데이터는 1% 데이터로 대체합니다. 즉, 좌우로 울타리를 쳐놓고 해당 범위를 넘어가는 값을 강제로 울타리에 맞춰줍니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">value_winsor =<span class="st"> </span>KOR_value <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(PBR) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">PBR =</span> <span class="kw">ifelse</span>(<span class="kw">percent_rank</span>(PBR) <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.99</span>,
                      <span class="kw">quantile</span>(., <span class="fl">0.99</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), PBR),
         <span class="dt">PBR =</span> <span class="kw">ifelse</span>(<span class="kw">percent_rank</span>(PBR) <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.01</span>,
                      <span class="kw">quantile</span>(., <span class="fl">0.01</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), PBR))

value_winsor <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> PBR)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.1</span>)</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-15-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>역시나 <code>percent_rank()</code> 함수를 통해 백분위를 구한 후, 해당 범위를 초과할 경우 각각 상하위 1% 데이터로 변형을 해주도록 합니다. 그림을 살펴보면 x축 양 끝 부분의 막대가 길어진 것을 확인할 수 있습니다.</p>
</div>
<div id="section-141" class="section level3">
<h3><span class="header-section-number">10.3.3</span> 팩터의 결합 방법</h3>
<p>우리는 이전에 밸류 지표의 결합, 퀄리티 지표의 결합, 그리고 마법공식 포트폴리오를 구성할 때 단순히 랭킹을 더하는 방법을 사용하였습니다. 물론 투자 종목수가 얼마 되지 않거나, 개인투자자의 입장에서는 이러한 방법이 가장 심플하면서도 효과적일수 있습니다.</p>
<p>그러나 전문투자자 혹은 팩터를 분석하는 업무를 할 경우, 이처럼 단순히 랭킹을 더하는 방법은 여러가지 문제를 지니고 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyr)
  
KOR_value <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">min_rank</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(. <span class="op">~</span><span class="st"> </span>key)  </code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-16-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>위 그림은 각 밸류 지표의 랭킹을 구한 후 히스토그램으로 나타낸 것입니다. 랭킹을 구하는 것의 가장 큰 장점은 극단치로 인한 효과가 사라진다는 점과, 균등한 분포를 가진다는 점입니다.</p>
<p>그러나 각 지표의 x축을 보면 최대값이 서로 다릅니다. 이는 지표별 결측치로 인해 유효 데이터의 갯수가 달라 나타나는 현상이며, 서로 다른 범위의 분포를 단순히 합치는 것은 좋은 방법이 아닙니다.</p>
<p>예를 들어 A, B, C, D 팩터에 각각 비중을 40%, 30%, 20%, 10% 부여하여 포트폴리오를 구성하고자 할 경우를 생각해 봅시다. 각 랭킹은 분포의 범위가 다르므로, 랭킹과 비중의 가중평균을 통해 포트폴리오를 구성하는 방법은 왜곡된 결과를 발생시킵니다.</p>
<p>이러한 문제를 해결하는 가장 좋은 방법은 랭킹을 구한 후, 이를 Z-Score로 정규화하는 방법입니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">KOR_value <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">min_rank</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">scale</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(. <span class="op">~</span><span class="st"> </span>key)  </code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-17-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p><code>min_rank()</code>를 통해 랭킹을 구한 후, <code>scale()</code>을 통해 정규화를 해주었습니다. 기본적으로 랭킹의 분포가 가진 극단치 효과가 사라지는 점과 균등 분포의 장점을 유지하고 있으며, 분포의 범위 역시 거의 동일하게 바뀌었습니다.</p>
<p>이처럼 여러 팩터를 결합하여 포트폴리오를 구성하고자 하는 경우, 먼저 각 팩터(지표) 별 랭킹을 구한 후 정규화를 한 뒤 더하는 것이, 왜곡 효과가 제거된 안정적인 방법입니다.</p>
<p><span class="math display">\[Z－Score(Rank(Factor\,A)) + Z－Score(Rank(Factor\,B)) +\,\dots\,+ Z－Score(Rank(Factor\,N))\]</span></p>
</div>
</div>
<div id="section-142" class="section level2">
<h2><span class="header-section-number">10.4</span> 멀티팩터 포트폴리오</h2>
<p>앞에서 배웠던 팩터 이론들과 결합 방법들을 응용하여 멀티팩터 포트폴리오를 구성해보도록 하겠습니다. 각 팩터에 사용되는 지표는 다음과 같습니다.</p>
<ul>
<li>퀄리티: 자기자본이익률, 매출총이익, 영업활동현금흐름</li>
<li>밸류: PER, PBR, PSR, PCR</li>
<li>모멘텀: 3개월 수익률, 6개월 수익률, 12개월 수익률</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(xts)
<span class="kw">library</span>(stringr)

KOR_fs =<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&#39;data/KOR_fs.Rds&#39;</span>)
KOR_value =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_value.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
KOR_price =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_price.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.xts</span>()

KOR_ticker =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/KOR_ticker.csv&#39;</span>, <span class="dt">row.names =</span> <span class="dv">1</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) 
KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span> =<span class="st"> </span><span class="kw">str_pad</span>(KOR_ticker<span class="op">$</span><span class="st">&#39;종목코드&#39;</span>, <span class="dv">6</span>, <span class="st">&#39;left&#39;</span>, <span class="dv">0</span>)</code></pre>
<p>먼저 재무제표, 가치지표, 주가 데이터를 불러오도록 합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">num_col =<span class="st"> </span><span class="kw">ncol</span>(KOR_fs[[<span class="dv">1</span>]])
quality_roe =<span class="st"> </span>(KOR_fs<span class="op">$</span><span class="st">&#39;지배주주순이익&#39;</span> <span class="op">/</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;자본&#39;</span>)[num_col]
quality_gpa =<span class="st"> </span>(KOR_fs<span class="op">$</span><span class="st">&#39;매출총이익&#39;</span> <span class="op">/</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;자산&#39;</span>)[num_col]
quality_cfo =<span class="st"> </span>(KOR_fs<span class="op">$</span><span class="st">&#39;영업활동으로인한현금흐름&#39;</span> <span class="op">/</span><span class="st"> </span>KOR_fs<span class="op">$</span><span class="st">&#39;자산&#39;</span>)[num_col]
quality_profit =<span class="st"> </span><span class="kw">cbind</span>(quality_roe, quality_gpa, quality_cfo) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">setNames</span>(., <span class="kw">c</span>(<span class="st">&#39;ROE&#39;</span>, <span class="st">&#39;GPA&#39;</span>, <span class="st">&#39;CFO&#39;</span>))

factor_quality =<span class="st"> </span>quality_profit <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">min_rank</span>(<span class="kw">desc</span>(.)))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">scale</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rowSums</span>()

factor_quality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">`</span><span class="dt">.</span><span class="st">`</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>()</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-19-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>첫번째로 퀄리티 지표를 계산해줍니다. 코드는 앞장에서 살펴본 것과 거의 비슷하며, 자기자본이익률, 매출총이익, 영업활동현금흐름을 계산해줍니다. 그 후 <code>mutate_all()</code> 함수를 통해 랭킹을 구한 후 다시 표준화를 해주도록 하며, 내림차순으로 정리하기 위해 랭킹 부분에 <code>desc()</code>를 붙여줍니다.</p>
<p>그 후 <code>rowSums()</code> 함수를 통해 계산된 Z-Score를 종목별로 합쳐주도록 합니다. Z-Score의 히스토그램을 살펴보면 이상치가 없이 중앙에 데이터가 많이 분포되어 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">factor_value =<span class="st"> </span>KOR_value <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">min_rank</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">scale</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rowSums</span>()

factor_value <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">`</span><span class="dt">.</span><span class="st">`</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>()</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-20-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>두번째로 밸류 지표를 계산해줍니다. 밸류 지표의 경우 이미 테이블 형태로 들어와 있으며, 랭킹과 표준화를 거쳐 합을 구해주도록 합니다. 역시나 이상치가 없이 중앙에 데이터가 많이 분포되어 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(PerformanceAnalytics)
<span class="kw">library</span>(dplyr)

ret_3m =<span class="st"> </span><span class="kw">Return.calculate</span>(KOR_price) <span class="op">%&gt;%</span><span class="st"> </span>xts<span class="op">::</span><span class="kw">last</span>(<span class="dv">60</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">sapply</span>(., <span class="cf">function</span>(x) {<span class="kw">prod</span>(<span class="dv">1</span><span class="op">+</span>x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>})
ret_6m =<span class="st"> </span><span class="kw">Return.calculate</span>(KOR_price) <span class="op">%&gt;%</span><span class="st"> </span>xts<span class="op">::</span><span class="kw">last</span>(<span class="dv">120</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">sapply</span>(., <span class="cf">function</span>(x) {<span class="kw">prod</span>(<span class="dv">1</span><span class="op">+</span>x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>})
ret_12m =<span class="st"> </span><span class="kw">Return.calculate</span>(KOR_price) <span class="op">%&gt;%</span><span class="st"> </span>xts<span class="op">::</span><span class="kw">last</span>(<span class="dv">252</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">sapply</span>(., <span class="cf">function</span>(x) {<span class="kw">prod</span>(<span class="dv">1</span><span class="op">+</span>x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>})
ret_bind =<span class="st"> </span><span class="kw">cbind</span>(ret_3m, ret_6m, ret_12m) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">data.frame</span>()

factor_mom =<span class="st"> </span>ret_bind <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">min_rank</span>(<span class="kw">desc</span>(.)))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">scale</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rowSums</span>()

factor_mom <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">`</span><span class="dt">.</span><span class="st">`</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>()</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-21-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>마지막으로 모멘텀 지표를 계산해줍니다. 최근 60일, 120일, 252일 주가를 통해 3개월, 6개월, 12개월 수익률을 구해준 후 <code>cbind()</code>를 통해 열로 묶어주도록 합니다. 그 후 내림차순 기준 랭킹과 표준화를 거쳐 합을 구해주도록 합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(corrplot)

<span class="kw">cbind</span>(factor_quality, factor_value, factor_mom) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">setNames</span>(<span class="kw">c</span>(<span class="st">&#39;Quality&#39;</span>, <span class="st">&#39;Value&#39;</span>, <span class="st">&#39;Momentum&#39;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">cor</span>(<span class="dt">use =</span> <span class="st">&#39;complete.obs&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">round</span>(., <span class="dv">2</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">corrplot</span>(<span class="dt">method =</span> <span class="st">&#39;color&#39;</span>, <span class="dt">type =</span> <span class="st">&#39;upper&#39;</span>,
           <span class="dt">addCoef.col =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">number.cex =</span> <span class="dv">1</span>,
           <span class="dt">tl.cex =</span> <span class="fl">0.6</span>, <span class="dt">tl.srt =</span> <span class="dv">45</span>, <span class="dt">tl.col =</span> <span class="st">&#39;black&#39;</span>,
           <span class="dt">col =</span> <span class="kw">colorRampPalette</span>(<span class="kw">c</span>(<span class="st">&#39;blue&#39;</span>, <span class="st">&#39;white&#39;</span>, <span class="st">&#39;red&#39;</span>))(<span class="dv">200</span>),
           <span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.5</span>,<span class="dv">0</span>))</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-22-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>퀄리티, 밸류, 모멘텀 팩터 간의 랭크의 서로 간 상관관계가 매우 낮으며, 여러 팩터를 동시에 고려함으로써 분산효과를 기대할 수 있습니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyr)

factor_qvm =<span class="st"> </span><span class="kw">cbind</span>(factor_quality, factor_value, factor_mom) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">list</span>(<span class="op">~</span><span class="kw">scale</span>(.))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">factor_quality =</span> factor_quality <span class="op">*</span><span class="st"> </span><span class="fl">0.33</span>,
         <span class="dt">factor_value =</span> factor_value <span class="op">*</span><span class="st"> </span><span class="fl">0.33</span>,
         <span class="dt">factor_mom =</span> factor_mom <span class="op">*</span><span class="st"> </span><span class="fl">0.33</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rowSums</span>()

invest_qvm =<span class="st"> </span><span class="kw">rank</span>(factor_qvm) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">30</span></code></pre>
<p>계산된 팩터들을 토대로 최종 포트폴리오를 구성해주도록 합니다. 각 팩터의 분포가 역시나 다르기 때문에 다시 한번 <code>scale()</code>을 통해 정규화를 해주도록 하며, 각 팩터에 동일한 비중인 0.33을 곱해준 후 이를 더해주도록 합니다.</p>
<p>물론 팩터 별 비중을 [0.2, 0.4, 0.4]와 같이 다르게 줄 수도 있으며, 이는 어떠한 팩터를 더욱 중요하게 생각하는지 혹은 더욱 좋게 보는지에 따라 조정이 가능합니다.</p>
<p>최종적으로 해당 값의 랭킹 기준 상위 30 종목을 선택해 줍니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">quality_profit[invest_qvm, ] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(. <span class="op">~</span><span class="st"> </span>key, <span class="dt">scale =</span> <span class="st">&#39;free&#39;</span>, <span class="dt">ncol =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="ot">NULL</span>)</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-24-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>먼저 선택된 종목의 퀄리티 지표별 분포를 살펴보도록 하겠습니다. 대부분 종목의 수익성이 높음이 확인됩니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">KOR_value[invest_qvm, ] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(. <span class="op">~</span><span class="st"> </span>key, <span class="dt">scale =</span> <span class="st">&#39;free&#39;</span>, <span class="dt">ncol =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="ot">NULL</span>)</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-25-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>이번에는 선택된 종목의 가치 지표별 분포입니다. 대부분 종목의 값이 낮아, 밸류 종목임이 확인됩니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">ret_bind[invest_qvm, ] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(. <span class="op">~</span><span class="st"> </span>key, <span class="dt">scale =</span> <span class="st">&#39;free&#39;</span>, <span class="dt">ncol =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="ot">NULL</span>)</code></pre>
<p><img src="10-factor_adv_files/figure-html/unnamed-chunk-26-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>마지막으로 각 종목들의 기간 별 수익률 분포입니다. 역시나 대부분의 종목들이 높은 수익률을 보입니다.</p>
<pre class="sourceCode r"><code class="sourceCode r">KOR_ticker[invest_qvm, ] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="st">&#39;종목코드&#39;</span>, <span class="st">&#39;종목명&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">cbind</span>(<span class="kw">round</span>(quality_roe[invest_qvm, ], <span class="dv">2</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">cbind</span>(<span class="kw">round</span>(KOR_value<span class="op">$</span>PBR[invest_qvm], <span class="dv">2</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">cbind</span>(<span class="kw">round</span>(ret_12m[invest_qvm], <span class="dv">2</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">setNames</span>(<span class="kw">c</span>(<span class="st">&#39;종목코드&#39;</span>, <span class="st">&#39;종목명&#39;</span>, <span class="st">&#39;ROE&#39;</span>, <span class="st">&#39;PBR&#39;</span>, <span class="st">&#39;12M&#39;</span>))</code></pre>
<pre><code>##      종목코드         종목명  ROE  PBR   12M
## 170    010780   아이에스동서 0.22 1.06  0.34
## 229    034310           NICE 0.06 0.78  0.11
## 357    122990         와이솔 0.17 1.87  0.46
## 359    097520       엠씨넥스 0.23 3.62  1.15
## 378    215200 메가스터디교육 0.19 1.97  0.23
## 464    002310     아세아제지 0.15 0.65  0.07
## 486    016590     신대양제지 0.16 0.65  0.01
## 487    067990   도이치모터스 0.17 1.63  0.82
## 604    013580       계룡건설 0.20 0.54 -0.08
## 636    035890       서희건설 0.12 0.79  0.21
## 717    002170       삼양통상 0.09 0.72  0.67
## 733    005990     매일홀딩스 0.05 0.37 -0.13
## 755    023600       삼보판지 0.16 0.53  0.30
## 785    036810     에프에스티 0.18 1.78  0.29
## 803    101330       모베이스 0.09 0.75  0.42
## 808    065130   탑엔지니어링 0.06 0.60  0.68
## 860    038390     레드캡투어 0.09 1.01  0.09
## 874    039340     한국경제TV 0.13 1.35  0.52
## 899    069510         에스텍 0.14 1.05  0.26
## 947    005710       대원산업 0.10 0.48 -0.03
## 990    007540           샘표 0.06 0.57  0.34
## 1071   006580       대양제지 0.25 0.95  0.28
## 1256   031310     아이즈비전 0.10 0.84  0.42
## 1279   016740           두올 0.09 0.57 -0.19
## 1513   037330   인지디스플레 0.06 0.40  0.13
## 1514   092780     동양피스톤 0.12 0.72  0.33
## 1527   019180     티에이치엔 0.12 1.92  0.24
## 1584   004140           동방 0.12 0.48 -0.01
## 1645   002710        TCC스틸 0.09 0.51  0.27
## 1649   091340      S&amp;K폴리텍 0.11 0.82  0.32</code></pre>
<p>포트폴리오 내 종목들을 대상으로 팩터 별 대표적인 지표인 ROE, PBR, 12개월 수익률을 나타내었습니다. 전반적으로 ROE는 높고 PBR은 낮으며, 12개월 수익률이 높은 모습을 보입니다. 물론 특정 팩터의 강도가 약하더라도 나머지 팩터의 강도가 충분히 강하다면, 포트폴리오에 편입되는 모습을 보이기도 합니다.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cbind</span>(quality_profit, KOR_value, ret_bind)[invest_qvm, ] <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">apply</span>(., <span class="dv">2</span>, mean) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">t</span>()</code></pre>
<pre><code>##        ROE   GPA   CFO   PER PBR   PCR   PSR ret_3m ret_6m ret_12m
## [1,] 0.129 0.274 0.133 7.967   1 3.885 0.496  0.219  0.459   0.284</code></pre>
<p>마지막으로 포트폴리오 내 종목들의 지표 별 평균을 계산한 값입니다.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="section-120.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="section-143.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
